<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 9 页 | output stream</title>
  <meta name="author" content="yakun.cyk">
  
  <meta name="description" content="主要内容可能关于 web 技术，感慨心得...">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="output stream"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	    <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
	  <a class="navbar-brand" href="/">output stream</a>
      <div class="collapse navbar-collapse nav-menu">
		    <ul class="nav navbar-nav">
    		  
    		  <li>
    			 <a href="/demos" title="Demos.">
            <i class="fa fa-flask"></i>Demos
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/archives" title="All the articles.">
            <i class="fa fa-archive"></i>归档
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/about" title="About me.">
            <i class="fa fa-user"></i>关于我
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/#" title="Search Posts.">
            <i class="fa fa-search"></i>搜索
    			 </a>
    		  </li>
    		  
    		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <!--
        <i class="fa fa-heart"></i> 
      -->
      
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-08-02 </div>
			<div class="article-title"><a href="/2014/08/02/2014-08-02-linux安装oracle11g记录/" >Linux 安装 oracle11g 记录</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="准备oracle安装文件"><a href="#准备oracle安装文件" class="headerlink" title="准备oracle安装文件"></a>准备oracle安装文件</h2><p> Oracle11gR2包含两个文件linux_11gR2_database_1of2.zip和linux_11gR2_database_2of2.zip，将这两个文件通过SSH上传到/usr /local/oracle中。<br>解压安装文件到当前目录</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost root]<span class="selector-id">#cd</span> /usr/local/oracle</div><div class="line"></div><div class="line">[root@localhost oracle]<span class="selector-id">#unzip</span> linux_11gR2_database_1of2<span class="selector-class">.zip</span></div><div class="line"></div><div class="line">[root@localhost oracle]<span class="selector-id">#unzip</span> linux_11gR2_database_2of2.zip</div></pre></td></tr></table></figure>
<p>执行以上命令后，将会在/usr/local/oracle/下面产生名为database的目录，这就是oracle安装程序的目录。</p>
<h2 id="准备oracle的安装目标目录"><a href="#准备oracle的安装目标目录" class="headerlink" title="准备oracle的安装目标目录"></a>准备oracle的安装目标目录</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost oracle]<span class="selector-id">#mkdir</span> –<span class="selector-tag">p</span> /opt/oracle</div></pre></td></tr></table></figure>
<p>安装目标目录是用户想将oracle安装到哪个位置的目录，本次我们将oracle安装到/opt/oracle目录中，以下为目录创建命令。</p>
<h2 id="创建oracle相关用户和用户组"><a href="#创建oracle相关用户和用户组" class="headerlink" title="创建oracle相关用户和用户组"></a>创建oracle相关用户和用户组</h2><p>oracle不能在root帐户下进行安装，所以需要为oracle的安装专门创建一个用户，同时需要创建dba和oinstall的用户组。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[root@localhost oracle]</span><span class="selector-id">#groupadd</span> <span class="selector-tag">dba</span></div><div class="line"><span class="selector-attr">[root@localhost oracle]</span><span class="selector-id">#groupadd</span> <span class="selector-tag">oinstall</span></div></pre></td></tr></table></figure>
<p>以下命令将创建dba和oinstall用户组：<br>以下命令将创建oracle用户，并设置密码</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost oracle]<span class="comment">#useradd -g oinstall -G dba oracle</span></div><div class="line"></div><div class="line">[root@localhost oracle]<span class="comment">#passwd oracle</span></div><div class="line"></div><div class="line">Changing password <span class="keyword">for</span> user oracle.</div><div class="line"></div><div class="line">New UNIX password: [在此键入密码]</div><div class="line"></div><div class="line">BAD PASSWORD: <span class="literal">it</span> <span class="keyword">is</span> based <span class="literal">on</span> a dictionary word</div><div class="line"></div><div class="line">Retype <span class="keyword">new</span> UNIX password: [在此再次键入密码]</div><div class="line"></div><div class="line">passwd: all authentication tokens updated successfully.</div></pre></td></tr></table></figure>
<p>以下命令将oracle安装目录（/opt/oracle）赋予oracle用户oinstall用户组</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[root@localhost oracle]</span><span class="selector-id">#chown</span> –<span class="selector-tag">R</span> <span class="selector-tag">oracle</span><span class="selector-pseudo">:oinstall</span> /<span class="selector-tag">opt</span>/<span class="selector-tag">oracle</span></div></pre></td></tr></table></figure>
<h2 id="检查安装ORACLE依赖的RPM软件包"><a href="#检查安装ORACLE依赖的RPM软件包" class="headerlink" title="检查安装ORACLE依赖的RPM软件包"></a>检查安装ORACLE依赖的RPM软件包</h2><p>oracle的安装所依赖的软件包，有一部分linux是没有安装的。这需要将这些尚未安装的软件包先安装后才能正常安装oracle。这些未安装的软件包在linux安装光盘上可以取到，我</p>
<p>们直接在linux的光盘上对这些软件包进行安装（也可将所需的软件包直接复制到linux本地磁盘中），首先我们需要挂载linux光盘，使用以下命令：</p>
<p>[root@localhost oracle]#mkdir /mnt/cdrom</p>
<p>[root@localhost oracle]#mount /dev/cdrom /mnt/cdrom<br>安装所缺少的软件包，此处只安装本linux系统所缺少的软件包。如oracle安装过程中，对软件包进行检查时，发现仍有所需软件包未安装时，可根据显示未安装软件包的名字，再次对所缺少的软件包进行安装。以下为安装命令：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[root@localhost oracle]</span>#</div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">kernel-headers-2</span><span class="selector-class">.6</span><span class="selector-class">.18-164</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">glibc-headers-2</span><span class="selector-class">.5-42</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">glibc-devel-2</span><span class="selector-class">.5-42</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">libgomp-4</span><span class="selector-class">.4</span><span class="selector-class">.0-6</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">sysstat-7</span><span class="selector-class">.0</span><span class="selector-class">.2-3</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">libaio-devel-0</span><span class="selector-class">.3</span><span class="selector-class">.106-3</span><span class="selector-class">.2</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">libstdc</span>++<span class="selector-tag">-devel-4</span><span class="selector-class">.1</span><span class="selector-class">.2-46</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">unixODBC-2</span><span class="selector-class">.2</span><span class="selector-class">.11-7</span><span class="selector-class">.1</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">unixODBC-devel-2</span><span class="selector-class">.2</span><span class="selector-class">.11-7</span><span class="selector-class">.1</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">gcc-4</span><span class="selector-class">.1</span><span class="selector-class">.2-46</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">gcc-c</span>++<span class="selector-tag">-4</span><span class="selector-class">.1</span><span class="selector-class">.2-46</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div><div class="line"></div><div class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">elfutils-libelf-devel-0</span><span class="selector-class">.137-3</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span> <span class="selector-tag">elfutils-libelf-devel-static-0</span><span class="selector-class">.137-3</span><span class="selector-class">.el5</span><span class="selector-class">.i386</span><span class="selector-class">.rpm</span></div></pre></td></tr></table></figure>
<p>软件包安装完成后，</p>
<h2 id="设置linux内核参数"><a href="#设置linux内核参数" class="headerlink" title="设置linux内核参数"></a>设置linux内核参数</h2><p>打开修改/etc/sysctl.conf，在最后加入以下内容</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="stylus"></span></div><div class="line"><span class="selector-id">#kernel</span><span class="selector-class">.shmall</span> = <span class="number">2097152</span></div><div class="line"></div><div class="line"><span class="selector-id">#kernel</span><span class="selector-class">.shmmax</span> = <span class="number">2147483648</span></div><div class="line"></div><div class="line">kernel<span class="selector-class">.shmmni</span> = <span class="number">4096</span></div><div class="line"></div><div class="line">kernel<span class="selector-class">.sem</span> = <span class="number">250</span> <span class="number">32000</span> <span class="number">100</span> <span class="number">128</span></div><div class="line"></div><div class="line">net<span class="selector-class">.core</span><span class="selector-class">.rmem_default</span> = <span class="number">4194304</span></div><div class="line"></div><div class="line">net<span class="selector-class">.core</span><span class="selector-class">.rmem_max</span> = <span class="number">4194304</span></div><div class="line"></div><div class="line">net<span class="selector-class">.core</span><span class="selector-class">.wmem_default</span> = <span class="number">262144</span></div><div class="line"></div><div class="line">fs<span class="selector-class">.file-max</span> = <span class="number">6815744</span></div><div class="line"></div><div class="line">net<span class="selector-class">.ipv4</span><span class="selector-class">.ip_local_port_range</span> = <span class="number">9000</span> <span class="number">65500</span></div><div class="line"></div><div class="line">net<span class="selector-class">.core</span><span class="selector-class">.wmem_max</span> = <span class="number">1048576</span></div><div class="line"></div><div class="line">fs<span class="selector-class">.aio-max-nr</span> = <span class="number">1048576</span></div></pre></td></tr></table></figure>
<h2 id="修改-etc-security-limits-conf"><a href="#修改-etc-security-limits-conf" class="headerlink" title="修改 /etc/security/limits.conf"></a>修改 /etc/security/limits.conf</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">修改 /etc/security/limits.conf,加入内容</div><div class="line"></div><div class="line">oracle soft nproc <span class="number">2047</span></div><div class="line"></div><div class="line">oracle hard nproc <span class="number">16384</span></div><div class="line"></div><div class="line">oracle soft nofile <span class="number">1024</span></div><div class="line"></div><div class="line">oracle hard nofile <span class="number">65536</span></div></pre></td></tr></table></figure>
<h2 id="修改系统环境变量-etc-profile"><a href="#修改系统环境变量-etc-profile" class="headerlink" title="修改系统环境变量/etc/profile"></a>修改系统环境变量<code>/etc/profile</code></h2><p>修改环境变量<code>/etc/profile</code>，加入以下内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> [ <span class="variable">$USER</span> = <span class="string">"oracle"</span> ]; <span class="keyword">then</span></div><div class="line"></div><div class="line">	<span class="keyword">if</span> [ <span class="variable">$SHELL</span> = <span class="string">"/bin/ksh"</span> ]; <span class="keyword">then</span></div><div class="line"></div><div class="line">		<span class="built_in">ulimit</span> -p 16384</div><div class="line"></div><div class="line">		<span class="built_in">ulimit</span> -n 65536</div><div class="line"></div><div class="line">	<span class="keyword">else</span></div><div class="line">		<span class="built_in">ulimit</span> -u 16384 -n 65536</div><div class="line">	<span class="keyword">fi</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h2 id="设置ORACLE环境变量"><a href="#设置ORACLE环境变量" class="headerlink" title="设置ORACLE环境变量"></a>设置ORACLE环境变量</h2><p>修改oracle用户主目录（/home/oracle）的的环境变量配置文件<code>~/.bash_profile</code>。使用以下命令</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@localhost</span> oracle]<span class="meta">#vi /home/oracle/.bash_profile</span></div></pre></td></tr></table></figure>
<p>往配置文件中加入以下内容</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">export ORACLE_SID=orcl （注意这个值要和下面创建的数据库实例名称相同）</div><div class="line"></div><div class="line">export ORACLE_BASE=<span class="regexp">/opt/oracle</span><span class="regexp">/app</span></div><div class="line"></div><div class="line">export ORACLE_HOME=$ORACLE_BASE/product<span class="regexp">/11.2.0/dbhome</span>_1</div><div class="line"></div><div class="line">export PATH=$<span class="symbol">PATH:</span>$HOME/<span class="symbol">bin:</span>$ORACLE_HOME/bin</div><div class="line"></div><div class="line">export LD_LIBRARY_PATH=$ORACLE_HOME/<span class="class"><span class="keyword">lib</span>:/<span class="title">usr</span>/<span class="title">lib</span></span></div></pre></td></tr></table></figure>
<h2 id="开始安装过程"><a href="#开始安装过程" class="headerlink" title="开始安装过程"></a>开始安装过程</h2><p>以上步骤设置完成后，建议重新启动系统，使所有设置生效。现在使用oracle用户登录，并转到ORACLE安装程序目录。以下的每一个步骤都oracle安装过程的一个步骤（每一个步骤对应一个安装界面）。</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="keyword">oracle] </span><span class="comment"># su oracle</span></div><div class="line"></div><div class="line">[<span class="keyword">oracle@localhost </span><span class="keyword">oracle] </span><span class="comment">#cd /usr/local/oracle/database</span></div></pre></td></tr></table></figure>
<p>运行安装命令</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[oracle<span class="symbol">@localhost</span> database] <span class="meta">#./runInstaller</span></div></pre></td></tr></table></figure>
<p>有桌面类和服务器类两个选项，此处选择<em>服务器类(server)</em>。</p>
<p><em>可以选择只安装数据库软件, 即不创建通常的数据库实例和数据库文件</em></p>
<p>如果只是安装了数据库软件,<strong>安装结束后</strong>可以再</p>
<p>配置监听</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ORACLE_HOME</span><span class="regexp">/bin/</span>netca</div></pre></td></tr></table></figure>
<p>安装实例或数据库</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ORACLE_HOME</span><span class="regexp">/bin/</span>dbca</div></pre></td></tr></table></figure>
<p>完成以上操作时，建议重新启动一次，避免某些设置未生效。重启后使用oracle用户登录，打开终端，键入以下命令运行以下命令<br>启动监听：</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@localhost</span> oracle]$lsnrctl start</div></pre></td></tr></table></figure>
<p>启动数据库和实例：</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@localhost</span> oracle]$sqlplus /nolog</div><div class="line">[root<span class="symbol">@localhost</span> oracle]$conn /as sysdba</div></pre></td></tr></table></figure>
<p>进入sqlplus后，执行启动数据库命令，以下命令将创建、安装并打开ORACLE实例。此时，数据库系统处于正常工作状态，可以接受用户请求。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SQL&gt;startup</div></pre></td></tr></table></figure>
<p>关闭用</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SQL&gt;<span class="built_in">shutdown</span> immediate</div></pre></td></tr></table></figure>
<h2 id="额外说明"><a href="#额外说明" class="headerlink" title="额外说明"></a>额外说明</h2><p>验证监听</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>tnsping sid/serviceName</div></pre></td></tr></table></figure>
<h2 id="监听的配置"><a href="#监听的配置" class="headerlink" title="监听的配置"></a>监听的配置</h2><p>下回再写.</p>

	
	</div>
  <a type="button" href="/2014/08/02/2014-08-02-linux安装oracle11g记录/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-08-02 </div>
			<div class="article-title"><a href="/2014/08/02/2014-08-02-shell读取配置文件/" >shell读取配置文件</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>最近鼓捣双机热备,写了些shell脚本</p>
<h2 id="适用配置文件"><a href="#适用配置文件" class="headerlink" title="适用配置文件"></a>适用配置文件</h2><p>以 ifbeat 为例,linux的标准的配置文件中等号两遍不能存在括号, <em>空格</em> 或特殊符号可以用转衣服 ‘ \’</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">beat</span>=<span class="literal">true</span></div><div class="line"><span class="attr">primary</span>=<span class="literal">true</span></div><div class="line"><span class="attr">vip</span>=<span class="number">12.22</span>.<span class="number">192.146</span></div></pre></td></tr></table></figure>
<h2 id="shell中读取配置文件"><a href="#shell中读取配置文件" class="headerlink" title="shell中读取配置文件"></a>shell中读取配置文件</h2><p>source 命令会读取配置文件,然后将配置文件中等号左面的key列作为变量读入内存中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> cofingfile</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="variable">$beat</span>      // <span class="literal">true</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$primary</span>   // <span class="literal">true</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$vip</span>       // 12.22.192.146</div></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2014/08/02/2014-08-02-shell读取配置文件/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-08-01 </div>
			<div class="article-title"><a href="/2014/08/01/2014-07-31-linux修改hostname/" >linux修改hostname</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>最近鼓捣Oracle，记录些技巧</p>
<h2 id="修改hostname"><a href="#修改hostname" class="headerlink" title="修改hostname"></a>修改hostname</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="vala"><span class="meta"># vim /ect/hosts              </span></span></div><div class="line"><span class="meta"># vim /etc/sysconfig/network  修改hostname</span></div><div class="line"><span class="meta"># service network restart     重启网络服务</span></div></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2014/08/01/2014-07-31-linux修改hostname/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-08-01 </div>
			<div class="article-title"><a href="/2014/08/01/2014-08-04-linux-air-command/" >linux常用工具</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>使用时</p>
<blockquote>
<p>如空气般必须，如呼吸般自然</p>
</blockquote>
<h2 id="文件链接"><a href="#文件链接" class="headerlink" title="文件链接"></a>文件链接</h2><p>链接文件可以节省磁盘空间，修改链接文件，等于修改原文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ln <span class="_">-s</span> /path/realfile /linkto/path/linkfile</div><div class="line"><span class="_">-s</span> 表示创建的是符号链接</div></pre></td></tr></table></figure>
<h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">zip -r myfile.zip ./*</div><div class="line">-r: 递归压缩</div><div class="line"></div><div class="line">zip <span class="_">-d</span> myfile smart.txt</div><div class="line">删除掉压缩文件中的 smart.txt</div><div class="line"></div><div class="line">zip -m myfile.zip ./add.txt</div><div class="line">向压缩文件中 myfile.zip 添加(插入) add.txt 文件</div></pre></td></tr></table></figure>
<h2 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">unzip -o <span class="_">-d</span> /home/sunny myfile.zip</div><div class="line">-o: 直接覆盖不提示</div><div class="line"><span class="_">-d</span>: 指明将文件解压到哪</div></pre></td></tr></table></figure>
<h2 id="管道输出到文件"><a href="#管道输出到文件" class="headerlink" title="管道输出到文件"></a>管道输出到文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ls /ect/hosts &gt; filename</div><div class="line">追加到文件</div><div class="line">ls /etc/hosts &gt;&gt; filename</div></pre></td></tr></table></figure>
<h2 id="env"><a href="#env" class="headerlink" title="env"></a>env</h2><blockquote>
<p> env executes utility after modifying the environment as specified on the command line.  The option name=value<br>     specifies an environmental variable, name, with a value of value.  The option `-i’ causes env to completely ignore<br>     the environment it inherits.</p>
</blockquote>
<p> If no utility is specified, env prints out the names and values of the variables in the environment, with one name=value pair per line.</p>
<p>如果使用参数 i, 设定环境为制定的环境,排除其他默认参数的影响<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">env -i [<span class="keyword">name</span>=<span class="keyword">value</span>] java -jar xx</div></pre></td></tr></table></figure></p>

	
	</div>
  <a type="button" href="/2014/08/01/2014-08-04-linux-air-command/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-06-20 </div>
			<div class="article-title"><a href="/2014/06/20/2014-06-20-Git学习总结/" >Git学习总结</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>##Git的一些基本概念</p>
<ul>
<li><p>设置自己的用户名和邮箱</p>
  <figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git config –<span class="keyword">global</span> <span class="keyword">user</span>.name <span class="string">"Your Name"</span></div><div class="line">git config –<span class="keyword">global</span> <span class="keyword">user</span>.email <span class="string">"you@example.com"</span></div></pre></td></tr></table></figure>
</li>
<li><p>修改到提交之间有一个缓存区</p>
<ul>
<li>提交到缓存区 <code>git add .</code> 当前所有修改提交到缓存区，也可以单独指定</li>
<li><code>git diff --cached</code> 查看缓存区和本地仓库里的差异</li>
<li><code>git diff HEAD</code>  查看已缓存和当前的区别</li>
<li><code>git diff</code> 查看当前未缓存的和本地仓库里的区别</li>
<li><code>git diff --stat</code> 显示摘要</li>
</ul>
</li>
<li><p>撤销缓存区里的一个更改，例如hello.rb     <code>git reset HEAD -- hello.rb</code></p>
</li>
<li><code>git rm file</code> 将file从文件缓存区、本地目录中移除</li>
<li><code>git rm file --cached</code> 只从缓存区移除，保存本地目录中的</li>
</ul>
<p>##分支操作</p>
<ul>
<li><code>git branch</code> 列出可用的分支</li>
<li><code>git branch daily</code> 创建 daily 分支</li>
<li><code>git checkout -b daily</code> 检查daily分支是否存在，不存在就创建，并且切换过去 </li>
<li><code>git branch -d daily</code> 删除分支daily</li>
<li><code>git merge</code> 其它分支合并到当前分支</li>
<li><code>git checkout -b gh-pages origin/gh-pages</code> 检出并且设置当前分支为远程分支gh-pages </li>
</ul>
<p>##Log查看</p>
<ul>
<li><code>git log --oneline</code> 紧凑查看</li>
<li><code>git log --graph</code> 图形显示</li>
<li><code>git log erlang ^master</code> 查看只在erlang分支里的修改</li>
<li><code>git log --grep</code> 正则取一个log</li>
<li><code>git shortlog master</code> 生成一个简报</li>
</ul>
<p>##里程碑</p>
<ul>
<li><code>git tag -a v1.0</code> 打上v1.0</li>
</ul>
<p>##恢复删除的文件</p>
<ul>
<li><code>git checkout commitid -- pathfile</code></li>
</ul>
<p>##与人分享</p>
<ul>
<li><code>git remote</code> 列出远端的别名</li>
<li><code>git remote add remotename remotepath</code> 以remotename命名remotepath</li>
<li><code>git remote rm remotename</code> 删除别名为remotename的远程仓库</li>
<li><code>git fetch</code> 只下载</li>
<li><code>git pull</code> 下载并更新</li>
<li><code>git push remotename branch</code> 推送本地分支branch到远程仓库remotename的branch分支</li>
</ul>
<p>##一些原则<br>新功能尽可能的开分支，但是定期合到master上来，不要把某一个分支长时间的开发<br>使用git-flow</p>
<h2 id="Git的几个关键知识点"><a href="#Git的几个关键知识点" class="headerlink" title="Git的几个关键知识点"></a>Git的几个关键知识点</h2><ul>
<li>有三种状态：<ul>
<li>暂存 staged</li>
<li>修改 modify</li>
<li>已经提交</li>
</ul>
</li>
<li>git status <ul>
<li>前面状态有两列，头一列是暂存区的改动情况，如果你commit，它会提交，第二列是当前共工作区的状态，它是不会被提交的 </li>
</ul>
</li>
</ul>
<h2 id="冲突之后的解决"><a href="#冲突之后的解决" class="headerlink" title="冲突之后的解决"></a>冲突之后的解决</h2><p>找到冲突的地方，手工解决，然后<code>git add filename; git commite</code></p>
<h2 id="只合并特定的分支特定文件"><a href="#只合并特定的分支特定文件" class="headerlink" title="只合并特定的分支特定文件"></a>只合并特定的分支特定文件</h2><ul>
<li>使用命令 <code>git cherry-pick #commitid</code></li>
<li>checkout方法 <code>git checkout branch -- filename</code></li>
</ul>
<h2 id="查看和远程分支的对比"><a href="#查看和远程分支的对比" class="headerlink" title="查看和远程分支的对比"></a>查看和远程分支的对比</h2><ul>
<li>先把远程分支搞到本地 <code>git fetch origin master:temp</code>， 从远程的origin仓库的master分支下载到本地并新建一个分支temp</li>
<li>比较分支 <code>git diff temp</code></li>
<li>合并特定的文件，参考上面的</li>
<li>删除无用的分支 <code>git branch -d temp</code></li>
</ul>
<h2 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h2><ul>
<li>只显示有对比的文件 <code>git diff 608e120 4abe32e --name-only</code></li>
<li>配合搞成压缩文件 <code>git diff 608e120 4abe32e --name-only | xargs zip update.zip</code></li>
<li>如果不是查看每个文件的详细差别，而是统计一下有哪些文件被改动，有多少行被改 动，就可以使用‘–stat’ 参数。</li>
<li>diff指定的文件 </li>
</ul>
<h2 id="查看今天的更改"><a href="#查看今天的更改" class="headerlink" title="查看今天的更改"></a>查看今天的更改</h2><ul>
<li><code>git log --since=1.days</code></li>
</ul>
<h2 id="子模块"><a href="#子模块" class="headerlink" title="子模块"></a>子模块</h2><ul>
<li>git submodule init  新拉下来的库，初始化所有的子模块</li>
<li>git submodule add submodule-git-url  local-name  给当前库添加一个子模块，路径为submodule-git-url,<br>文件夹名为local-name，一般我们把local-name和子模块的名字保持一致</li>
<li>git submodule foreach some-git-command 遍历子模块，并执行some-git-command，比如批量更新所有的子模块<code>git submodule foreach git pull origin master</code></li>
</ul>

	
	</div>
  <a type="button" href="/2014/06/20/2014-06-20-Git学习总结/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-04-22 </div>
			<div class="article-title"><a href="/2014/04/22/2014-04-22-前端工程师需要掌握的linux基础命令/" >前端工程师需要掌握的linux基础命令</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>最近做服务器的热备，整理了些<code>李纳斯</code>工具的适用方法。</p>
<h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><ul>
<li>sleep 500 暂停</li>
<li>ctrl + z 暂停</li>
<li>progress &amp; 后台运行</li>
<li>jobs\bg\fg 查看后台任务</li>
<li>file 查看文件类型</li>
<li>cd - 上一个工作目录</li>
<li>pwd 查看当前工作目录</li>
<li>touch 创建文件或者更新文件创建时间</li>
<li>rm -i 交互式删除</li>
</ul>
<h3 id="时间相关"><a href="#时间相关" class="headerlink" title="时间相关"></a>时间相关</h3><ul>
<li>date 查看时间</li>
<li>date +%Y–%m–%d 格式化显示</li>
<li>date -s “20:20:16” 修改时间</li>
<li>hwclock 查看硬件时钟</li>
<li>cal 查看日历</li>
<li>uptime 查看系统运行时间</li>
</ul>
<h3 id="输出查看"><a href="#输出查看" class="headerlink" title="输出查看"></a>输出查看</h3><ul>
<li>echo  输出指定的字符到标准输出</li>
<li>cat   输出指定文件到标准输出</li>
<li>head -n 指定行数</li>
<li>tail<ul>
<li>-n 显示行数</li>
<li>-f 实时更新</li>
</ul>
</li>
<li>more 只能向下翻页</li>
<li>less 上下翻页</li>
</ul>
<h3 id="查看硬件信息"><a href="#查看硬件信息" class="headerlink" title="查看硬件信息"></a>查看硬件信息</h3><ul>
<li>lspci -v 查看pci设备</li>
<li>lsusb -v 查看use设备</li>
<li>lsmod 查看加载的驱动</li>
</ul>
<h3 id="关机重启"><a href="#关机重启" class="headerlink" title="关机重启"></a>关机重启</h3><ul>
<li>shutdown -h 关机</li>
<li>shutdown -h +10 10分钟后关机</li>
<li>shutdown -r 重启</li>
<li>shutdown -r now 现在重启</li>
<li>shutdown -h 20:30 20点30分关机</li>
<li>poweroff 关机</li>
<li>reboot 重启</li>
</ul>
<h3 id="归档、压缩"><a href="#归档、压缩" class="headerlink" title="归档、压缩"></a>归档、压缩</h3><ul>
<li>zip xxx.zip myfile</li>
<li><p>unzip xxx.zip</p>
</li>
<li><p>tar -xvf out.tar </p>
</li>
<li>tar -cvf out.tar myfile</li>
<li>tar -zcvf out.tar.gz myfile</li>
</ul>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><ul>
<li>locate keyword 在数据库里查找</li>
<li><p>updatedb 更新数据库</p>
</li>
<li><p>find . -name “<em>aa</em>“ 查找文件名带aa的文件</p>
</li>
<li>find / -name *.conf 查找conf目录</li>
<li>find / -perm 777 查找文件模式为777的</li>
<li>find / -type d  查找文件夹</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . -name <span class="string">"*a*"</span> -exec cat &#123;&#125; \;</div></pre></td></tr></table></figure>
<p>查找名字里带a的文件，并且cat出来，注意后面的{} \;是必须的，且中间必须有空格</p>
<ul>
<li>查找条件</li>
<li>-name</li>
<li>-perm</li>
<li>-user</li>
<li>-group</li>
<li>-ctime</li>
<li>-type</li>
<li>-size</li>
</ul>
<h2 id="常见目录及功能"><a href="#常见目录及功能" class="headerlink" title="常见目录及功能"></a>常见目录及功能</h2><ul>
<li>/opt 目录安装大型软件</li>
<li>/proc 系统实时信息，虚拟目录</li>
<li>/sbin 超级用户才能执行的命令</li>
<li>/usr 一般的软件安装</li>
<li>/var 经常变化的信息</li>
</ul>
<h2 id="BASH"><a href="#BASH" class="headerlink" title="BASH"></a>BASH</h2><ul>
<li>!! 重复执行前一个命令</li>
<li>!字符 重复前一个命令以『字符』开头的命令</li>
<li>!num 按历史纪录重复执行</li>
<li>!?ea 重复执行之前包含ea的命令</li>
<li><p>!-n  重复执行n个命令之前的那个命令</p>
</li>
<li><p>ctrl + r 在历史命令中搜索</p>
</li>
<li><p>esc . 按个esc然后再按一下. 使用上一个命令的参数</p>
</li>
<li><p>? 匹配任意一个字符</p>
</li>
<li><ul>
<li>任意一个字符</li>
</ul>
</li>
<li>[0-9] 数字</li>
<li>[abc] 任意字符</li>
<li>[^abc] 除列表以外的字符</li>
</ul>
<h2 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h2><p><code>:sh</code> 到BASH环境中</p>
<p><code>ctrl+d</code> 回到VIM</p>
<h2 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h2><ul>
<li>fdisk -l 列出硬盘信息</li>
<li><p>fdisk /dev/sdb  进行交互式分区</p>
<ul>
<li>m 帮助</li>
</ul>
</li>
<li><p>partprobe 更新一下分区表</p>
</li>
</ul>
<p>分区机制有MBR和GPT两种<br>MBR 使用BIOS引导方式的PC设备，目前不支持2T以上，支持分区数量有限</p>
<p>分区表只有256字节信息</p>
<p>MBR最多只能创建4个主分区，主分区可以直接使用， 更多分区使用扩展分区和逻辑分区</p>
<p>一个扩展分区会占用一个主分区位置，扩展分区不能直接用</p>
<p>基于扩展分区创建逻辑分区</p>
<p>最多支持63个IDE分区，15个SCSI分区</p>
<p>GPT EFFI引导方式</p>
<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>操作系统通过文件系统管理文件及数据，磁盘或者分区需要创建文件系统后才能被操作系统使用</p>
<ul>
<li>mke2fs 创建文件系统</li>
<li><p>mke2fs -t ext4 /dev/sda3  创建文件系统类型</p>
<ul>
<li>-b 文件块大小,4k</li>
<li>-c 建立的时候检查坏损块</li>
<li>-L 建立卷标</li>
<li>-j 建立文件系统日志</li>
</ul>
</li>
<li><p>dumpe2fs 查看分区的文件系统信息</p>
</li>
<li><p>fsck 检查并且修复损坏的文件系统</p>
</li>
</ul>
<p>带有日志的文件系统有较强的恢复性</p>
<p>##　挂载分区</p>
<ul>
<li>mount /dev/sdb1 /mnt/ 挂载到指定的位置</li>
<li>mount 查看已经挂载的分区</li>
<li>lsof 查看哪些文件被使用，被谁打开</li>
<li>fuser -m /dev/sdb1 被谁使用</li>
</ul>
<p>配置/etc/fstab 自动挂载</p>
<h2 id="帮助信息"><a href="#帮助信息" class="headerlink" title="帮助信息"></a>帮助信息</h2><ul>
<li>ls –help</li>
<li>ls -h</li>
<li>man ls</li>
<li>man -k 关键字查找命令</li>
<li>info 更详细</li>
</ul>
<h2 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h2><p>root 用户 0</p>
<p>系统用户 1-499</p>
<p>普通用户 500以上</p>
<h3 id="相关文件"><a href="#相关文件" class="headerlink" title="相关文件"></a>相关文件</h3><ul>
<li>/etc/passwd 密码 </li>
<li>/etc/shadow 用户密码</li>
<li>/etc/group  保存组</li>
</ul>
<h3 id="当前用户命令"><a href="#当前用户命令" class="headerlink" title="当前用户命令"></a>当前用户命令</h3><ul>
<li>whami 当前登录用户</li>
<li>who 哪些用户</li>
<li>w 有哪些用户在干什么</li>
</ul>
<h3 id="用户操作"><a href="#用户操作" class="headerlink" title="用户操作"></a>用户操作</h3><ul>
<li>useradd 添加用户</li>
<li>usermod 修改用户</li>
<li>userdel 删除用户</li>
</ul>
<h3 id="用户组操作"><a href="#用户组操作" class="headerlink" title="用户组操作"></a>用户组操作</h3><ul>
<li>groupadd 用户组添加 </li>
<li>groupmod 用户组修改</li>
<li>groupdel 用户组删除</li>
</ul>
<h2 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h2><p>限制对特定文件的读、写、执行，每一个文件都有特定的权限<br>进程权限与运行它的用户权限相关</p>
<p>目录必须有x权限，否则不能查看内容</p>
<p>UGO: user group other</p>
<p>每三个一组r w x</p>
<p>rwxrwxrwx 三个一组</p>
<h3 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h3><ul>
<li>chown 修改拥有者 </li>
<li>chgrp 修改所有组</li>
<li><p>chmod 修改权限</p>
</li>
<li><p>u\g\o代表用户、组其它</p>
</li>
<li>a代表所有</li>
<li>+-增加或者删除</li>
<li>r\w\x 三种权限</li>
</ul>
<p>chmod g-x xxxxx 减去xxxxx的用户组执行权限</p>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><p>32bit分为网络部分和主机部分<br>子网掩码用来确定网络部分的位数</p>
<ul>
<li>ifconfig -a 查看所有接口</li>
<li><p>ifconfig eth0 查看特定接口</p>
</li>
<li><p>ifup eth0 启用接口</p>
</li>
<li><p>ifdown eth0 禁用接口</p>
</li>
<li><p>setup 配置网络信息</p>
</li>
</ul>
<h2 id="网络排查相关命令"><a href="#网络排查相关命令" class="headerlink" title="网络排查相关命令"></a>网络排查相关命令</h2><ul>
<li>host 查看域名对应ip</li>
<li>dig  查看域名信息</li>
<li>ip route 查看路由表</li>
<li>traceroute 查看到达目标地址经过的路由</li>
<li>mtr 网络质量测试</li>
</ul>
<h2 id="管道和重定向"><a href="#管道和重定向" class="headerlink" title="管道和重定向"></a>管道和重定向</h2><ul>
<li>STDIN  0</li>
<li>STDOUT 1</li>
<li>STDERR 2</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; STDOUT 重定向到文件【覆盖】</div><div class="line">&gt;&gt; STDOUT 重定向到文件，追加</div><div class="line">2&gt; STDERR 重定向到文件</div><div class="line">2&gt;&amp;1 STDERR与STDOUT结合</div><div class="line">&lt;  重定向到STDIN</div><div class="line">| 一个命令的STDOUT作为另一个命令的STDIN</div><div class="line">2&gt;/dev/null 把错误重定向到null设备</div></pre></td></tr></table></figure>
<h2 id="安装删除包"><a href="#安装删除包" class="headerlink" title="安装删除包"></a>安装删除包</h2><ul>
<li>rpm -i xxx.rpm 安装</li>
<li>rpm -e xxxx 卸载</li>
<li>rpm -U xxx 升级</li>
<li>rpm -ivh <a href="http://xxxx" target="_blank" rel="external">http://xxxx</a>  网络安装</li>
<li>rpm -qa 安装的列表</li>
<li>rpm -ql xxx  安装的东西 </li>
</ul>
<ul>
<li>yum search </li>
<li>yum list (all | installed | updates)</li>
<li>yum info packagename</li>
</ul>
<h2 id="文本处理工具"><a href="#文本处理工具" class="headerlink" title="文本处理工具"></a>文本处理工具</h2><ul>
<li><p>grep </p>
<ul>
<li>-i 忽略大小写</li>
<li>-n 显示行数</li>
<li>-v 不带关键字的行</li>
<li>-Ax 之后的x行</li>
<li>-Cx 之前之后的x行</li>
<li>-Bx 之前的x行</li>
</ul>
</li>
<li><p>cut </p>
<ul>
<li>-d 切分符号</li>
<li>-f 显示的列</li>
<li>-c 基于字符进行切割</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cut <span class="_">-d</span>: <span class="_">-f</span>1 xxx 对xx文件进行</div><div class="line">cut -c2-6 xxx 基于2到6进行切割</div></pre></td></tr></table></figure>
<ul>
<li><p>wc </p>
<ul>
<li>-l 只计行数</li>
<li>-w 只讲单词</li>
<li>-m 字符</li>
<li>-c 只计字节数</li>
</ul>
</li>
<li><p>sort 排序</p>
<ul>
<li>-r 倒序</li>
<li>-u 删除重复行</li>
<li>-tc 使用c进行分割为列进行排序</li>
</ul>
</li>
<li><p>uniq 删除重复相邻行</p>
</li>
<li><p>diff 比较文件 </p>
<ul>
<li>-b 忽略空格数量改变</li>
<li>-u 生成patch文件</li>
</ul>
</li>
<li><p>aspell 拼写检查</p>
</li>
</ul>
<h2 id="实际例子"><a href="#实际例子" class="headerlink" title="实际例子"></a>实际例子</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">tr <span class="_">-d</span> <span class="string">'apple'</span> &lt; hosts 删除hosts文件里的apple</div><div class="line">tr <span class="string">'a-z'</span><span class="string">'A-Z'</span> &lt; hosts 大小写转换</div><div class="line"></div><div class="line">sed <span class="string">'s/str/newstr/g'</span> hosts 替换hosts中的str</div><div class="line">sed <span class="string">'1,50s/str/newstr/g'</span> hosts 只替换1到50行</div><div class="line">sed <span class="_">-e</span> <span class="string">'s/linux/unix/g'</span> <span class="_">-e</span> <span class="string">'s/xxx/xsdjlfsjdf'</span> hosts  连续处理两个替换</div><div class="line"></div><div class="line">sed <span class="_">-f</span> <span class="built_in">command</span> hosts 把替换的命令放到<span class="built_in">command</span>文件里</div><div class="line"></div><div class="line">ps aux | grep xxx  查看某个进程</div><div class="line"></div><div class="line">lsof -i:portnum 查看端口被哪个进程占用</div><div class="line"></div><div class="line"><span class="built_in">kill</span> -9 pid 杀掉某个进程</div><div class="line"></div><div class="line">killall program 杀掉指定名称的所有进程</div></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2014/04/22/2014-04-22-前端工程师需要掌握的linux基础命令/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-04-21 </div>
			<div class="article-title"><a href="/2014/04/21/2014-04-11-grunt/" >Grunt：任务自动管理工具</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>在Javascript的开发过程中，经常会遇到一些重复性的任务，比如合并文件、压缩代码、检查语法错误、将Sass代码转成CSS代码等等。通常，我们需要使用不同的工具，来完成不同的任务，既重复劳动又非常耗时。Grunt就是为了解决这个问题而发明的工具，可以帮助我们自动管理和运行各种任务。</p>
<p>简单说，Grunt是一个自动任务运行器，会按照预先设定的顺序自动运行一系列的任务。这可以简化工作流程，减轻重复性工作带来的负担。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>Grunt基于Node.js，安装之前要先安装Node.js，然后运行下面的命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install grunt-cli -g</div></pre></td></tr></table></figure>
<p>grunt-cli表示安装的是grunt的命令行界面，参数g表示全局安装。</p>
<p>Grunt使用模块结构，除了安装命令行界面以外，还要根据需要安装相应的模块。这些模块应该采用局部安装，因为不同项目可能需要同一个模块的不同版本。</p>
<p>首先，在项目的根目录下，创建一个文本文件package.json，指定当前项目所需的模块。下面就是一个例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"my-project-name"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">  <span class="string">"author"</span>: <span class="string">"Your Name"</span>,</div><div class="line">  <span class="string">"devDependencies"</span>: &#123;</div><div class="line">    <span class="string">"grunt"</span>: <span class="string">"0.x.x"</span>,</div><div class="line">    <span class="string">"grunt-contrib-jshint"</span>: <span class="string">"*"</span>,</div><div class="line">    <span class="string">"grunt-contrib-concat"</span>: <span class="string">"~0.1.1"</span>,</div><div class="line">    <span class="string">"grunt-contrib-uglify"</span>: <span class="string">"~0.1.0"</span>,</div><div class="line">    <span class="string">"grunt-contrib-watch"</span>: <span class="string">"~0.1.4"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个package.json文件中，除了注明项目的名称和版本以外，还在devDependencies属性中指定了项目依赖的grunt模块和版本：grunt核心模块为最新的0.x.x版，jshint插件为最新版本，concat插件不低于0.1.1版，uglify插件不低于0.1.0版，watch插件不低于0.1.4版。</p>
<p>然后，在项目的根目录下运行下面的命令，这些插件就会被自动安装在node_modules子目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install</div></pre></td></tr></table></figure>
<p>上面这种方法是针对已有package.json的情况。如果想要自动生成package.json文件，可以使用npm init命令，按照屏幕提示回答所需模块的名称和版本即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init</div></pre></td></tr></table></figure>
<p>如果已有的package.json文件不包括Grunt模块，可以在直接安装Grunt模块的时候，加上–save-dev参数，该模块就会自动被加入package.json文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install &lt;module&gt; --save-dev</div></pre></td></tr></table></figure>
<p>比如，对应上面package.json文件指定的模块，需要运行以下npm命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">npm install grunt --save-dev</div><div class="line">npm install grunt-contrib-jshint --save-dev</div><div class="line">npm install grunt-contrib-concat --save-dev</div><div class="line">npm install grunt-contrib-uglify --save-dev</div><div class="line">npm install grunt-contrib-watch --save-dev</div></pre></td></tr></table></figure>
<h2 id="命令脚本文件Gruntfile-js"><a href="#命令脚本文件Gruntfile-js" class="headerlink" title="命令脚本文件Gruntfile.js"></a>命令脚本文件Gruntfile.js</h2><p>模块安装完以后，下一步在项目的根目录下，新建脚本文件Gruntfile.js。它是grunt的配置文件，就好像package.json是npm的配置文件一样。Gruntfile.js就是一般的Node.js模块的写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// 配置Grunt各种模块的参数</span></div><div class="line">  grunt.initConfig(&#123;</div><div class="line">    <span class="attr">jshint</span>: &#123; <span class="comment">/* jshint的参数 */</span> &#125;,</div><div class="line">    <span class="attr">concat</span>: &#123; <span class="comment">/* concat的参数 */</span> &#125;,</div><div class="line">    <span class="attr">uglify</span>: &#123; <span class="comment">/* uglify的参数 */</span> &#125;,</div><div class="line">    <span class="attr">watch</span>:  &#123; <span class="comment">/* watch的参数 */</span> &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="comment">// 从node_modules目录加载模块文件</span></div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-jshint'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-concat'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-uglify'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-watch'</span>);</div><div class="line"></div><div class="line">  <span class="comment">// 每行registerTask定义一个任务</span></div><div class="line">  grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'jshint'</span>, <span class="string">'concat'</span>, <span class="string">'uglify'</span>]);</div><div class="line">  grunt.registerTask(<span class="string">'check'</span>, [<span class="string">'jshint'</span>]);</div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>上面的代码用到了grunt代码的三个方法：</p>
<ul>
<li><p><strong>grunt.initConfig</strong>：定义各种模块的参数，每一个成员项对应一个同名模块。</p>
</li>
<li><p><strong>grunt.loadNpmTasks</strong>：加载完成任务所需的模块。</p>
</li>
<li><p><strong>grunt.registerTask</strong>：定义具体的任务。第一个参数为任务名，第二个参数是一个数组，表示该任务需要依次使用的模块。default任务名表示，如果直接输入grunt命令，后面不跟任何参数，这时所调用的模块（该例为jshint，concat和uglify）；该例的check任务则表示使用jshint插件对代码进行语法检查。</p>
</li>
</ul>
<p>上面的代码一共加载了四个模块：jshint（检查语法错误）、concat（合并文件）、uglify（压缩代码）和watch（自动执行）。接下来，有两种使用方法。</p>
<p>（1）命令行执行某个模块，比如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grunt jshint</div></pre></td></tr></table></figure>
<p>上面代码表示运行jshint模块。</p>
<p>（2）命令行执行某个任务。比如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grunt check</div></pre></td></tr></table></figure>
<p>上面代码表示运行check任务。如果运行成功，就会显示“Done, without errors.”。</p>
<p>如果没有给出任务名，只键入grunt，就表示执行默认的default任务。</p>
<h2 id="Gruntfile-js实例：grunt-contrib-cssmin模块"><a href="#Gruntfile-js实例：grunt-contrib-cssmin模块" class="headerlink" title="Gruntfile.js实例：grunt-contrib-cssmin模块"></a>Gruntfile.js实例：grunt-contrib-cssmin模块</h2><p>下面通过cssmin模块，演示如何编写Gruntfile.js文件。cssmin模块的作用是最小化CSS文件。</p>
<p>首先，在项目的根目录下安装该模块。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install grunt-contrib-cssmin --save-dev</div></pre></td></tr></table></figure>
<p>然后，新建文件Gruntfile.js。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</div><div class="line"></div><div class="line">  grunt.initConfig(&#123;</div><div class="line">    <span class="attr">cssmin</span>: &#123;</div><div class="line">      <span class="attr">minify</span>: &#123;</div><div class="line">        <span class="attr">expand</span>: <span class="literal">true</span>,</div><div class="line">		<span class="attr">cwd</span>: <span class="string">'css/'</span>,</div><div class="line">		<span class="attr">src</span>: [<span class="string">'*.css'</span>, <span class="string">'!*.min.css'</span>],</div><div class="line">		<span class="attr">dest</span>: <span class="string">'css/'</span>,</div><div class="line">		<span class="attr">ext</span>: <span class="string">'.min.css'</span></div><div class="line">	  &#125;,</div><div class="line">      <span class="attr">combine</span>: &#123;</div><div class="line">	    <span class="attr">files</span>: &#123;</div><div class="line">		  <span class="string">'css/out.min.css'</span>: [<span class="string">'css/part1.min.css'</span>, <span class="string">'css/part2.min.css'</span>]</div><div class="line">		&#125;</div><div class="line">	  &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-cssmin'</span>);</div><div class="line"></div><div class="line">  grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'cssmin:minify'</span>,<span class="string">'cssmin:combine'</span>]);</div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>下面详细解释上面代码中的三个方法，下面一个个来看。</p>
<p><strong>（1）grunt.loadNpmTasks</strong></p>
<p>grunt.loadNpmTasks方法载入模块文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">grunt.loadNpmTasks(<span class="string">'grunt-contrib-cssmin'</span>);</div></pre></td></tr></table></figure>
<p>你需要使用几个模块，这里就要写几条grunt.loadNpmTasks语句，将各个模块一一加载。</p>
<p>如果加载模块很多，这部分会非常冗长。而且，还存在一个问题，就是凡是在这里加载的模块，也同时出现在package.json文件中。如果使用npm命令卸载模块以后，模块会自动从package.json文件中消失，但是必须手动从Gruntfile.js文件中清除，这样很不方便，一旦忘记，还会出现运行错误。这里有一个解决办法，就是安装load-grunt-tasks模块，然后在Gruntfile.js文件中，用下面的语句替代所有的grunt.loadNpmTasks语句。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">'load-grunt-tasks'</span>)(grunt);</div></pre></td></tr></table></figure>
<p>这条语句的作用是自动分析package.json文件，自动加载所找到的grunt模块。</p>
<p><strong>（2）grunt.initConfig</strong></p>
<p>grunt.initConfig方法用于模块配置，它接受一个对象作为参数。该对象的成员与使用的同名模块一一对应。由于我们要配置的是cssmin模块，所以里面有一个cssmin成员（属性）。</p>
<p>cssmin（属性）指向一个对象，该对象又包含多个成员。除了一些系统设定的成员（比如options），其他自定义的成员称为目标（target）。一个模块可以有多个目标（target），上面代码里面，cssmin模块共有两个目标，一个是“minify”，用于压缩css文件；另一个是“combine”，用于将多个css文件合并一个文件。</p>
<p>每个目标的具体设置，需要参考该模板的文档。就cssmin来讲，minify目标的参数具体含义如下：</p>
<ul>
<li><p><strong>expand</strong>：如果设为true，就表示下面文件名的占位符（即*号）都要扩展成具体的文件名。</p>
</li>
<li><p><strong>cwd</strong>：需要处理的文件（input）所在的目录。</p>
</li>
<li><p><strong>src</strong>：表示需要处理的文件。如果采用数组形式，数组的每一项就是一个文件名，可以使用通配符。</p>
</li>
<li><p><strong>dest</strong>：表示处理后的文件名或所在目录。</p>
</li>
<li><p><strong>ext</strong>：表示处理后的文件后缀名。</p>
</li>
</ul>
<p>除了上面这些参数，还有一些参数也是grunt所有模块通用的。</p>
<ul>
<li><p><strong>filter</strong>：一个返回布尔值的函数，用于过滤文件名。只有返回值为true的文件，才会被grunt处理。</p>
</li>
<li><p><strong>dot</strong>：是否匹配以点号（.）开头的系统文件。</p>
</li>
<li><p><strong>makeBase</strong>：如果设置为true，就只匹配文件路径的最后一部分。比如，a?b可以匹配/xyz/123/acb，而不匹配/xyz/acb/123。</p>
</li>
</ul>
<p>关于通配符，含义如下：</p>
<ul>
<li>*：匹配任意数量的字符，不包括/。</li>
<li>?：匹配单个字符，不包括/。</li>
<li>**：匹配任意数量的字符，包括/。</li>
<li>{}：允许使用逗号分隔的列表，表示“or”（或）关系。</li>
<li>!：用于模式的开头，表示只返回不匹配的情况。</li>
</ul>
<p>比如，foo/*.js匹配foo目录下面的文件名以.js结尾的文件，foo/**/*.js匹配foo目录和它的所有子目录下面的文件名以.js结尾的文件，!*.css表示匹配所有后缀名不为“.css”的文件。</p>
<p>使用通配符设置src属性的更多例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;<span class="attr">src</span>: <span class="string">'foo/th*.js'</span>&#125;grunt-contrib-uglify</div><div class="line"></div><div class="line">&#123;<span class="attr">src</span>: <span class="string">'foo/&#123;a,b&#125;*.js'</span>&#125;</div><div class="line"></div><div class="line">&#123;<span class="attr">src</span>: [<span class="string">'foo/a*.js'</span>, <span class="string">'foo/b*.js'</span>]&#125;</div></pre></td></tr></table></figure>
<p>至于combine目标，就只有一个files参数，表示输出文件是css子目录下的out.min.css，输入文件则是css子目录下的part1.min.css和part2.min.css。</p>
<p>files参数的格式可以是一个对象，也可以是一个数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">files: &#123;</div><div class="line">        <span class="string">'dest/b.js'</span>: [<span class="string">'src/bb.js'</span>, <span class="string">'src/bbb.js'</span>],</div><div class="line">        <span class="string">'dest/b1.js'</span>: [<span class="string">'src/bb1.js'</span>, <span class="string">'src/bbb1.js'</span>],</div><div class="line">&#125;,</div><div class="line"></div><div class="line"><span class="comment">// or</span></div><div class="line"></div><div class="line">files: [</div><div class="line">        &#123;<span class="attr">src</span>: [<span class="string">'src/aa.js'</span>, <span class="string">'src/aaa.js'</span>], <span class="attr">dest</span>: <span class="string">'dest/a.js'</span>&#125;,</div><div class="line">        &#123;<span class="attr">src</span>: [<span class="string">'src/aa1.js'</span>, <span class="string">'src/aaa1.js'</span>], <span class="attr">dest</span>: <span class="string">'dest/a1.js'</span>&#125;,</div><div class="line">],</div></pre></td></tr></table></figure>
<p>如果minify目标和combine目标的属性设置有重合的部分，可以另行定义一个与minify和combine平行的options属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">grunt.initConfig(&#123;</div><div class="line">   <span class="attr">cssmin</span>: &#123;</div><div class="line">  <span class="attr">options</span>: &#123; <span class="comment">/* ... */</span> &#125;,</div><div class="line">     <span class="attr">minify</span>: &#123; <span class="comment">/* ... */</span> &#125;,</div><div class="line">     <span class="attr">combine</span>: &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line">   &#125;</div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
<p><strong>（3）grunt.registerTask</strong></p>
<p>grunt.registerTask方法定义如何调用具体的任务。“default”任务表示如果不提供参数，直接输入grunt命令，则先运行“cssmin:minify”，后运行“cssmin:combine”，即先压缩再合并。如果只执行压缩，或者只执行合并，则需要在grunt命令后面指明“模块名:目标名”。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">grunt <span class="comment"># 默认情况下，先压缩后合并</span></div><div class="line"></div><div class="line">grunt cssmin:minify <span class="comment"># 只压缩不合并</span></div><div class="line"></div><div class="line">grunt css:combine <span class="comment"># 只合并不压缩</span></div></pre></td></tr></table></figure>
<p>如果不指明目标，只是指明模块，就表示将所有目标依次运行一遍。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">grunt cssmin</div></pre></td></tr></table></figure>
<h2 id="常用模块设置"><a href="#常用模块设置" class="headerlink" title="常用模块设置"></a>常用模块设置</h2><p>grunt的<a href="http://gruntjs.com/plugins" target="_blank" rel="external">模块</a>已经超过了2000个，且还在快速增加。下面是一些常用的模块（按字母排序）。</p>
<ul>
<li><strong>grunt-contrib-clean</strong>：删除文件。</li>
<li><strong>grunt-contrib-compass</strong>：使用compass编译sass文件。</li>
<li><strong>grunt-contrib-concat</strong>：合并文件。</li>
<li><strong>grunt-contrib-copy</strong>：复制文件。</li>
<li><strong>grunt-contrib-cssmin</strong>：压缩以及合并CSS文件。</li>
<li><strong>grunt-contrib-imagemin</strong>：图像压缩模块。</li>
<li><strong>grunt-contrib-jshint</strong>：检查JavaScript语法。</li>
<li><strong>grunt-contrib-uglify</strong>：压缩以及合并JavaScript文件。</li>
<li><strong>grunt-contrib-watch</strong>：监视文件变动，做出相应动作。</li>
</ul>
<p>模块的前缀如果是grunt-contrib，就表示该模块由grunt开发团队维护；如果前缀是grunt（比如grunt-pakmanager），就表示由第三方开发者维护。</p>
<p>以下选几个模块，看看它们配置参数的写法，也就是说如何在grunt.initConfig方法中配置各个模块。</p>
<h3 id="grunt-contrib-jshint"><a href="#grunt-contrib-jshint" class="headerlink" title="grunt-contrib-jshint"></a>grunt-contrib-jshint</h3><p>jshint用来检查语法错误，比如分号的使用是否正确、有没有忘记写括号等等。它在grunt.initConfig方法里面的配置代码如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">jshint: &#123;</div><div class="line">	<span class="attr">options</span>: &#123;</div><div class="line">		<span class="attr">eqeqeq</span>: <span class="literal">true</span>,</div><div class="line">		<span class="attr">trailing</span>: <span class="literal">true</span></div><div class="line">	&#125;,</div><div class="line">	<span class="attr">files</span>: [<span class="string">'Gruntfile.js'</span>, <span class="string">'lib/**/*.js'</span>]</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>上面代码先指定jshint的<a href="http://www.jshint.com/docs/options/" target="_blank" rel="external">检查项目</a>，eqeqeq表示要用严格相等运算符取代相等运算符，trailing表示行尾不得有多余的空格。然后，指定files属性，表示检查目标是Gruntfile.js文件，以及lib目录的所有子目录下面的JavaScript文件。</p>
<h3 id="grunt-contrib-concat"><a href="#grunt-contrib-concat" class="headerlink" title="grunt-contrib-concat"></a>grunt-contrib-concat</h3><p>concat用来合并同类文件，它不仅可以合并JavaScript文件，还可以合并CSS文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">concat: &#123;</div><div class="line">  <span class="attr">js</span>: &#123;</div><div class="line">    <span class="attr">src</span>: [<span class="string">'lib/module1.js'</span>, <span class="string">'lib/module2.js'</span>, <span class="string">'lib/plugin.js'</span>],</div><div class="line">    <span class="attr">dest</span>: <span class="string">'dist/script.js'</span></div><div class="line">  &#125;</div><div class="line">  css: &#123;</div><div class="line">    <span class="attr">src</span>: [<span class="string">'style/normalize.css'</span>, <span class="string">'style/base.css'</span>, <span class="string">'style/theme.css'</span>],</div><div class="line">    <span class="attr">dest</span>: <span class="string">'dist/screen.css'</span></div><div class="line">  &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>js目标用于合并JavaScript文件，css目标用语合并CSS文件。两者的src属性指定需要合并的文件（input），dest属性指定输出的目标文件（output）。</p>
<h3 id="grunt-contrib-uglify"><a href="#grunt-contrib-uglify" class="headerlink" title="grunt-contrib-uglify"></a>grunt-contrib-uglify</h3><p>uglify模块用来压缩代码，减小文件体积。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">uglify: &#123;</div><div class="line">  <span class="attr">options</span>: &#123;</div><div class="line">    <span class="attr">banner</span>: bannerContent,</div><div class="line">    <span class="attr">sourceMapRoot</span>: <span class="string">'../'</span>,</div><div class="line">    <span class="attr">sourceMap</span>: <span class="string">'distrib/'</span>+name+<span class="string">'.min.js.map'</span>,</div><div class="line">    <span class="attr">sourceMapUrl</span>: name+<span class="string">'.min.js.map'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">target</span> : &#123;</div><div class="line">	<span class="attr">expand</span>: <span class="literal">true</span>,</div><div class="line">	<span class="attr">cwd</span>: <span class="string">'js/origin'</span>,</div><div class="line">	<span class="attr">src</span> : <span class="string">'*.js'</span>,</div><div class="line">	<span class="attr">dest</span> : <span class="string">'js/'</span></div><div class="line">  &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>上面代码中的options属性指定压缩后文件的文件头，以及sourceMap设置；target目标指定输入和输出文件。</p>
<h3 id="grunt-contrib-copy"><a href="#grunt-contrib-copy" class="headerlink" title="grunt-contrib-copy"></a>grunt-contrib-copy</h3><p><a href="https://github.com/gruntjs/grunt-contrib-copy" target="_blank" rel="external">copy模块</a>用于复制文件与目录。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">copy: &#123;</div><div class="line">  <span class="attr">main</span>: &#123;</div><div class="line">    <span class="attr">src</span>: <span class="string">'src/*'</span>,</div><div class="line">    <span class="attr">dest</span>: <span class="string">'dest/'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>上面代码将src子目录（只包含它下面的第一层文件和子目录），拷贝到dest子目录下面（即dest/src目录）。如果要更准确控制拷贝行为，比如只拷贝文件、不拷贝目录、不保持目录结构，可以写成下面这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">copy: &#123;</div><div class="line">  <span class="attr">main</span>: &#123;</div><div class="line">    <span class="attr">expand</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">cwd</span>: <span class="string">'src/'</span>,</div><div class="line">    <span class="attr">src</span>: <span class="string">'**'</span>,</div><div class="line">    <span class="attr">dest</span>: <span class="string">'dest/'</span>,</div><div class="line">    <span class="attr">flatten</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">filter</span>: <span class="string">'isFile'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<h3 id="grunt-contrib-watch"><a href="#grunt-contrib-watch" class="headerlink" title="grunt-contrib-watch"></a>grunt-contrib-watch</h3><p><a href="https://github.com/gruntjs/grunt-contrib-watch" target="_blank" rel="external">watch模块</a>用来在后台运行，监听指定事件，然后自动运行指定的任务。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">watch: &#123;</div><div class="line">   <span class="attr">scripts</span>: &#123;</div><div class="line">    <span class="attr">files</span>: <span class="string">'**/*.js'</span>,</div><div class="line">    <span class="attr">tasks</span>: <span class="string">'jshint'</span>,</div><div class="line">	<span class="attr">options</span>: &#123;</div><div class="line">      <span class="attr">livereload</span>: <span class="literal">true</span>,</div><div class="line">    &#125;,</div><div class="line">   &#125;,</div><div class="line">   <span class="attr">css</span>: &#123;</div><div class="line">    <span class="attr">files</span>: <span class="string">'**/*.sass'</span>,</div><div class="line">    <span class="attr">tasks</span>: [<span class="string">'sass'</span>],</div><div class="line">    <span class="attr">options</span>: &#123;</div><div class="line">      <span class="attr">livereload</span>: <span class="literal">true</span>,</div><div class="line">    &#125;,</div><div class="line">   &#125;,</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>设置好上面的代码，打开另一个进程，运行grunt watch。此后，任何的js代码变动，文件保存后就会自动运行jshint任务；任何sass文件变动，文件保存后就会自动运行sass任务。</p>
<p>需要注意的是，这两个任务的options参数之中，都设置了livereload，表示任务运行结束后，自动在浏览器中重载（reload）。这需要在浏览器中安装<a href="http://livereload.com/" target="_blank" rel="external">livereload插件</a>。安装后，livereload的默认端口为localhost:35729，但是也可以用livereload: 1337的形式重设端口（localhost:1337）。</p>
<h3 id="其他模块"><a href="#其他模块" class="headerlink" title="其他模块"></a>其他模块</h3><p>下面是另外一些有用的模块。</p>
<p><strong>（1）grunt-contrib-clean</strong></p>
<p>该模块用于删除文件或目录。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">clean: &#123;</div><div class="line">  <span class="attr">build</span>: &#123;</div><div class="line">    <span class="attr">src</span>: [<span class="string">"path/to/dir/one"</span>, <span class="string">"path/to/dir/two"</span>]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>（2）grunt-autoprefixer</strong></p>
<p>该模块用于为CSS语句加上浏览器前缀。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">autoprefixer: &#123;</div><div class="line">  <span class="attr">build</span>: &#123;</div><div class="line">    <span class="attr">expand</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">cwd</span>: <span class="string">'build'</span>,</div><div class="line">    <span class="attr">src</span>: [ <span class="string">'**/*.css'</span> ],</div><div class="line">    <span class="attr">dest</span>: <span class="string">'build'</span></div><div class="line">  &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p><strong>（3）grunt-contrib-connect</strong></p>
<p>该模块用于在本机运行一个Web Server。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">connect: &#123;</div><div class="line">  <span class="attr">server</span>: &#123;</div><div class="line">    <span class="attr">options</span>: &#123;</div><div class="line">      <span class="attr">port</span>: <span class="number">4000</span>,</div><div class="line">      <span class="attr">base</span>: <span class="string">'build'</span>,</div><div class="line">      <span class="attr">hostname</span>: <span class="string">'*'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>connect模块会随着grunt运行结束而结束，为了使它一直处于运行状态，可以把它放在watch模块之前运行。因为watch模块需要手动中止，所以connect模块也就会一直运行。</p>
<p><strong>（4）grunt-htmlhint</strong></p>
<p>该模块用于检查HTML语法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">htmlhint: &#123;</div><div class="line">    <span class="attr">build</span>: &#123;</div><div class="line">        <span class="attr">options</span>: &#123;</div><div class="line">            <span class="string">'tag-pair'</span>: <span class="literal">true</span>,</div><div class="line">            <span class="string">'tagname-lowercase'</span>: <span class="literal">true</span>,</div><div class="line">            <span class="string">'attr-lowercase'</span>: <span class="literal">true</span>,</div><div class="line">            <span class="string">'attr-value-double-quotes'</span>: <span class="literal">true</span>,</div><div class="line">            <span class="string">'spec-char-escape'</span>: <span class="literal">true</span>,</div><div class="line">            <span class="string">'id-unique'</span>: <span class="literal">true</span>,</div><div class="line">            <span class="string">'head-script-disabled'</span>: <span class="literal">true</span>,</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">src</span>: [<span class="string">'index.html'</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码用于检查index.html文件：HTML标记是否配对、标记名和属性名是否小写、属性值是否包括在双引号之中、特殊字符是否转义、HTML元素的id属性是否为唯一值、head部分是否没有script标记。</p>
<p><strong>（5）grunt-contrib-sass模块</strong></p>
<p>该模块用于将SASS文件转为CSS文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">sass: &#123;</div><div class="line">    <span class="attr">build</span>: &#123;</div><div class="line">		<span class="attr">options</span>: &#123;</div><div class="line">            <span class="attr">style</span>: <span class="string">'compressed'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">files</span>: &#123;</div><div class="line">            <span class="string">'build/css/master.css'</span>: <span class="string">'assets/sass/master.scss'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码指定输出文件为build/css/master.css，输入文件为assets/sass/master.scss。</p>
<p><strong>（6）grunt-markdown</strong></p>
<p>该模块用于将markdown文档转为HTML文档。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">markdown: &#123;</div><div class="line">    <span class="attr">all</span>: &#123;</div><div class="line">      <span class="attr">files</span>: [</div><div class="line">        &#123;</div><div class="line">          <span class="attr">expand</span>: <span class="literal">true</span>,</div><div class="line">          <span class="attr">src</span>: <span class="string">'*.md'</span>,</div><div class="line">          <span class="attr">dest</span>: <span class="string">'docs/html/'</span>,</div><div class="line">          <span class="attr">ext</span>: <span class="string">'.html'</span></div><div class="line">        &#125;</div><div class="line">      ],</div><div class="line">      <span class="attr">options</span>: &#123;</div><div class="line">        <span class="attr">template</span>: <span class="string">'templates/index.html'</span>,</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>上面代码指定将md后缀名的文件，转为docs/html/目录下的html文件。template属性指定转换时采用的模板，模板样式如下。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">%=content%</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li>Frederic Hemberger, <a href="http://frederic-hemberger.de/artikel/grunt-buildtool-for-frontend-projects/" target="_blank" rel="external">A build tool for front-end projects</a></li>
<li>Mária Jurčovičová, <a href="http://flippinawesome.org/2013/07/01/building-a-javascript-library-with-grunt-js/" target="_blank" rel="external">Building a JavaScript Library with Grunt.js</a></li>
<li>Ben Briggs，<a href="http://sixrevisions.com/javascript/grunt-tutorial-01/" target="_blank" rel="external">Speed Up Your Web Development Workflow with Grunt</a></li>
<li><a href="http://blog.grayghostvisuals.com/grunt/image-optimization/" target="_blank" rel="external">Optimizing Images With Grunt</a></li>
<li>Swapnil Mishra, <a href="http://howtonode.org/c4e0f8565942d5e6df45fb78b12d19435543c236/simplifying-chores-with-grunt" target="_blank" rel="external">Simplifying Chores with Grunt</a></li>
<li>AJ ONeal, <a href="http://blog.coolaj86.com/articles/moving-to-grunt.html" target="_blank" rel="external">Moving to GruntJS</a></li>
<li>Grunt Documentation, <a href="http://gruntjs.com/configuring-tasks" target="_blank" rel="external">Configuring tasks</a></li>
<li>Landon Schropp, <a href="http://www.sitepoint.com/writing-awesome-build-script-grunt/" target="_blank" rel="external">Writing an Awesome Build Script with Grunt</a></li>
<li>Mike Cunsolo, <a href="http://coding.smashingmagazine.com/2013/10/29/get-up-running-grunt/" target="_blank" rel="external">Get Up And Running With Grunt</a></li>
<li>Matt Bailey, <a href="http://www.gpmd.co.uk/blog/a-beginners-guide-to-using-grunt-with-magento/" target="_blank" rel="external">A Beginner’s Guide to Using Grunt With Magento</a></li>
<li>Paul Bakaus, <a href="http://www.html5rocks.com/en/tutorials/tooling/supercharging-your-gruntfile/" target="_blank" rel="external">Supercharging your Gruntfile</a></li>
</ul>

	
	</div>
  <a type="button" href="/2014/04/21/2014-04-11-grunt/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-04-10 </div>
			<div class="article-title"><a href="/2014/04/10/2014-04-10-cssInNote/" >细枝末节css</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h3 id="选择器解析"><a href="#选择器解析" class="headerlink" title="选择器解析"></a>选择器解析</h3><p>浏览器解析CSS 选择器是从右往左的。这意味着，如果它看到一个如“<code>nav ul li a</code> 的规则时，它首先必须获得所有匹配a 的元素列表，然后检查看 它是不是li 的后代，再按相同规则继续检查。后代选择器虽然看起来方便，但它的性能开销是最大的。</p>
<h2 id="元素的位置"><a href="#元素的位置" class="headerlink" title="元素的位置"></a>元素的位置</h2><p>元素的 x 和 y 坐标可以相对于文档的<code>左上角</code>或者相对于在其中<code>显示文档</code>的 <code>视口</code>的左上角。</p>
<blockquote>
<p>在顶级窗口和标签页中，视口只是实际显示文档内容的一部分； 它不包括浏览器的外壳，拖动浏览器的边框，大小会跟随改变。</p>
</blockquote>
<p>无论在何种情况下，当讨论元素的位置时，必须弄清楚所使用的坐标是文档坐标还是视口坐标。如果文档比视口要小，或者说它还未出现滚动，则文档的左上角就是视口的左上角,文档和视口坐标系统是同一个。</p>
<figure class="highlight fix"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">视口坐标+滚动的偏移量 </span>=<span class="string"> 文档的坐标</span></div></pre></td></tr></table></figure>
<p>文档坐标比视口坐标更加基础，并且在用户滚动时它们不会发生变化。</p>
<p>当为鼠标事件注册事件处理程序函数时，报告的鼠标指针的坐标是在<code>视口坐标系</code>中的。</p>
<h4 id="Window-innerHeight"><a href="#Window-innerHeight" class="headerlink" title="Window.innerHeight"></a>Window.innerHeight</h4><p>window.innerHeight 是为了兼容性的考虑，IE9才开始支持。 <strong>用于窗口元素的，不是用于普通元素的</strong></p>
<p>也就是浏览器窗口的视口（viewport）高度（以像素为单位），如果存在水平滚动条，则包括滚动条.  任何窗口对象，如 window、frame、frameset 或 secondary window 都支持 <code>innerHeight</code> 属性。</p>
<p>兼容性：</p>
<pre><code>Chrome       Firefox (Gecko)       Internet Explorer Opera  Safari
    1      1.0 (1.7 or earlier)           9            9       3
</code></pre><p>想获取窗口的外层高度（outer height），即整个浏览器窗口的高度，使用 <code>window.outerHeight</code>。</p>
<h4 id="document-height"><a href="#document-height" class="headerlink" title="document.height"></a>document.height</h4><p>已废弃 用什么替代该属性</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientHeight</span></div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span></div></pre></td></tr></table></figure>
<h4 id="element-clientHeight"><a href="#element-clientHeight" class="headerlink" title="element.clientHeight"></a>element.clientHeight</h4><p>返回元素内部的高度(单位像数), 包含 padding, 但<code>不包括水平滚动条,border 和 margin</code>.</p>
<p>clientHeight 是只读的.  不是属于W3C规格。 <strong>注意</strong></p>
<p><code>clientHeight</code> 是一个非标准属性, 它从 Internet Explorer 对象模型引入. 它是<code>HTML</code>的特有属性.</p>
<h4 id="Element-scrollHeight"><a href="#Element-scrollHeight" class="headerlink" title="Element.scrollHeight"></a>Element.scrollHeight</h4><p>Element.scrollHeight 是计量元素内容高度的只读属性，包括overflow样式属性导致的视图中不可见内容。<br>没有垂直滚动条的情况下，scrollHeight值与元素视图填充所有内容所需要的最小值clientHeight相同。 包括元素的padding，但不包括元素的margin.  </p>
<h4 id="判定元素是否滚动到底"><a href="#判定元素是否滚动到底" class="headerlink" title="判定元素是否滚动到底"></a>判定元素是否滚动到底</h4><p>如果元素滚动到底，下面等式返回true，没有则返回false.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">element.scrollHeight - element.scrollTop === element.clientHeight   <span class="comment">// element 已滚动到底</span></div></pre></td></tr></table></figure>
<p>浏览器兼容性</p>
<pre><code>Browser           Lowest version
Internet Explorer    8.0
</code></pre><h4 id="Element-getBoundingClientRect"><a href="#Element-getBoundingClientRect" class="headerlink" title="Element.getBoundingClientRect()"></a>Element.getBoundingClientRect()</h4><p>相对于 <code>视口</code>，而不是 <code>文档(dom)</code></p>
<blockquote>
<p>The returned value is a TextRectangle object, which contains read-only </p>
<ul>
<li>left, </li>
<li>top, </li>
<li>right and </li>
<li>bottom<br>properties describing the border-box in pixels. top and left are relative to the top-left of the viewport.</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rect = obj.getBoundingClientRect();</div></pre></td></tr></table></figure>
<p>Browser compatibility</p>
<pre><code>Desktop 
Feature           Chrome    Firefox (Gecko) Internet Explorer    Opera    Safari
Basic support    1.0        3.0 (1.9)             4.0 [1]        (Yes)     4.0
width/height    (Yes)    3.5 (1.9.1)          9                (Yes)    (Yes)
</code></pre><h4 id="HTMLElement-offsetLeft"><a href="#HTMLElement-offsetLeft" class="headerlink" title="HTMLElement.offsetLeft"></a>HTMLElement.offsetLeft</h4><p>The HTMLElement.offsetLeft read-only method returns the number of pixels that the upper left corner of the current element is offset to the left within the <code>HTMLElement.offsetParent</code> node.</p>
<p>For block-level elements, offsetTop, offsetLeft, offsetWidth, and offsetHeight describe the border box of an element relative to the offsetParent<code>(containing box)</code>.</p>
<p>没有 OffsetRight，offsetBottom</p>
<h4 id="HTMLElement-offsetHeight"><a href="#HTMLElement-offsetHeight" class="headerlink" title="HTMLElement.offsetHeight"></a>HTMLElement.offsetHeight</h4><p>The HTMLElement.offsetHeight read-only property is the height of the element including（包括） vertical padding and borders, in pixels, as an integer.  </p>
<p>Typically, an element’s offsetHeight is a measurement which includes the element borders, the element vertical padding,<br>the element horizontal scrollbar (if present, if rendered) and the element CSS height.  (如果有滚动条，包括滚动条)</p>
<p>许多文章已经介绍了clientHeight和offsetHeight的区别，就是<code>clientHeight</code>的值不包括 scrollbar 的高度，而 <code>offsetHeight</code> 的值包括了scrollbar的高度。</p>
<p>判定一个元素的尺寸和位置最简单的方法是调用它的 <code>getBoundingClientRect()</code> 方法。该方法是在 <code>IE5</code> 中引入的，而现在当前的所有浏览器都实现了。 </p>
<p>在很多浏览器(和W3C标准)中， getBoundingClientRect() 返回的对象还包含width 和 height属性，但是在原始的IE中未实现。为了简便起见，可以这样计算元素的 width 和 height:</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> <span class="built_in">box</span> = e.getBoundingClientRect();</div><div class="line"><span class="built_in">var</span> w = <span class="built_in">box</span>.<span class="built_in">width</span> || (<span class="built_in">box</span>.right - <span class="built_in">box</span>.left);</div><div class="line"><span class="built_in">var</span> h = <span class="built_in">box</span>.<span class="built_in">height</span> || (<span class="built_in">box</span>.bottom - <span class="built_in">box</span>.top);</div></pre></td></tr></table></figure>
<p>除了这些名字以 <code>offset</code> 开头的属性以外，所有的文档元素定义了同时其他两组属性，其名称一组以 <code>client</code> 开头，另一组以 <code>scroll</code> 开头。即，每个HTML元素都有以下这些属性:</p>
<pre><code>offsetWidth offsetHeight offsetLeft offsetTop offsetParent    // = css.height + border*2 + padding，不受滚动条影响 

clientWidth clientHeight clientLeft clientTop \                
                                                 —— &gt; 不滚动时(但可包括滚动条)数值一样; 滚动时，scroll 包括 全部高度，而 client 只含可见高度
scrollWidth scrollHeight scrollLeft scrollTop /
</code></pre><blockquote>
<p>为了理解这些 client 和 scroll 属性，你需要知道HTML元素的实际内容有可能比分配用来容纳内容的盒子更大，因此单个元素可能有海动条.</p>
</blockquote>
<p>内容区域是视口，就像浏览器的窗口，当实际内容比视口更大时，需要把元素的滚动条位置考虑进去。</p>
<p>clientWidth 和 clientHeight 类似 offsetWidth 和 offsetHeight. 不同的是它们不包含<code>边框</code>大小，只包含内容和它的内边距。同时，如果浏览器在内边距和边框之间添加了滚动条. clientWidth 和 clientHeight 在其返回值中也不包含滚动条。</p>
<p><strong> <code>code</code>和<code>span</code>这些内联元素. clientWidth 和 clientHeight 总是返回0。</strong><br>font-size: px<br>字体用像素设定</p>
<p>其他元素与浮动元素相邻，这些元素的外边距不会与浮动元素的外边距合并。即3+2 = 5，而不是3 + 2 = 3。</p>
<p><img src="codesnip_20150110204724.jpg" alt="格式计算图"></p>
<h4 id="图片定位的百分数用法："><a href="#图片定位的百分数用法：" class="headerlink" title="图片定位的百分数用法："></a>图片定位的百分数用法：</h4><p>图片的(99.9%,99%) 这个点与.container(所在容器)的(99.9%，99%)这个点对齐。<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">background</span>-<span class="built_in">position</span>: <span class="number">99.9</span>% <span class="number">99</span>%;</div></pre></td></tr></table></figure></p>
<p>这样在使图片紧紧靠右，紧紧靠下就很简单。就使图片的（100%，100%）对准容器的（100%，100%）就可以了。</p>
<h4 id="选择器规则"><a href="#选择器规则" class="headerlink" title="选择器规则"></a>选择器规则</h4><p>浏览器解析 CSS 选择器是从右往左的。这意味着，如果它看到一个如“<code>nav ul li a</code> 的规则时，它首先必须获得所有匹配 a 的元素列表，然后检查看它是不是li 的后代，再按相同规则继续检查。后代选择器虽然看起来方便，但它的性能开销是最大的。</p>
<h2 id="盒"><a href="#盒" class="headerlink" title="盒"></a>盒</h2><p>这里的盒是个多元的概念,其中相关的有：</p>
<ul>
<li>block level boxes </li>
<li>containing block</li>
<li>block formatting context(BFC)</li>
</ul>
<p>想想浏览器怎么把一个元素”画”出来，至少要知道定位和尺寸。<strong>定位有三种 normal flow, floats 和 absolute</strong>，无论属于哪种首先要找所在的containing block(翻译为包含块)，相当于一个大箱子里摆很多小盒子，小盒子怎么摆取决于大箱子。</p>
<p>怎么确定一个元素的containing block，由position属性确定：</p>
<ol>
<li>static(默认的)/relative：简单说就是它的父元素的内容框（即去掉padding的部分）</li>
<li>absolute: 向上找最近的定位为absolute/relative的元素</li>
<li>fixed: 它的containing block一律为根元素(html/body)，根元素也是initial containing block</li>
</ol>
<p><code>block formatting context(块级格式化上下文)</code>是一种<strong>布局特性</strong>，还是往箱子里放东西，bfc可以理解为打了<strong>隔板</strong>把一组小盒子分离开。</p>
<p><code>block-level box</code>一定会产生’block formatting context’是错误的，block-level box须通过设置如overflow不为visible(IE6/7无效，可以设zoom)、float不为none等等来创建block formatting context。</p>
<p>触发了bfc的block level box，没有<strong>margin callapse</strong>的问题，并且边缘不会和<code>float</code>的box的边缘重叠，利用它可以清浮动。</p>
<blockquote>
<p>页面上任何一个元素都可以看成 box ,可分为 </p>
<ul>
<li>block-level(块级)，如  ‘block’, ‘list-item’, and ‘table’.</li>
<li>inline-level(行内)<br>和匿名的。</li>
</ul>
</blockquote>
<h3 id="关于行内框和行框的概念"><a href="#关于行内框和行框的概念" class="headerlink" title="关于行内框和行框的概念"></a>关于行内框和行框的概念</h3><p>文本行中的每个元素都会生成一个内容区。这个内容区则会生成一个行内框（inline box），当一行中的所有内容均已生成了行内框，那么接下来在行框的构造中就会考虑这些行内框，行框要包含住最高行内框的顶端和最低行内框的底端。</p>
<h2 id="元素居中"><a href="#元素居中" class="headerlink" title="元素居中"></a>元素居中</h2><p>元素居中分为固定宽度和非固定宽度</p>
<p>对于固定宽度:<br>    设定居中元素 margin: xxpx auto; // 同理适用于垂直居中</p>
<p>对于非固定宽度元素:<br>    在父元素上设定 text-align: center;<br>    在目标元素上设定  display: inline-block;</p>
<h2 id="脱离文档流"><a href="#脱离文档流" class="headerlink" title="脱离文档流"></a>脱离文档流</h2><p>也就是将元素从普通的布局排版中拿走，其他盒子在定位的时候，会当做脱离文档流的元素不存在而进行定位。需要注意的是，使用float脱离文档流时，其他盒子会无视这个元素，但其他盒子内的文本依然会为这个元素让出位置，环绕在周围。而对于使用absolute positioning脱离文档流的元素，其他盒子与其他盒子内的文本都会无视它。</p>

	
	</div>
  <a type="button" href="/2014/04/10/2014-04-10-cssInNote/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-04-02 </div>
			<div class="article-title"><a href="/2014/04/02/2014-04-02-如何在Array.forEach的循环里break/" >如何在Array.forEach的循环里break</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>前段时间团队里讨论了一个问题，如何在forEach里实现<code>break</code>，目前有几种方案</p>
<h2 id="throw法"><a href="#throw法" class="headerlink" title="throw法"></a>throw法</h2><p>抛出一个错误，但是需要注意的是要抛出一个可以与别的错误区别开的错误，这样不会干扰别的代码抛出的错误</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> BreakException = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(v); <span class="comment">//只输出1,2</span></div><div class="line">        <span class="keyword">if</span> (v === <span class="number">2</span>) <span class="keyword">throw</span> BreakException;</div><div class="line">    &#125;);</div><div class="line">&#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">    <span class="keyword">if</span> (e !== BreakException) <span class="keyword">throw</span> e;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>此法有点丑陋，加了不少代码</p>
<h2 id="空跑循环"><a href="#空跑循环" class="headerlink" title="空跑循环"></a>空跑循环</h2><p>在外层加一个标识，如果此标识为true，接下来的循环空跑，码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> breakFlag = <span class="literal">false</span>;</div><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (breakFlag === <span class="literal">true</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (v === <span class="number">2</span>) &#123;</div><div class="line">        breakFlag = <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">console</span>.log(v) <span class="comment">//只输出1,2</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>这个在外层加了一个变量，为了不污染外层的环境，我们可以使用forEach的第二个参数context，把标识放在这里</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.breakFlag === <span class="literal">true</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (v === <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">this</span>.breakFlag = <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(v) <span class="comment">//只输出1,2</span></div><div class="line">&#125;, &#123;&#125;);</div></pre></td></tr></table></figure>
<p>这种方法不可避免的导致了不必要的运行,有点浪费cpu的感觉</p>
<h2 id="神奇改数组大法"><a href="#神奇改数组大法" class="headerlink" title="神奇改数组大法"></a>神奇改数组大法</h2><p>下面出场的这位选手，稍微有点技术含量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">array.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (item === <span class="number">2</span>) &#123;</div><div class="line">        array = array.concat(array.splice(index, array.length - index));</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(item); <span class="comment">//只输出1,2</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这种方法相当于改变了array，不知道大伙看出来了没有</p>
<h2 id="最应该使用的every"><a href="#最应该使用的every" class="headerlink" title="最应该使用的every"></a>最应该使用的every</h2><p>前面啰嗦了这么多，真正的主角登场，最推荐的方式呢，就是这种需要<code>break</code>的场景下，直接使用<code>every</code>或者<code>some</code>吧</p>
<ul>
<li>every: 碰到<code>return false</code>的时候，循环中止</li>
<li>some: 碰到<code>return ture</code>的时候，循环中止</li>
</ul>
<p>两者的代码分别如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line">a.every(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, arry</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(item); <span class="comment">//返回1,2</span></div><div class="line">    <span class="keyword">if</span> (item === <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line">a.some(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, arry</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(item); <span class="comment">//返回1,2</span></div><div class="line">    <span class="keyword">if</span> (item === <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>当然如果你能使用forEach，却发现<code>every</code>没有，那么你可能需要<a href="https://github.com/es-shims/es5-shim" target="_blank" rel="external">es5-shim</a>，<code>forEach</code>、<code>every</code>、<code>some</code>都是属于<code>es5</code>规范下的，<a href="http://kangax.github.io/es5-compat-table/" target="_blank" rel="external">这里有一个兼容列表</a></p>
<h2 id="部分参考"><a href="#部分参考" class="headerlink" title="部分参考"></a>部分参考</h2><ul>
<li><a href="http://stackoverflow.com/questions/2641347/how-to-short-circuit-array-foreach-like-calling-break" target="_blank" rel="external">http://stackoverflow.com/questions/2641347/how-to-short-circuit-array-foreach-like-calling-break</a></li>
<li><a href="http://old.doctyper.com/archives/200807/breaking-out-of-a-foreach-loop/" target="_blank" rel="external">http://old.doctyper.com/archives/200807/breaking-out-of-a-foreach-loop/</a></li>
<li><a href="https://coderwall.com/p/_ggh2w" target="_blank" rel="external">https://coderwall.com/p/_ggh2w</a></li>
<li><a href="http://www.jsnoob.com/2013/11/26/how-to-break-the-foreach/" target="_blank" rel="external">http://www.jsnoob.com/2013/11/26/how-to-break-the-foreach/</a></li>
<li><a href="http://stackoverflow.com/questions/6260756/how-to-stop-javascript-foreach" target="_blank" rel="external">http://stackoverflow.com/questions/6260756/how-to-stop-javascript-foreach</a></li>
</ul>

	
	</div>
  <a type="button" href="/2014/04/02/2014-04-02-如何在Array.forEach的循环里break/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-03-22 </div>
			<div class="article-title"><a href="/2014/03/22/2014-03-22-DOM精粹/" >DOM精粹</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<blockquote>
<p>The DOM originally was an application programming interface for XML documents that has been extended for use in HTML documents.</p>
</blockquote>
<h2 id="节点类型"><a href="#节点类型" class="headerlink" title="节点类型"></a>节点类型</h2><p>常见常用的 DOM 节点类型</p>
<ul>
<li><p>DOCUMENT_NODE (e.g., window.document)</p>
</li>
<li><p>ELEMENT_NODE (e.g., body, a, p, script, style, html, h1)</p>
</li>
<li><p>ATTRIBUTE_NODE (e.g., class=”funEdges”)</p>
</li>
<li><p>TEXT_NODE (e.g., text characters in an HTML document including carriage returns<br>and whitespace)</p>
</li>
<li><p>DOCUMENT_FRAGMENT_NODE (e.g., document.createDocumentFragment())</p>
</li>
<li><p>DOCUMENT_TYPE_NODE (e.g., &lt;!DOCTYPE html&gt;)</p>
</li>
</ul>
<p>类型的数值表示:</p>
<ol>
<li>ELEMENT_NODE = 1</li>
<li>ATTRIBUTE_NODE = 2</li>
<li>TEXT_NODE = 3</li>
<li>CDATA_SECTION_NODE = 4</li>
<li>ENTITY_REFERENCE_NODE = 5</li>
<li>ENTITY_NODE = 6</li>
<li>PROCESSING_INSTRUCTION_NODE = 7</li>
<li>COMMENT_NODE = 8</li>
<li>DOCUMENT_NODE = 9</li>
<li>DOCUMENT_TYPE_NODE = 10</li>
<li>DOCUMENT_FRAGMENT_NODE = 11</li>
<li><p>NOTATION_NODE = 12</p>
</li>
<li><p>DOCUMENT_POSITION_DISCONNECTED = 1</p>
</li>
<li>DOCUMENT_POSITION_PRECEDING = 2</li>
<li>DOCUMENT_POSITION_FOLLOWING = 4</li>
<li>DOCUMENT_POSITION_CONTAINS = 8</li>
<li>DOCUMENT_POSITION_CONTAINED_BY = 16</li>
<li>DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 32</li>
</ol>

	
	</div>
  <a type="button" href="/2014/03/22/2014-03-22-DOM精粹/#more" class="btn btn-default more">阅读此文</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/8/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/10/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			 

		
			
	<div class="widget">
		<h4>分类</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/bom/">bom<span>1</span></a></li>
		
			<li><a href="/categories/css/code/">code<span>1</span></a></li>
		
			<li><a href="/categories/collection/">collection<span>1</span></a></li>
		
			<li><a href="/categories/css/">css<span>2</span></a></li>
		
			<li><a href="/categories/tools/debug/">debug<span>1</span></a></li>
		
			<li><a href="/categories/default/">default<span>1</span></a></li>
		
			<li><a href="/categories/http/">http<span>1</span></a></li>
		
			<li><a href="/categories/javascript-template/">javascript template<span>1</span></a></li>
		
			<li><a href="/categories/javascript-test/">javascript test<span>1</span></a></li>
		
			<li><a href="/categories/jquery/">jquery<span>1</span></a></li>
		
			<li><a href="/categories/js/">js<span>1</span></a></li>
		
			<li><a href="/categories/library/">library<span>2</span></a></li>
		
			<li><a href="/categories/note/">note<span>1</span></a></li>
		
			<li><a href="/categories/note-vim/">note vim<span>2</span></a></li>
		
			<li><a href="/categories/tool/">tool<span>3</span></a></li>
		
			<li><a href="/categories/tools/">tools<span>1</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/w3c/">w3c<span>1</span></a></li>
		
			<li><a href="/tags/git/">git<span>4</span></a></li>
		
			<li><a href="/tags/mac/">mac<span>1</span></a></li>
		
			<li><a href="/tags/webcomponent-framework/">webcomponent,framework<span>1</span></a></li>
		
			<li><a href="/tags/design-pattern/">design pattern<span>1</span></a></li>
		
			<li><a href="/tags/build/">build<span>1</span></a></li>
		
			<li><a href="/tags/database-linux/">database linux<span>1</span></a></li>
		
			<li><a href="/tags/javascript-test/">javascript test<span>1</span></a></li>
		
			<li><a href="/tags/http/">http<span>2</span></a></li>
		
			<li><a href="/tags/webponent/">webponent<span>1</span></a></li>
		
			<li><a href="/tags/linux/">linux<span>5</span></a></li>
		
			<li><a href="/tags/seajs/">seajs<span>1</span></a></li>
		
			<li><a href="/tags/code/">code<span>2</span></a></li>
		
			<li><a href="/tags/framework/">framework<span>1</span></a></li>
		
			<li><a href="/tags/html5/">html5<span>1</span></a></li>
		
			<li><a href="/tags/Genymotion/">Genymotion<span>1</span></a></li>
		
			<li><a href="/tags/hg/">hg<span>1</span></a></li>
		
			<li><a href="/tags/javascript-regexp/">javascript regexp<span>1</span></a></li>
		
			<li><a href="/tags/test/">test<span>3</span></a></li>
		
			<li><a href="/tags/javascript/">javascript<span>9</span></a></li>
		
		
		   <li><a href="/tags">...<span>41</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2017/04/23/css书写规范/" ><i class="fa fa-file-o"></i>css 编写习惯</a>
      </li>
    
      <li>
        <a href="/2017/04/23/消除函数的术语歧义/" ><i class="fa fa-file-o"></i>消除函数的术语歧义</a>
      </li>
    
      <li>
        <a href="/2017/04/23/脚本的第一行/" ><i class="fa fa-file-o"></i>脚本语言的第一行</a>
      </li>
    
      <li>
        <a href="/2017/04/23/设计模式简介/" ><i class="fa fa-file-o"></i>设计模式简介</a>
      </li>
    
      <li>
        <a href="/2017/04/23/2013-11-09-requirejs/" ><i class="fa fa-file-o"></i></a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/chenyakun" title="My Github repository." target="_blank"]);">My Github</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2017 yakun.cyk
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<!-- <script src="/js/search.js"></script>  -->

<!-- 
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>
 -->

<!-- 
   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>
 -->

<div class="cb-search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px;
        opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">

    <input type="text" class="cb-search-content" id="cb-search-content" style="position: fixed; top: 60px" placeholder="文章标题 日期 标签" />

    <div style="position: fixed; top: 16px; right: 16px;">
        <img src="/search/img/cb-close.png"  id="cb-close-btn"/>
    </div>
</div>

<!-- <div style="position: fixed; right: 16px; bottom: 20px;">
    <img src="/search/img/cb-search.png"  id="cb-search-btn"  title="双击ctrl试一下"/>
</div> -->

<link rel="stylesheet" href="/search/css/cb-search.css">
<script src="/search/js/bootstrap3-typeahead.min.js"></script>
<script src="/search/js/cb-search.js"></script>

</body>
   </html>
