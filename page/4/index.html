<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 4 页 | output stream</title>
  <meta name="author" content="yakun.cyk">
  
  <meta name="description" content="主要内容可能关于 web 技术，感慨心得...">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="output stream"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	    <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
	  <a class="navbar-brand" href="/">output stream</a>
      <div class="collapse navbar-collapse nav-menu">
		    <ul class="nav navbar-nav">
    		  
    		  <li>
    			 <a href="/demos" title="Demos.">
            <i class="fa fa-flask"></i>Demos
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/archives" title="All the articles.">
            <i class="fa fa-archive"></i>归档
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/about" title="About me.">
            <i class="fa fa-user"></i>关于我
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/#" title="Search Posts.">
            <i class="fa fa-search"></i>搜索
    			 </a>
    		  </li>
    		  
    		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <!--
        <i class="fa fa-heart"></i> 
      -->
      
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2013-12-29-利用git快速部署远程服务器/" >使用git部署远程服务器</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>本地开发完成后，通常会在服务器上部署，坦白的说我见过并且用过 <code>vnc + winscp + hg pull/update</code> 方式, 可悲的是需要在四台服务器上全部执行一遍.</p>
<p>后来采用 ssh + pull, 但并是仍然比较繁琐. 上面的问题可以通过<code>ssh</code>直接远程执行命令来解决，但是需要写一些<code>shell</code>脚本…</p>
<p>在学习 git 时候,发现了 git 具有 ‘hook’机制, 使用版本版本管理工具的<code>hook</code>!  其实其他版本工具,如 <code>svn</code>、<code>git</code>、<code>hg</code>都是有相应的<code>hook</code>的， 原理大同小异。下面是Git详细的思路。</p>
<h2 id="Git-Hook"><a href="#Git-Hook" class="headerlink" title="Git Hook"></a>Git Hook</h2><p>和其他版本控制系统一样，在某些关键节点，Git 可以调用自定义脚本。分为两组挂钩：客户端和服务器端。客户端挂钩用于客户端的操作，如提交和合并。服务器端挂钩用于 Git 服务器端的操作，如接收被推送的提交。可以随意地使用这些挂钩。</p>
<h2 id="安装一个挂钩"><a href="#安装一个挂钩" class="headerlink" title="安装一个挂钩"></a>安装一个挂钩</h2><p>挂钩都被存储在 Git 目录下的 hooks 子目录中，即大部分项目中的 .git/hooks。 Git 默认会放置一些脚本样本在这个目录中，除了可以作为挂钩使用，这些样本本身是可以独立使用的。所有的样本都是 shell 脚本，不过，任何正确命名的可执行脚本都可以正常使用 — 可以用Ruby或Python，或其他。这些样本名都是以 .sample 结尾，因此，你必须重新命名。</p>
<p>把一个正确命名且可执行的文件放入 Git 目录下的hooks子目录中，可以激活该挂钩脚本，因此，之后他一直会被 Git 调用。随后会讲解主要的挂钩脚本。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.git/hooks \</div><div class="line">			├──	<span class="keyword">update</span> # 更新时执行</div><div class="line">			├──	commit-msg # 提交</div><div class="line">			├──	applypatch-msg.<span class="keyword">sample</span> # 带有<span class="keyword">sample</span>缀,不执行</div><div class="line">			├──	<span class="keyword">post</span>-<span class="keyword">update</span>.<span class="keyword">sample</span></div><div class="line">		  ...</div></pre></td></tr></table></figure>
<h2 id="服务器端操作"><a href="#服务器端操作" class="headerlink" title="服务器端操作"></a>服务器端操作</h2><p>首先创建一个裸库(empty Git repository)，为什么是裸库？因为这个库不是真正用来修改的，我们也不允许在服务器上修改代码，我们只是把它当作一个代码中转的地方</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> gitroot</div><div class="line"><span class="built_in">mkdir</span> projectname</div><div class="line"><span class="built_in">cd</span> projectname</div><div class="line">git init --bare</div></pre></td></tr></table></figure>
<p>可以看到它的目录结构与普通版本库存在差异：把原本在 .git 文件夹的内容移到了根目录，去掉了 .git 文件夹。</p>
<p>添加我们的 <code>hook</code></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> /hooks</div><div class="line">touch <span class="keyword">post</span>-receive</div></pre></td></tr></table></figure>
<p>编辑<code>post-receive</code>的内容为下面的，其中<code>sites/projectname</code>，是我们存放代码地方</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">env -i git archive <span class="keyword">master</span> <span class="title">| tar</span> -x -C /sites/projectname </div><div class="line">echo <span class="string">"远程更新完毕"</span></div></pre></td></tr></table></figure>
<h2 id="本地git的操作"><a href="#本地git的操作" class="headerlink" title="本地git的操作"></a>本地git的操作</h2><p>本地我们只需要添加一个远程库，在需要部署的时候 <code>push</code> 到远程库就行了,下面我们添加了一个名为<code>publish</code>的远程库</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git remote add publish username@xx<span class="selector-class">.xx</span><span class="selector-class">.xx</span><span class="selector-class">.xx</span>:/home/gitroot/projectname</div><div class="line">git push publish master</div></pre></td></tr></table></figure>
<h2 id="可以强化的地方"><a href="#可以强化的地方" class="headerlink" title="可以强化的地方"></a>可以强化的地方</h2><p>还可以添加静态资源版本更新,服务器重启,代码编译等等</p>

	
	</div>
  <a type="button" href="/2017/02/01/2013-12-29-利用git快速部署远程服务器/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2012-08-03-linux同步标准时间/" >linux同步标准时间</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ntpdate  ph.pool.ntp.org</div></pre></td></tr></table></figure>
<p><a href="http://www.pool.ntp.org/zone/asia" title="地址" target="_blank" rel="external">亚洲ntp server</a></p>

	
	</div>
  <a type="button" href="/2017/02/01/2012-08-03-linux同步标准时间/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-08-20-正则速查表/" >正则速查表</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="常用的元字符"><a href="#常用的元字符" class="headerlink" title="常用的元字符"></a>常用的元字符</h2><table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结束</td>
</tr>
</tbody>
</table>
<h2 id="常用的限定符"><a href="#常用的限定符" class="headerlink" title="常用的限定符"></a>常用的限定符</h2><table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
</tbody>
</table>
<h2 id="常用的反义代码"><a href="#常用的反义代码" class="headerlink" title="常用的反义代码"></a>常用的反义代码</h2><table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\W</td>
<td>匹配任意不是字母，数字，下划线，汉字的字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符的字符</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词开头或结束的位置</td>
</tr>
<tr>
<td>[^x]</td>
<td>匹配除了x以外的任意字符</td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
</tr>
</tbody>
</table>
<h2 id="常用分组语法"><a href="#常用分组语法" class="headerlink" title="常用分组语法"></a>常用分组语法</h2><table>
<thead>
<tr>
<th>分类</th>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>捕获</td>
<td>(exp)</td>
<td>匹配exp,并捕获文本到自动命名的组里</td>
</tr>
<tr>
<td>捕获</td>
<td>(?<name>exp)</name></td>
<td>匹配exp,并捕获文本到名称为name的组里，也可以写成(?’name’exp)</td>
</tr>
<tr>
<td>捕获</td>
<td>(?:exp)</td>
<td>匹配exp,不捕获匹配的文本，也不给此分组分配组号</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?=exp)</td>
<td>匹配exp前面的位置</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?&lt;=exp)</td>
<td>匹配exp后面的位置</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?!exp)</td>
<td>匹配后面跟的不是exp的位置</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?&lt;!exp)</td>
<td>匹配前面不是exp的位置</td>
</tr>
<tr>
<td>注释</td>
<td>(?#comment)</td>
<td>这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读</td>
</tr>
</tbody>
</table>

	
	</div>
  <a type="button" href="/2017/02/01/2014-08-20-正则速查表/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-08-10-探究 html5/" >探究 html5</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>##classList<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">div.classList.remove(<span class="string">"className"</span>);</div><div class="line">div.classList.add(<span class="string">"className"</span>);</div><div class="line"></div><div class="line"><span class="comment">/*toggle会切换状态*/</span></div><div class="line">div.classList.toggle(<span class="string">""</span>);</div><div class="line">div.classList.</div></pre></td></tr></table></figure></p>
<p>##canvas</p>
<p>##contenteditable<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tag</span> <span class="attr">contenteditable</span> &gt;</span><span class="tag">&lt;/<span class="name">tag</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tag</span> <span class="attr">contenteditable</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">tag</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>##db.transaction<br>transaction 事务性,同进同退</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> db = openDatabase(<span class="string">'foo'</span>, <span class="string">'1.0'</span>, <span class="string">'foo'</span>, <span class="number">2</span> * <span class="number">1024</span>);</div><div class="line">db.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;  </div><div class="line">  tx.executeSql(<span class="string">'CREATE TABLE IF NOT EXISTS foo (id unique, text)'</span>);</div><div class="line">  <span class="comment">// 如果下面这条失败,上面的也会回退</span></div><div class="line">  tx.executeSql(<span class="string">'INSERT INTO foo (id, text) VALUES (1, "foobar")'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<hr>
<p>##dataset<br>超级好的 dataset 属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">data-id</span>=<span class="string">"123456"</span> <span class="attr">data-user</span>=<span class="string">"cyk"</span>&gt;</span></div><div class="line">  dataset demo.</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">var</span> el = <span class="built_in">document</span>.querySelector(<span class="string">"#user"</span>);</div><div class="line">	<span class="built_in">console</span>.log(el.id);</div><div class="line">	<span class="built_in">console</span>.log(el.dataset.id);</div><div class="line">	<span class="built_in">console</span>.log(el.dataset.user);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<h2 id="drag-drop-amp-DataTansfer"><a href="#drag-drop-amp-DataTansfer" class="headerlink" title="drag/drop &amp; DataTansfer"></a>drag/drop &amp; DataTansfer</h2><p><em>DataTransfer</em>对象是用于承载drag和drop操作过程的数据的.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> addEvent(el, <span class="string">'dragstart'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> 	  <span class="comment">// only dropEffect='copy' will be dropable </span></div><div class="line">    e.dataTransfer.effectAllowed = <span class="string">'copyMove'</span>; </div><div class="line">    <span class="comment">// required otherwise doesn't work</span></div><div class="line">    e.dataTransfer.setData(<span class="string">'Text'</span>, <span class="keyword">this</span>.id); </div><div class="line">  &#125;);</div><div class="line"></div><div class="line">addEvent(bin, <span class="string">'dragover'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (e.preventDefault) e.preventDefault(); <span class="comment">// allows us to drop</span></div><div class="line">  <span class="keyword">this</span>.className = <span class="string">'over'</span>;</div><div class="line">  e.dataTransfer.dropEffect = <span class="string">'copy'</span>;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2017/02/01/2014-08-10-探究 html5/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-08-10-javascript启示录书摘/" >javascript启示录书摘</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="JavaScript-对象"><a href="#JavaScript-对象" class="headerlink" title="JavaScript 对象"></a>JavaScript 对象</h2><h3 id="JavaScript-构造函数"><a href="#JavaScript-构造函数" class="headerlink" title="JavaScript 构造函数"></a>JavaScript 构造函数</h3><p>如果使用 new 调用某函数，该函数则担任一个特殊的角色，将函数的 this 值设置为正在构建的新对象。并且构造函数还默认返回这个新构建的对象（即 this）。这个返回的新对象认为是构建该对象的构造函数的实例。</p>
<h3 id="typeof-操作符"><a href="#typeof-操作符" class="headerlink" title="typeof 操作符"></a>typeof 操作符</h3><p>typeof 操作符用于返回正在使用值的类型。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myNull = <span class="literal">null</span>;         <span class="comment">// typeof myNull : object</span></div><div class="line"><span class="keyword">var</span> myUndefined = <span class="literal">null</span>;    <span class="comment">// undefined</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">'str'</span>;           <span class="comment">// string</span></div><div class="line"><span class="keyword">var</span> str = <span class="built_in">String</span>(<span class="string">'str'</span>);   <span class="comment">// string, 没有 new，不会返回对象</span></div><div class="line"><span class="keyword">var</span> num = <span class="number">1</span>;               <span class="comment">// number</span></div><div class="line"><span class="keyword">var</span> num = <span class="built_in">Number</span>(<span class="string">'1'</span>);     <span class="comment">// number</span></div><div class="line"><span class="keyword">var</span> bol = <span class="literal">true</span>;            <span class="comment">// boolean</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="string">'1'</span>); <span class="comment">// object, new</span></div><div class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'a'</span>); <span class="comment">// object, new</span></div></pre></td></tr></table></figure></p>
<h3 id="contructor属性"><a href="#contructor属性" class="headerlink" title="contructor属性"></a>contructor属性</h3><p>碰到用 new 操作符实例化出来的对象，typeof 就无能为力了。这时，可以用 constructor 属性。</p>
<table>
<thead>
<tr>
<th>obj</th>
<th>obj.constructor</th>
</tr>
</thead>
<tbody>
<tr>
<td>obj = new Number(‘21’);</td>
<td>Number</td>
</tr>
<tr>
<td>obj = 1;</td>
<td>Number</td>
</tr>
<tr>
<td>obj = new String(‘abc’);</td>
<td>String</td>
</tr>
<tr>
<td>obj = ‘abc’</td>
<td>String</td>
</tr>
<tr>
<td>obj = true;</td>
<td>Boolean</td>
</tr>
<tr>
<td>obj = new Object();</td>
<td>Object</td>
</tr>
<tr>
<td>obj = {};</td>
<td>Object</td>
</tr>
<tr>
<td>obj = new Array();</td>
<td>Array</td>
</tr>
<tr>
<td>obj = new Function();</td>
<td>Function</td>
</tr>
<tr>
<td>obj = function(){ }; //字面量方式</td>
<td>Function</td>
</tr>
</tbody>
</table>
<h3 id="instanceof-操作符"><a href="#instanceof-操作符" class="headerlink" title="instanceof 操作符"></a>instanceof 操作符</h3><p>instanceof 操作符可以验证指定对象是否是某个构造函数的实例。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">instanceObj <span class="keyword">instanceof</span> ConstructorFunction</div></pre></td></tr></table></figure></p>
<p>任何对象 instanceof Object 总是返回 true。</p>
<p><code>instanceof 只适用于 new 构造函数创建返回的复杂对象和实例</code></p>
<h2 id="对象与属性"><a href="#对象与属性" class="headerlink" title="对象与属性"></a>对象与属性</h2><h3 id="删除对象属性"><a href="#删除对象属性" class="headerlink" title="删除对象属性"></a>删除对象属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = &#123; <span class="attr">bar</span>: <span class="string">'bar'</span> &#125;;</div><div class="line"><span class="keyword">delete</span> foo.bar;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'bar'</span> <span class="keyword">in</span> foo); <span class="comment">// false,in 操作符不仅不仅能检查对象自身的属性而且能检查通过原型链继承过来的属性</span></div></pre></td></tr></table></figure>
<p>##head 对象</p>
<h3 id="什么是-head-对象"><a href="#什么是-head-对象" class="headerlink" title="什么是 head 对象"></a>什么是 head 对象</h3><p>JavaScript 代码本身必须包含在对象内部。比如，在 Web 浏览器环境中编写 JavaScript 代码时，JavaScript 被包含在 window 对象内，并在其内部执行。这个 window 对象被认为实 “head” 对象。</p>
<p>head 对象是由 JavaScript 在幕后创建，用于封装用户自定义代码，并容纳 JavaScript 预定义的原生代码。在编写 Javascript 代码时，它将被编写在 head 对象的上下文中。</p>
<h3 id="head-对象内的全局函数"><a href="#head-对象内的全局函数" class="headerlink" title="head 对象内的全局函数"></a>head 对象内的全局函数</h3><ul>
<li>decodeURL()</li>
<li>decodeURLComponent()</li>
<li>encodeURI()</li>
<li>encodeURIComponent()</li>
<li>eval()</li>
<li>isFinite()</li>
<li>isNaN()</li>
<li>parseFloat()</li>
<li>parseInt()</li>
</ul>

	
	</div>
  <a type="button" href="/2017/02/01/2014-08-10-javascript启示录书摘/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-06-10-jquery 与 AMD/" >jquery1.11.x 集成了 AMD</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>  AMD 加入到了 jQuery, jQuery 把源码切分成各个逻辑模块.</p>
<ol>
<li>ready 整合成依赖 Deferred 的模块.</li>
<li>有些模块被切分成一些更加利于维护的片段.</li>
<li>var 文件夹指定的模块只包含共享的变量声明.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"> global, factory </span>) </span>&#123;</div><div class="line">	</div><div class="line">    <span class="keyword">if</span>( <span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">"object"</span> &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">module</span>.exports === <span class="string">"object"</span> ) &#123;</div><div class="line">	</div><div class="line">        <span class="comment">// 对于CommonJS的和CommonJs的类似环境中, 如果存在一个适当的window,</span></div><div class="line">        <span class="comment">// 则执行global工厂方法,获取jQuery对象;</span></div><div class="line">        <span class="comment">// 在那些天生不拥有window,document的环境中,比如Node.js,</span></div><div class="line">        <span class="comment">// 弄了个jQuery做的factory伺候module.exports;</span></div><div class="line">        <span class="comment">// 这个突出了建立一个真正window的需求</span></div><div class="line">        <span class="comment">// e.g var jQuery = require("jquery")(window);</span></div><div class="line">	</div><div class="line">        <span class="built_in">module</span>.exports = global.document ? factory( global, <span class="literal">true</span>) : <span class="function"><span class="keyword">function</span>(<span class="params"> w </span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span>( !w.document )&#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">" jQuery requires a window with a document"</span> );</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> factory( w );</div><div class="line">        &#125;;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        factory( global );</div><div class="line">    &#125;</div><div class="line">	</div><div class="line">&#125;(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">"undefined"</span> ? <span class="built_in">window</span> : <span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> window, noGlobal </span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> jQuery = &#123;&#125;;</div><div class="line">    <span class="keyword">return</span> jQuery;</div><div class="line">&#125;));</div></pre></td></tr></table></figure></li>
</ol>

	
	</div>
  <a type="button" href="/2017/02/01/2014-06-10-jquery 与 AMD/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-06-17-正则在手,天下我有/" >正则在手,天下我有</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="jQuery-是个啥-jQuery是个javascript的封装库-jQuery-靠啥牛逼-靠正则"><a href="#jQuery-是个啥-jQuery是个javascript的封装库-jQuery-靠啥牛逼-靠正则" class="headerlink" title="jQuery 是个啥? jQuery是个javascript的封装库. jQuery 靠啥牛逼? 靠正则."></a>jQuery 是个啥? jQuery是个javascript的封装库. jQuery 靠啥牛逼? 靠正则.</h4><p>// 说明 这些正则里充斥了大量 (?:) 这货,<br>// 简单费磨叽句话: ()代表分组,就是多字符匹配,团结的像一个似的.<br>// 分组还有个作用:捕获. 就是说()匹配的内容, 会给个号码然后将其缓存起来, 后面的表达式语句能使用号码引用匹配到的文本(见号如见匹配文本)<br>// 像oracle里的 with</p>
<p>// 再说点题外话:关于行结束符<br>// mac:    r     回车<br>// unix:   n     换行<br>// window: rn   回车换行<br>// 换行符起源于机械打字机,当打字机的笔尖走到行末时,有两个动作,<br>// 回车,return到行首,接着n,换到下一行</p>
<p>// 三分组,外层为第一层分组, 因采用(?:) 匹配但不捕获,没有分组好, 所有最终拿到手的只有两组分组.<br>// 最外层分组匹配的是选择器selector,可为html标签,或id选择器.<br>// 分组1匹配标签名,标签内的字符串,不带左右尖括号.<br>// 分组2匹配id选择器名,不带#号.</p>
<p>var quickExpr = /^(?:<a href="#">^#\&lt;</a><em>(\&lt;<a href="#">wW</a>+>)<a href="#">^></a></em>$|#(<a href="#">w-</a>*)$)/ </p>
<p>// 匹配任意非空字符,空格,tab,回车等统统不匹配<br>var rnotwhite = /S/</p>
<p>// Used for trimming whitespace<br>// 匹配以空白符开始的行<br>var trimLeft = /^s+/<br>// 匹配以空白符结尾的行,阿里的笔试题就有这个<br>var trimRight = /s+$/</p>
<p>// Match a standalone tag<br>// w 匹配数字字母下划线<br>// 第二个分组匹配不捕获(它调用了第一组的捕获内容)没了分组号,最终只剩第一个分组号,用于匹配标签名<br>// 这货匹配一组单独标签,闭合单标签或闭合双标签<br>var rsingleTag = /^\&lt;(w+)s*/?>(?:\)?$/</p>
<p>// JSON RegExp</p>
<p>// 匹配任意多个  ],:和空格,干啥使得后面再说<br>var rvalidchars = /^<a href="#">],:s</a>*$/</p>
<p>//<br>var rvalidescape = /\(?:<a href="#">“\/bfnrt</a>|u<a href="#">0-9a-fA-F</a>4)/g</p>
<p>// 匹配JSON合理的取值<br>// “<a href="#">^”\nr</a><em>“ 匹配被双引号包着的字符 双引号抱着的内容不能有(双引号,换行符,回车符,转义符)<br>// 也匹配为 true或false或null的值<br>// -?d+(?:.d</em>)?(?:<a href="#">eE</a><a href="#">+-</a>?d+)<br>// 可匹配负值,可匹配带小数的,还匹配科学计数法<br>// 强大!<br>var rvalidtokens = /“<a href="#">^”\nr</a><em>“|true|false|null|-?d+(?:.d</em>)?(?:<a href="#">eE</a><a href="#">+-</a>?d+)?/g</p>
<p>// 匹配  [  或 , [ 或 :<a href="#"> </a><br>// (?:^|:|,) 这货差点让我看走眼 匹配三个 空或:或,<br>// ^ 匹配字符串的开始,紧接着就是或,所以它匹配空<br>// 这个表达式看起来像 json的左括号<br>var rvalidbraces = /(?:^|:|,)(?:s*[)+/g</p>
<p>// Useragent RegExp<br>// UserAgent 就是浏览器的洋名</p>
<p>// webkit/ab.c<br>var rwebkit = /(webkit)<a href="#"> /</a>(<a href="#">w.</a>+)/</p>
<p>var ropera = /(opera)(?:.*version)?<a href="#"> /</a>(<a href="#">w.</a>+)/,</p>
<p>var rmsie = /(msie) (<a href="#">w.</a>+)/,</p>
<p>// “Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:29.0) Gecko/20100101 Firefox/29.0”<br>var rmozilla = /(mozilla)(?:.*? rv:(<a href="#">w.</a>+))?/,</p>
<p>// Matches dashed string for camelizing<br>var rdashAlpha = /-(<a href="#">a-z</a>|<a href="#">0-9</a>)/ig</p>
<p>// 微软前缀<br>var rmsPrefix = /^-ms-/,</p>
<p>// 匹配大括号和中括号,中间内容不限<br>var rbrace = /^(?:{.<em>}|[.</em>])$/</p>
<p>var rmultiDash = /(<a href="#">A-Z</a>)/g</p>
<p>// 匹配换行,回车,制表符<br>var rclass = /<a href="#">ntr</a>/g</p>
<p>// 匹配空格<br>var rspace = /s+/</p>
<p>//匹配回车<br>var rreturn = /r/g,</p>
<p>var rtype = /^(?:button|input)$/i,</p>
<p>// 能被focus的, 即按tab可focus的,涨姿势了<br>var rfocusable = /^(?:button|input|object|select|textarea)$/i,</p>
<p>var rclickable = /^a(?:rea)?$/i,</p>
<p>// 取值为布尔值的<br>var rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,</p>
<p>// form元素<br>var rformElems = /^(?:textarea|input|select)$/i,</p>
<p>var rtypenamespace = /^(<a href="#">^.</a>*)?(?:.(.+))?$/</p>
<p>var rhoverHack = /bhover(.S+)?b/,</p>
<p>var rkeyEvent = /^key/,</p>
<p>// 点击事件 mouse或contextmenu再无前缀,click可有<br>var rmouseEvent = /^(?:mouse|contextmenu)|click/</p>
<p>var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,</p>
<p>var rquickIs = /^(w*)(?:#(<a href="#">w-</a>+))?(?:.(<a href="#">w-</a>+))?$/,</p>
<p>// 这里是sezzle中的核心,待续<br>// 大块儿头<br>var chunker = /((?:((?:(<a href="#">^()</a>+)|<a href="#">^()</a>+)+)|<a href="#">(?:[[^[]</a><em>]|<a href="#">‘“</a><a href="#">^’”</a></em><a href="#">‘“</a>|<a href="#">^[]’”</a>+)+]|\.|[^ >+,([\](#)+)+|<a href="#">>+</a>)(s<em>,s</em>)?((?:.|r|n)*)/g,</p>
<p>ID: /#((?:<a href="#">wu00c0-uFFFF-</a>|\.)+)/,</p>
<p>CLASS: /.((?:<a href="#">wu00c0-uFFFF-</a>|\.)+)/,<br>NAME: /[name=<a href="#">‘“</a><em>((?:<a href="#">wu00c0-uFFFF-</a>|\.)+)<a href="#">‘“</a></em>]/,<br>ATTR: /[s<em>((?:<a href="#">wu00c0-uFFFF-</a>|\.)+)s</em>(?:(S?=)s<em>(?:(<a href="#">‘“</a>)(.</em>?)3|(#?(?:<a href="#">wu00c0-uFFFF-</a>|\.)<em>)|)|)s</em>]/,<br>TAG: /^((?:<a href="#">wu00c0-uFFFF*-</a>|\.)+)/,<br>CHILD: /:(only|nth|last|first)-child(?:(s<em>(even|odd|(?:<a href="#">+-</a>?d+|(?:<a href="#">+-</a>?d</em>)?ns<em>(?:<a href="#">+-</a>s</em>d+)?))s<em>))?/,<br>POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:((d</em>)))?(?=<a href="#">^-</a>|$)/,<br>PSEUDO: /:((?:<a href="#">wu00c0-uFFFF-</a>|\.)+)(?:((<a href="#">‘“</a>?)((?:(<a href="#">^)</a>+)|<a href="#">^()</a>*)+)2))?/</p>
<p>var runtil = /Until$/</p>
<p>var rparentsprev = /^(?:parents|prevUntil|prevAll)/,</p>
<p>// Note: This RegExp should be improved, or likely pulled from Sizzle<br>var rmultiselector = /,/</p>
<p>var isSimple = /^.[^:#<a href="#">.,</a>*$/,</p>
<p>// h5标签全家福<br>var nodeNames = “abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|” +<br>“header|hgroup|mark|meter|nav|output|progress|section|summary|time|video”;     </p>
<p>// 匹配jQuery的”uuid”<br>var rinlinejQuery = / jQueryd+=”(?:d+|null)”/g</p>
<p>var rleadingWhitespace = /^s+/</p>
<p>// good: (?!exp)    匹配后面跟的不是exp的位置<br>var rxhtmlTag = /\&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)((<a href="#">w:</a>+)<a href="#">^></a>*)/>/ig</p>
<p>var rtagName = /\&lt;(<a href="#">w:</a>+)/<br>var rtbody = /\&lt;tbody/i<br>var rhtml = /\&lt;|&amp;#?w+;/ // \&lt; 或者 &nbsp; &#xxx;<br>var rnoInnerhtml = /\&lt;(?:script|style)/i</p>
<p>// html代码中不能含有这些标签,加入dom缓存<br>var rnocache = /\&lt;(?:script|object|embed|option|style)/i,       </p>
<p>// checked=”checked” or checked<br>var rchecked = /checkeds<em>(?:<a href="#">^=</a>|=s</em>.checked.)/i</p>
<p>var rscriptType = //(java|ecma)script/i<br>var rcleanScript = /^s*\&lt;!(?:[CDATA[|–)/</p>
<p>var var ralpha = /alpha(<a href="#">^)</a><em>)/i<br>var ropacity = /opacity=(<a href="#">^)</a></em>)/</p>
<p>// fixed for IE9, see #8346<br>var rupper = /(<a href="#">A-Z</a>|^ms)/g<br>var rnumpx = /^-?d+(?:px)?$/i</p>
<p>var rnum = /^-?d/,<br>var rrelNum = /^(<a href="#">-+</a>)=(<a href="#">-+.de</a>+)/,</p>
<p>// 编码后的空格<br>var r20 = /%20/g,<br>var rbracket = /[]$/,</p>
<p>// 表示 r,n 或 rn<br>var rCRLF = /r?n/g,</p>
<p>var rhash = /#.*$/,</p>
<p>// IE leaves an r character at EOL<br>var rheaders = /^(.<em>?):<a href="#"> t</a></em>(<a href="#">^rn</a>*)r?$/mg, </p>
<p>// 可输入的标签<br>var rinput = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i</p>
<p>// #7653, #8125, #8152: local protocol detection<br>// 访问本地资源时,浏览器地址栏可使用的schema<br>var rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/</p>
<p>var rnoContent = /^(?:GET|HEAD)$/</p>
<p>//匹配 //<br>var rprotocol = /^///<br>var rquery = /?/</p>
<p>// b代表单词的开头或结尾,也就是单词的分界处<br>var rscript = /\<scriptb[^\<](#)*(?:(?!\< script\="">)\&lt;<a href="#">^\&lt;</a><em>)</em>\/gi</scriptb[^\<](#)*(?:(?!\<></p>
<p>var rselectTextarea = /^(?:select|textarea)/i<br>var rspacesAjax = /s+/<br>var rts = /(<a href="#">?&amp;</a>)_=<a href="#">^&amp;</a><em>/<br>var rurl = /^(<a href="#">w+.-</a>+:)(?://(<a href="#">^/?#:</a></em>)(?(d+))?)?/</p>
<p>var rfxtypes = /^(?:toggle|show|hide)$/<br>var rfxnum = /^(<a href="#">+-</a>=)?(<a href="#">d+.-</a>+)(<a href="#">a-z%</a>*)$/i</p>
<p>var rtable = /^t(?:able|d|h)$/i<br>var rroot = /^(?:body|html)$/i;</p>

	
	</div>
  <a type="button" href="/2017/02/01/2014-06-17-正则在手,天下我有/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-08-10-transition&animation/" >CSS3 的 transition 和 animation</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>##transition<br>transition 属性是<br>transition-property,<br>transition-duration,<br>transition-timing-function,<br>transition-delay<br>的简称,用于设定一个元素的两个状态,不同的状态可以用伪类，比如:hover, :active 或者是通过 javascript 动态设定。IE10+支持。</p>
<p>所以 transition 的初始值为：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">transition-delay</span>: 0<span class="selector-tag">s</span>;</div><div class="line"><span class="selector-tag">transition-duration</span>: 0<span class="selector-tag">s</span>;</div><div class="line"><span class="selector-tag">transition-property</span>: <span class="selector-tag">all</span>;</div><div class="line"><span class="selector-tag">transition-timing-function</span>: <span class="selector-tag">ease</span>;</div></pre></td></tr></table></figure></p>
<p>###用法<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">  <span class="attribute">transition</span>: &lt;property&gt; &lt;duration&gt;    &lt;timing-function&gt; &lt;delay&gt;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>并且有事件可以监测 transition 结束<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">el.addEventListener(<span class="string">"transitionend"</span>,updateTransition,<span class="literal">true</span>);</div><div class="line"></div><div class="line"><span class="comment">//in webkit</span></div><div class="line">el.addEventListener(<span class="string">"webkitTransitionEnd"</span>,updateTransition,<span class="literal">true</span>);</div></pre></td></tr></table></figure></p>
<p>###实例<br>HTML<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--  DEMO 1: Fade Block --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"fade"</span>&gt;</span></div><div class="line">     move here  !</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"nudge"</span>&gt;</span></div><div class="line">    mouse on me </div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"bounce"</span>&gt;</span>Place mouse on  me i will bounce!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"spin"</span>&gt;</span>Place mouse on  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i won  me i will spin<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"accordion"</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#first"</span>&gt;</span>This is first tab<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"first"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum <span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#second"</span>&gt;</span>This is second tab<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"second"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum <span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	</div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#third"</span>&gt;</span>This is third tab<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"third"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum <span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>CSS<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">DEMO 1: Fade Block</div><div class="line">*/</div><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">    <span class="attribute">margin-bottom</span>: <span class="number">50px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="selector-id">#fade</span> &#123;</div><div class="line">    <span class="comment">/*opacity:1;</span></div><div class="line">    -webkit-transition: opacity 10s liner 10s;*/</div><div class="line">  <span class="attribute">position</span>: relative;</div><div class="line">  <span class="attribute">transition-property</span>: font-size;</div><div class="line">  <span class="attribute">transition-duration</span>: <span class="number">0.5s</span>;</div><div class="line">  <span class="attribute">transition-delay</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-id">#fade</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">36px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* DEMO2 */</span></div><div class="line"><span class="selector-id">#nudge</span>&#123;</div><div class="line">    </div><div class="line">    <span class="attribute">-webkit-transition-property</span>: color,</div><div class="line">        background-color,padding-left;</div><div class="line">    <span class="attribute">-webkit-transition-duration</span>: <span class="number">500ms</span>,<span class="number">500ms</span>, <span class="number">500ms</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-id">#nudge</span><span class="selector-pseudo">:hover</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#efefef</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">    <span class="attribute">padding-left</span>: <span class="number">50px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="selector-id">#bounce</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">-webkit-animation-name</span>:bounce;</div><div class="line">    <span class="attribute">-webkit-animation-duration</span>:<span class="number">1s</span>;</div><div class="line">    <span class="attribute">-webkit-animation-iteration-count</span>:<span class="number">2</span>;</div><div class="line">    <span class="attribute">-webkit-animation-direction</span>:alternate</div><div class="line">&#125;</div><div class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> bounce &#123;</div><div class="line">    <span class="selector-tag">from</span>&#123;<span class="attribute">margin-left</span>:<span class="number">0</span>;&#125;</div><div class="line">    <span class="selector-tag">to</span>&#123;<span class="attribute">margin-left</span>:<span class="number">250px</span>;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="selector-id">#spin</span>&#123;</div><div class="line">    <span class="attribute">-webkit-transition</span>: -webkit-transform <span class="number">10s</span> ease-in;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-id">#spin</span><span class="selector-pseudo">:hover</span>&#123;</div><div class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(36000deg);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="selector-class">.accordion</span> <span class="selector-tag">a</span>&#123;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">padding</span>:<span class="number">5px</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">background-color</span>:<span class="number">#ccc</span>;</div><div class="line">    <span class="attribute">color</span>:<span class="number">#000</span>;</div><div class="line">    </div><div class="line">    <span class="comment">/*可以去掉链接的下划线等修饰效果*/</span></div><div class="line">    <span class="attribute">text-decoration</span>:none;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"><span class="selector-class">.accordion</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>:<span class="number">#999</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.accordion</span> <span class="selector-tag">div</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>:<span class="number">#cda</span>;</div><div class="line">    <span class="attribute">color</span>:<span class="number">#222</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.accordion</span> <span class="selector-tag">div</span> <span class="selector-tag">p</span>&#123;</div><div class="line">    <span class="attribute">padding</span>:<span class="number">20px</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="selector-id">#accordion</span> <span class="selector-tag">div</span>&#123;</div><div class="line">    <span class="comment">/*先隐藏起来*/</span></div><div class="line">    <span class="attribute">height</span>:<span class="number">0</span>;</div><div class="line">    <span class="attribute">overflow</span>:hidden;</div><div class="line">    </div><div class="line">    <span class="attribute">-webkit-transition</span>:height <span class="number">600ms</span> ease;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-id">#accordion</span> <span class="selector-tag">div</span><span class="selector-pseudo">:target</span>&#123;</div><div class="line">    <span class="attribute">height</span>:<span class="number">110px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>##animation<br>animation 属性是如下这些属性的简写<br>animation-name: none<br>animation-duration: 0s<br>animation-timing-function: ease<br>animation-delay: 0s<br>animation-iteration-count: 1<br>animation-direction: normal<br>animation-fill-mode: none</p>
<p>###用法<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">animation</span>:</div><div class="line">	<span class="selector-tag">animation-name</span></div><div class="line">    <span class="selector-tag">time</span>(<span class="selector-tag">duration</span>)</div><div class="line">    <span class="selector-tag">timing-function</span></div><div class="line">    <span class="selector-tag">time</span>(<span class="selector-tag">delay</span>)</div><div class="line">    <span class="selector-tag">animation-iteration-count</span>( 结束之前的循环次数)</div><div class="line">    <span class="selector-tag">single-animation-direction</span> </div><div class="line">    <span class="comment">/*&#123;</span></div><div class="line">    	animation-direction: normal (每次从正方向开始)</div><div class="line">		animation-direction: reverse （每次从反方向开始）</div><div class="line">		animation-direction: alternate （正反往复）</div><div class="line">    &#125;*/</div><div class="line">    <span class="selector-tag">single-animation-fill-mode</span></div></pre></td></tr></table></figure></p>
<p>###实例<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"view_port"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"polling_message"</span>&gt;</span></div><div class="line">        Listener for dispatches     </div><div class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cylon_eye"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.polling_message</span> &#123;</div><div class="line">    <span class="attribute">color</span>: white;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">margin-right</span>:<span class="number">2%</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.view_port</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: black;</div><div class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</div><div class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.cylon_eye</span> &#123;</div><div class="line">    <span class="attribute">color</span>: white;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</div><div class="line">    <span class="attribute">background-color</span>: red;</div><div class="line">    </div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, rgba(0, 0, 0, 0.9) <span class="number">25%</span>, <span class="built_in">rgba</span>(0, 0, 0, 0.1) <span class="number">50%</span>, <span class="built_in">rgba</span>(0, 0, 0, 0.9) <span class="number">75%</span>);</div><div class="line">    </div><div class="line">    <span class="attribute">-webkit-animation</span>: move_eye <span class="number">4s</span> linear <span class="number">0s</span> infinite alternate;</div><div class="line">       <span class="attribute">-moz-animation</span>: move_eye <span class="number">4s</span> linear <span class="number">0s</span> infinite alternate;</div><div class="line">         <span class="attribute">-o-animation</span>: move_eye <span class="number">4s</span> linear <span class="number">0s</span> infinite alternate;</div><div class="line">            <span class="attribute">animation</span>: move_eye <span class="number">4s</span> linear <span class="number">0s</span> infinite alternate;</div><div class="line">&#125;</div><div class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> move_eye &#123;</div><div class="line">    <span class="selector-tag">from</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:-<span class="number">20%</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-tag">to</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:<span class="number">100%</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@-<span class="keyword">moz</span>-<span class="keyword">keyframes</span> move_eye &#123;</div><div class="line">    <span class="selector-tag">from</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:-<span class="number">20%</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-tag">to</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:<span class="number">100%</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@-<span class="keyword">o</span>-<span class="keyword">keyframes</span> move_eye &#123;</div><div class="line">    <span class="selector-tag">from</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:-<span class="number">20%</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-tag">to</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:<span class="number">100%</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@<span class="keyword">keyframes</span> move_eye &#123;</div><div class="line">    <span class="selector-tag">from</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:-<span class="number">20%</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-tag">to</span> &#123;</div><div class="line">        <span class="attribute">margin-left</span>:<span class="number">100%</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2017/02/01/2014-08-10-transition&animation/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-08-10-javascript 并发模型和事件循环/" >javascript并发模型和事件循环(Event Loop)</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>JavaScript的”并发模型”是基于事件循环的.这个并发模型有别与Java的多线程,javascript的并发是单线程的.<br>Javascript 中有个重要一块，Event Loop，能把单线程的 JavaScript 使出 多线程的感觉。</p>
<blockquote>
<p>“Event Loop是一个程序结构，用于等待和发送消息和事件。（a programming construct that waits for and dispatches events or messages in a program.）”</p>
</blockquote>
<p>简单的说，就是在程序中（不一定是浏览器）中跑两个线程，一个负责程序本身的运行，作为主线程； 另一个负责主线程与其他线程的的通信，被称为“Event Loop 线程” 。  每当遇到异步的 setTimeOut ，setInterval 这些异步任务，交给 EventLoop 线程，然后自己往后运行，等到主线程运行完后，再去 Event Loop 线程拿结果。</p>
<p>这种模型人称 “asynchronous” 或 “non-blocking” 模行。 </p>
<p>我简单的画了一个 javascript 的执行图,我们通过图,逐步分析.<br><a href="http://www.cnblogs.com/yakun/p/3802725.html" target="_blank" rel="external">原图见我的博客</a></p>
<h2 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h2><p>函数调用时所用的执行环境栈<br>当js方法被调用时,会进入一个执行环境(execution context),如果有另外一个方法被调用了(或者自身递归调用),会新建一个新的执行环境,并且代码的执行会进入到这个新的执行环境.函数调用返回的时候重新回到原来的执行环境. 由此,代码执行的过程便形成了一个执行环境栈,江湖人称 “stack”;</p>
<h2 id="执行环境-上下文"><a href="#执行环境-上下文" class="headerlink" title="执行环境(上下文)"></a>执行环境(上下文)</h2><p>execution context 是一个由ECMA定义的抽象的概念,所有的javascript代码都是在 execution context 执行环境中执行的.执行环境即执行上下文是一种对象，代码在执行上下文环境中执行。可以通过 this 关键字访问执行上下文，this 是对当前执行环境对象的引用。 一般情况下，</p>
<blockquote>
<p>如果代码不存在一个用户自定义的对象或函数中， 那么它将处于全局上下文环境。</p>
</blockquote>
<p>全局执行环境是最外层的一个执行环境.在Web浏览器中,全局执行环境认为是window对象.因此所有全局变量和函数都是作为window对象的属性和方法创建的.</p>
<p>全局的代码(inline中执行的代码,通常包括js文件,html页面,加载的)在全局执行环境中执行.每个方法调用都有一个与之关联的执行环境.</p>
<p>某个执行环境中的所有代码执行完毕后,该执行环境被销毁,保存在其中的所有变量和函数定义也随之销毁. 全局执行环境直到页面关闭时才被销毁.</p>
<p>每个函数都有自己的执行环境,当执行流进入一个函数时,Javascript 创建一个新的执行上下文，并进入该函的执行上下文。函数的执行环境就会被推入环境栈中. 而在函数执行之后,栈将其环境栈弹出,把控制权返回给之前的执行环境.Javascript 中的执行流正是由这个方便的机制的控制着.</p>
<p>当代码在一个执行环境中执行时,会创建变量对象的一个作用域链(scope chain).<br>作用域链的用途,确保当前执行环境能有序(不明白就接着看)的访问所能获取的变量和函数.</p>
<p>作用域链的前端,始终都是当前执行的代码所在的执行环境的变量对象.</p>
<p>即当前作用域没有,外层作用域兜着.</p>
<p>执行环境被创建时会有次序的进行一些工作.</p>
<ol>
<li><p>首先,在方法的执行环境中,Activation 活动对象被创建.活动对象另有一套实现机制.可以认为是对象,但又很特殊,没有prototype,不能在代码中直接引用到.</p>
</li>
<li><p>下一步,在方法调用创建执行环境的时候,会创建 argument 对象(类数组对象,含有传进来的参数,length,callee),活动对象中会有一个”argument”同名属性来引用这个argument对象.</p>
</li>
<li><p>再下一步,执行环境会被指定一个作用域.作用域由承载对象的列表(或链)组成.当代码在一个执行环境中执行,会创建变量对象的一个作用域链(scope chain).作用域链的前端,始终都是当前执行的代码所在执行环境的变量对象(和上面提到的 Activation 活动对象是一个对象). 如果这个环境是函数(javascript 环境只有函数和全局环境这两种), 则将其活动对象作为变量对象使用,活动对象在最开始时只包含一个arguments对象.</p>
</li>
</ol>
<p>作用域链中下一个变量对象来自当前代码的外层环境.以此类推,直到到达最外层的全局执行环境,这样便构成了一条从底到上的作用域链.全局执行环境的变量对象始终都是作用域链的最后一个对象.<br>标示符解析是沿着作用域链一级一级的搜索标示符的过程.搜索过程始终都是从作用域链的最前端开始,然后主逐级向后回溯. </p>
<h4 id="当进入执行环境"><a href="#当进入执行环境" class="headerlink" title="当进入执行环境"></a>当进入执行环境</h4><p>当进入执行环境(代码即将但仍未执行时),变量对象也就是活动对象已经包含了以下这些属性:</p>
<ol>
<li>函数的所有形参,由名称和对应值组成变量对象的属性.</li>
<li>执行环境所在函数内部的所有子函数声明,由名称和对应值(函数对象 function object)组成变量对象的属性.如果变量对象内已存在同名属性,那么会被替换所有的变量声明.</li>
<li>由名称和对应值(undefined)组成变量对象的属性,如果变量名称跟已经声明的形式参数或函数相同，则变量声明不会干扰已经存在的这类属性.</li>
</ol>
<p>需要说明的是,每个执行环境都有this,this的值取决于调用者和所执行代码的类型,this值是在进入执行环境时就已经确定的. 取值与执行环境相关联,并且在执行环境运行期间是不能被修改的.</p>
<blockquote>
<p>this 执行上下文中的一个属性. </p>
</blockquote>
<p> 在全局代码中,this始终是全局对象本身.</p>
<p>在通常的函数调用中,this是由函数的调用者提供的,即被调用函数的父执行环境提供的.this值取决于函数调用的方式.</p>
<h2 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h2><p>堆是一个对象互联的网络。用数学术语说就是“图”。图由节点及其之间的边构成。节点和边都是可被标记的：节点（对象）用对象构造器的名称标记，边则由属性名称标记。<br>从一个对象到另一个的边序列被叫做路径（path）。通常我们只对那些不重复经过同一节点两次的简单路径（simple path）感兴趣。<br>我们把垃圾收集器根节点到某个指定对象的路径叫做retaining path。如果不存在这样的路径，则该对象被称作无法达到的（unreachable），应在垃圾收集过程中被处置。</p>
<h2 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h2><p>在web浏览器中,当事件发生时如果该事件有相应的监听器,则该消息会被及时的加进消息队列,如果没有监听器,该事件会被丢失.<br>javascript运行时伴随一个待处理的消息(也就是任务)队列,每个消息都关联了相关的处理函数,当函数的执行栈为空时,即当前没有正在执行的函数,那么,队列会从中挑出一个去处理.处理过程包括调用相关的函数(不用担心处理函数的作用域问题,因为在javascript中,作用域是词法化作用域,是方法在定义的时候已经确定的,与调用无关.作用域链创建早于方法调用,得益于此,我们方能使用闭包),处理完成后,如果栈为空,则再次尝试从队列中挑选可处理的事件或任务. 从中可以很容易窥探到 setInterval,setTimeout 是怎么进行异步执行的了.<br>这,就是事件循环,event loop.</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过上面的分析,javascript是不存在并发的,单线程何谈并发? 这只是说说了<em>非阻塞</em>.</p>

	
	</div>
  <a type="button" href="/2017/02/01/2014-08-10-javascript 并发模型和事件循环/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-02-01 </div>
			<div class="article-title"><a href="/2017/02/01/2014-08-07-改键/" >mac os 改键</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>最近着迷于vim,<code>Vim使用技巧</code>推荐重新映射大小写转换键</p>
<blockquote>
<p>在现代键盘上，<code>&lt;Esc&gt;</code>可以省很多力气，尤其是Vim对<code>&lt;Esc&gt;</code>键用的这么频繁。不过最好好把大小写转换键映射为<code>&lt;Ctrl&gt;</code>键。<code>&lt;C-[&gt;</code> 的功能和 <esc> 键相同，如果 <code>&lt;Ctrl&gt;</code> 键触手可及，那么这一组合键用起来也会很容易。</esc></p>
</blockquote>
<p>我用的改建软件是 karabiner 和 seil。</p>

	
	</div>
  <a type="button" href="/2017/02/01/2014-08-07-改键/#more" class="btn btn-default more">阅读此文</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/3/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/5/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			 

		
			
	<div class="widget">
		<h4>分类</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/Sports/Baseball/">Baseball<span>2</span></a></li>
		
			<li><a href="/categories/Sports/">Sports<span>2</span></a></li>
		
			<li><a href="/categories/bom/">bom<span>1</span></a></li>
		
			<li><a href="/categories/collection/">collection<span>1</span></a></li>
		
			<li><a href="/categories/css/">css<span>1</span></a></li>
		
			<li><a href="/categories/http/">http<span>1</span></a></li>
		
			<li><a href="/categories/javascript-template/">javascript template<span>1</span></a></li>
		
			<li><a href="/categories/javascript-test/">javascript test<span>1</span></a></li>
		
			<li><a href="/categories/jquery/">jquery<span>1</span></a></li>
		
			<li><a href="/categories/library/">library<span>2</span></a></li>
		
			<li><a href="/categories/note/">note<span>1</span></a></li>
		
			<li><a href="/categories/note-vim/">note vim<span>2</span></a></li>
		
			<li><a href="/categories/tool/">tool<span>3</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/javascript-regexp/">javascript regexp<span>1</span></a></li>
		
			<li><a href="/tags/linux/">linux<span>6</span></a></li>
		
			<li><a href="/tags/tools/">tools<span>2</span></a></li>
		
			<li><a href="/tags/Fight/">Fight<span>2</span></a></li>
		
			<li><a href="/tags/vim/">vim<span>3</span></a></li>
		
			<li><a href="/tags/demo/">demo<span>1</span></a></li>
		
			<li><a href="/tags/webponent/">webponent<span>1</span></a></li>
		
			<li><a href="/tags/git/">git<span>5</span></a></li>
		
			<li><a href="/tags/default/">default<span>1</span></a></li>
		
			<li><a href="/tags/html/">html<span>2</span></a></li>
		
			<li><a href="/tags/w3c/">w3c<span>1</span></a></li>
		
			<li><a href="/tags/javascript-test/">javascript test<span>1</span></a></li>
		
			<li><a href="/tags/module/">module<span>2</span></a></li>
		
			<li><a href="/tags/document/">document<span>1</span></a></li>
		
			<li><a href="/tags/Shocking/">Shocking<span>2</span></a></li>
		
			<li><a href="/tags/dom-javascript/">dom,javascript<span>1</span></a></li>
		
			<li><a href="/tags/webcomponent/">webcomponent<span>2</span></a></li>
		
			<li><a href="/tags/mobile/">mobile<span>1</span></a></li>
		
			<li><a href="/tags/framework/">framework<span>1</span></a></li>
		
			<li><a href="/tags/javascript-template/">javascript template<span>1</span></a></li>
		
		
		   <li><a href="/tags">...<span>39</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2017/02/01/2012-08-03-XMLHttpRequest发送put,delete请求/" ><i class="fa fa-file-o"></i>XMLHttpRequest发送put,delete请求</a>
      </li>
    
      <li>
        <a href="/2017/02/01/设计模式简介/" ><i class="fa fa-file-o"></i></a>
      </li>
    
      <li>
        <a href="/2017/02/01/2012-08-03-页面性能的几个评测点/" ><i class="fa fa-file-o"></i>页面性能的几个评测点</a>
      </li>
    
      <li>
        <a href="/2017/02/01/脚本的第一行/" ><i class="fa fa-file-o"></i></a>
      </li>
    
      <li>
        <a href="/2017/02/01/消除函数的术语歧义/" ><i class="fa fa-file-o"></i></a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/chenyakun" title="My Github repository." target="_blank"]);">My Github</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2017 yakun.cyk
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<!-- <script src="/js/search.js"></script>  -->

<!-- 
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>
 -->

<!-- 
   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>
 -->

<div class="cb-search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px;
        opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">

    <input type="text" class="cb-search-content" id="cb-search-content" style="position: fixed; top: 60px" placeholder="文章标题 日期 标签" />

    <div style="position: fixed; top: 16px; right: 16px;">
        <img src="/search/img/cb-close.png"  id="cb-close-btn"/>
    </div>
</div>

<!-- <div style="position: fixed; right: 16px; bottom: 20px;">
    <img src="/search/img/cb-search.png"  id="cb-search-btn"  title="双击ctrl试一下"/>
</div> -->

<link rel="stylesheet" href="/search/css/cb-search.css">
<script src="/search/js/bootstrap3-typeahead.min.js"></script>
<script src="/search/js/cb-search.js"></script>

</body>
   </html>
