<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 12 页 | output stream</title>
  <meta name="author" content="yakun.cyk">
  
  <meta name="description" content="主要内容可能关于 web 技术，感慨心得...">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="output stream"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	    <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
	  <a class="navbar-brand" href="/">output stream</a>
      <div class="collapse navbar-collapse nav-menu">
		    <ul class="nav navbar-nav">
    		  
    		  <li>
    			 <a href="/demos" title="Demos.">
            <i class="fa fa-flask"></i>Demos
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/archives" title="All the articles.">
            <i class="fa fa-archive"></i>归档
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/about" title="About me.">
            <i class="fa fa-user"></i>关于我
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/#" title="Search Posts.">
            <i class="fa fa-search"></i>搜索
    			 </a>
    		  </li>
    		  
    		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <!--
        <i class="fa fa-heart"></i> 
      -->
      
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2013-11-30 </div>
			<div class="article-title"><a href="/2013/11/30/2013-11-30-jQuery源码中的正则表达式学习笔记/" >jQuery源码中的正则表达式学习笔记</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>说明这些正则里充斥了大量 (?:) 这样的表达式, 语法规则是这样的: </p>
<p><code>()</code>代表分组,就是多字符匹配,团结的像一个似的. 分组还有个作用: <code>捕获</code>. 就是说()匹配的内容, 会给个号码然后将其缓存起来, 后面的表达式语句能使用号码引用匹配到的文本(见号如见匹配文本)。 作用上，像oracle里的 <code>with</code> 关键字。</p>
<p>再说点题外话:关于行结束符</p>
<ul>
<li>mac:    \r     回车</li>
<li>unix:   \n     换行</li>
<li>window: \r\n   回车换行 </li>
</ul>
<p>换行符起源于机械打字机,当打字机的笔尖走到行末时,有两个动作,回车,return到行首,接着\n,换到下一行。</p>
<p>举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> quickExpr = <span class="regexp">/^(?:[^#&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]*)$)/</span></div></pre></td></tr></table></figure>
<p>分组,外层为第一层分组, 因采用(?:) 匹配但不捕获,没有分组好, 所有最终拿到手的只有两组分组.<br>最外层分组匹配的是选择器selector,可为html标签,或id选择器.  分组 1 匹配标签名,标签内的字符串,不带左右尖括号. 分组2匹配id选择器名,不带#号.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rnotwhite = <span class="regexp">/\S/</span></div></pre></td></tr></table></figure>
<p>匹配任意非空字符,空格,tab,回车等统统不匹配</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> trimLeft = <span class="regexp">/^\s+/</span></div></pre></td></tr></table></figure>
<p>Used for trimming whitespace, 匹配以空白符开始的行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> trimRight = <span class="regexp">/\s+$/</span></div></pre></td></tr></table></figure>
<p>匹配以空白符结尾的行,阿里的笔试题就有这个</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rsingleTag = <span class="regexp">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;)?$/</span></div></pre></td></tr></table></figure>
<p>Match a standalone tag<br>\w 匹配数字字母下划线<br>第二个分组匹配不捕获(它调用了第一组的捕获内容)没了分组号,最终只剩第一个分组号,用于匹配标签名,这货匹配一组单独标签,闭合单标签或闭合双标签</p>
<p>JSON RegExp<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rvalidchars = <span class="regexp">/^[\],:&#123;&#125;\s]*$/</span></div></pre></td></tr></table></figure></p>
<p>匹配任意多个  ],:{}和空格,干啥使得后面再说</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rvalidescape = <span class="regexp">/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g</span></div></pre></td></tr></table></figure>
<p>匹配JSON合理的取值<br>“[^”\\n\r]*” 匹配被双引号包着的字符 双引号抱着的内容不能有(双引号,换行符,回车符,转义符)<br>也匹配为 true或false或null的值<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-?\d+(?:\.\d*)?(?:[<span class="string">eE</span>][<span class="symbol">+\-</span>]?\d+)</div></pre></td></tr></table></figure></p>
<p>可匹配负值,可匹配带小数的,还匹配科学计数法<br>强大!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rvalidtokens = <span class="regexp">/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g</span></div></pre></td></tr></table></figure>
<p>匹配  [  或 , [ 或 :[ </p>
<p>(?:^|:|,) 这货差点让我看走眼,匹配三个 空或:或, ^ 匹配字符串的开始,紧接着就是或,所以它匹配空,这个表达式看起来像 json的左括号</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rvalidbraces = <span class="regexp">/(?:^|:|,)(?:\s*\[)+/g</span></div></pre></td></tr></table></figure>
<p>Useragent RegExp<br>UserAgent 就是浏览器的标识</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">webkit/ab.c</div><div class="line">var rwebkit = /(webkit)[<span class="string"> \/</span>](<span class="link">[\w.]+</span>)/</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ropera = <span class="regexp">/(opera)(?:.*version)?[ \/]([\w.]+)/</span>,</div><div class="line"><span class="keyword">var</span> rmsie = <span class="regexp">/(msie) ([\w.]+)/</span>,</div><div class="line"></div><div class="line"><span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:29.0) Gecko/20100101 Firefox/29.0"</span></div><div class="line"><span class="keyword">var</span> rmozilla = <span class="regexp">/(mozilla)(?:.*? rv:([\w.]+))?/</span>,</div><div class="line"></div><div class="line">Matches dashed string <span class="keyword">for</span> camelizing</div><div class="line"><span class="keyword">var</span> rdashAlpha = <span class="regexp">/-([a-z]|[0-9])/ig</span></div></pre></td></tr></table></figure>
<p>微软前缀<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rmsPrefix = <span class="regexp">/^-ms-/</span>,</div></pre></td></tr></table></figure></p>
<p>匹配大括号和中括号,中间内容不限<br><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rbrace = /^(?:<span class="symbol">\&#123;</span>.*<span class="symbol">\&#125;</span>|<span class="symbol">\[</span>.*<span class="symbol">\]</span>)$/</div></pre></td></tr></table></figure></p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rmultiDash = /<span class="comment">([A-Z])</span>/g</div></pre></td></tr></table></figure>
<p>匹配换行,回车,制表符<br><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rclass = /[<span class="symbol">\n</span><span class="symbol">\t</span><span class="symbol">\r</span>]/g</div></pre></td></tr></table></figure></p>
<p>匹配空格<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rspace = <span class="regexp">/\s+/</span></div></pre></td></tr></table></figure></p>
<p>匹配回车<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rreturn = <span class="regexp">/\r/g</span>,</div></pre></td></tr></table></figure></p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">var</span> r<span class="keyword">type</span> = /^(?:button|input)$/i,</div></pre></td></tr></table></figure>
<p>能被focus的, 即按tab可focus的,涨姿势了<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rfocusable = /^(?:button|<span class="type">input</span>|<span class="type">object</span>|<span class="type">select</span>|<span class="type">textarea</span>)$/i,</div></pre></td></tr></table></figure></p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">var rclickable</span> = /^a(<span class="meta">?:rea)?</span>$/i,</div></pre></td></tr></table></figure>
<p>取值为布尔值的<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rboolean = /^(?:autofocus|<span class="type">autoplay</span>|<span class="type">async</span>|<span class="type">checked</span>|<span class="type">controls</span>|<span class="type">defer</span>|<span class="type">disabled</span>|<span class="type">hidden</span>|<span class="type">loop</span>|<span class="type">multiple</span>|<span class="type">open</span>|<span class="type">readonly</span>|<span class="type">required</span>|<span class="type">scoped</span>|<span class="type">selected</span>)$/i,</div></pre></td></tr></table></figure></p>
<p>form元素<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rformElems = /^(?:textarea|<span class="type">input</span>|<span class="type">select</span>)$/i,</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rtypenamespace = <span class="regexp">/^([^\.]*)?(?:\.(.+))?$/</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> rhoverHack = <span class="regexp">/\bhover(\.\S+)?\b/</span>,</div><div class="line"></div><div class="line"><span class="keyword">var</span> rkeyEvent = <span class="regexp">/^key/</span>,</div></pre></td></tr></table></figure>
<p>点击事件 mouse或contextmenu再无前缀,click可有<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rmouseEvent = <span class="regexp">/^(?:mouse|contextmenu)|click/</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> rfocusMorph = <span class="regexp">/^(?:focusinfocus|focusoutblur)$/</span>,</div><div class="line"></div><div class="line"><span class="keyword">var</span> rquickIs = <span class="regexp">/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/</span>,</div></pre></td></tr></table></figure></p>
<p>这里是sezzle中的核心<br>大块儿头,分而治之</p>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">var c = </div><div class="line"></div><div class="line">/(        			(?#分组1)</div><div class="line">	(?:   			</div><div class="line">		  <span class="symbol">\(</span>(?:<span class="symbol">\(</span>[^()]+<span class="symbol">\)</span>(?#分组3)|[^()]+)+<span class="symbol">\)</span>|    (?#分组2,函数式过滤块儿)</div><div class="line">	      <span class="symbol">\[</span>(?:<span class="symbol">\[</span>[^<span class="symbol">\[</span><span class="symbol">\]</span>]*<span class="symbol">\]</span>|['"][^'"]*['"]|[^<span class="symbol">\[</span><span class="symbol">\]</span>'"]+)+<span class="symbol">\]</span>| (?#属性选择块儿)</div><div class="line">	      <span class="symbol">\\</span>.| </div><div class="line">	      [^ &gt;+~,(<span class="symbol">\[</span><span class="symbol">\\</span>]+ </div><div class="line">	)+|</div><div class="line">    [&gt;+~] (?#层级选择块)</div><div class="line"> )   </div><div class="line"></div><div class="line">(<span class="symbol">\s</span>*,<span class="symbol">\s</span>*)?((?:.|<span class="symbol">\r</span>|<span class="symbol">\n</span>)*)   /g,</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">var chunker = /((?:<span class="symbol">\(</span>(?:<span class="symbol">\(</span>[^()]+<span class="symbol">\)</span>|[^()]+)+<span class="symbol">\)</span>|<span class="symbol">\[</span>(?:<span class="symbol">\[</span>[^<span class="symbol">\[</span><span class="symbol">\]</span>]*<span class="symbol">\]</span>|['"][^'"]*['"]|[^<span class="symbol">\[</span><span class="symbol">\]</span>'"]+)+<span class="symbol">\]</span>|<span class="symbol">\\</span>.|[^ &gt;+~,(<span class="symbol">\[</span><span class="symbol">\\</span>]+)+|[&gt;+~])(<span class="symbol">\s</span>*,<span class="symbol">\s</span>*)?((?:.|<span class="symbol">\r</span>|<span class="symbol">\n</span>)*)/g,</div><div class="line"> </div><div class="line">ID: /#((?:[<span class="symbol">\w</span><span class="symbol">\u</span>00c0-<span class="symbol">\u</span>FFFF<span class="symbol">\-</span>]|<span class="symbol">\\</span>.)+)/,</div><div class="line"></div><div class="line">CLASS: /<span class="symbol">\.</span>((?:[<span class="symbol">\w</span><span class="symbol">\u</span>00c0-<span class="symbol">\u</span>FFFF<span class="symbol">\-</span>]|<span class="symbol">\\</span>.)+)/,</div><div class="line">NAME: /<span class="symbol">\[</span>name=['"]*((?:[<span class="symbol">\w</span><span class="symbol">\u</span>00c0-<span class="symbol">\u</span>FFFF<span class="symbol">\-</span>]|<span class="symbol">\\</span>.)+)['"]*<span class="symbol">\]</span>/,</div><div class="line">ATTR: /<span class="symbol">\[</span><span class="symbol">\s</span>*((?:[<span class="symbol">\w</span><span class="symbol">\u</span>00c0-<span class="symbol">\u</span>FFFF<span class="symbol">\-</span>]|<span class="symbol">\\</span>.)+)<span class="symbol">\s</span>*(?:(<span class="symbol">\S</span>?=)<span class="symbol">\s</span>*(?:(['"])(.*?)<span class="symbol">\3</span>|(#?(?:[<span class="symbol">\w</span><span class="symbol">\u</span>00c0-<span class="symbol">\u</span>FFFF<span class="symbol">\-</span>]|<span class="symbol">\\</span>.)*)|)|)<span class="symbol">\s</span>*<span class="symbol">\]</span>/,</div><div class="line">TAG: /^((?:[<span class="symbol">\w</span><span class="symbol">\u</span>00c0-<span class="symbol">\u</span>FFFF<span class="symbol">\*</span><span class="symbol">\-</span>]|<span class="symbol">\\</span>.)+)/,</div><div class="line">CHILD: /:(only|nth|last|first)-child(?:<span class="symbol">\(</span><span class="symbol">\s</span>*(even|odd|(?:[+<span class="symbol">\-</span>]?<span class="symbol">\d</span>+|(?:[+<span class="symbol">\-</span>]?<span class="symbol">\d</span>*)?n<span class="symbol">\s</span>*(?:[+<span class="symbol">\-</span>]<span class="symbol">\s</span>*<span class="symbol">\d</span>+)?))<span class="symbol">\s</span>*<span class="symbol">\)</span>)?/,</div><div class="line">POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:<span class="symbol">\(</span>(<span class="symbol">\d</span>*)<span class="symbol">\)</span>)?(?=[^<span class="symbol">\-</span>]|$)/,</div><div class="line">PSEUDO: /:((?:[<span class="symbol">\w</span><span class="symbol">\u</span>00c0-<span class="symbol">\u</span>FFFF<span class="symbol">\-</span>]|<span class="symbol">\\</span>.)+)(?:<span class="symbol">\(</span>(['"]?)((?:<span class="symbol">\(</span>[^<span class="symbol">\)</span>]+<span class="symbol">\)</span>|[^<span class="symbol">\(</span><span class="symbol">\)</span>]*)+)<span class="symbol">\2</span><span class="symbol">\)</span>)?/</div></pre></td></tr></table></figure>
<h2 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> match = <span class="regexp">/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/</span>.exec( query );</div><div class="line"></div><div class="line">				   </div><div class="line"><span class="keyword">var</span> runtil = <span class="regexp">/Until$/</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> rparentsprev = <span class="regexp">/^(?:parents|prevUntil|prevAll)/</span>,</div></pre></td></tr></table></figure>
<p>Note: This RegExp should be improved, or likely pulled from Sizzle<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rmultiselector = <span class="regexp">/,/</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> isSimple = <span class="regexp">/^.[^:#\[\.,]*$/</span>,</div></pre></td></tr></table></figure></p>
<p>h5标签全家福<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">var nodeNames</span> = <span class="string">"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|"</span> +</div><div class="line">				<span class="string">"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video"</span>;</div></pre></td></tr></table></figure></p>
<p>匹配jQuery的”uuid”<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> rinlinejQuery = / jQuery\d+=<span class="string">"(?:\d+|null)"</span>/g</div><div class="line"></div><div class="line"><span class="selector-tag">var</span> rleadingWhitespace = /^\s+/</div></pre></td></tr></table></figure></p>
<p>good: (?!exp)    匹配后面跟的不是exp的位置<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var rxhtmlTag = /&lt;(?!area|<span class="type">br</span>|<span class="type">col</span>|<span class="type">embed</span>|<span class="type">hr</span>|<span class="type">img</span>|<span class="type">input</span>|<span class="type">link</span>|<span class="type">meta</span>|<span class="type">param</span>)(([\w:]+)[^&gt;]*)\/&gt;/ig</div><div class="line"></div><div class="line">var rtagName = /&lt;([\w:]+)/</div><div class="line">var rtbody = /&lt;tbody/i</div><div class="line">var rhtml = /&lt;|<span class="type">&amp;#?\w</span>+;/ // &lt; 或者 &amp;nbsp; &amp;#xxx;</div><div class="line">var rnoInnerhtml = /&lt;(?:script|<span class="type">style</span>)/i</div></pre></td></tr></table></figure></p>
<p>html代码中不能含有这些标签,加入dom缓存<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rnocache = <span class="regexp">/&lt;(?:script|object|embed|option|style)/i</span>,       </div><div class="line"></div><div class="line">checked=<span class="string">"checked"</span> <span class="keyword">or</span> checked</div><div class="line"><span class="keyword">var</span> rchecked = <span class="regexp">/checked\s*(?:[^=]|=\s*.checked.)/i</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> rscriptType = <span class="regexp">/\/(java|ecma)script/i</span></div><div class="line"><span class="keyword">var</span> rcleanScript = <span class="regexp">/^\s*&lt;!(?:\[CDATA\[|\-\-)/</span></div><div class="line">								  </div><div class="line"><span class="keyword">var</span> <span class="keyword">var</span> ralpha = <span class="regexp">/alpha\([^)]*\)/i</span></div><div class="line"><span class="keyword">var</span> ropacity = <span class="regexp">/opacity=([^)]*)/</span></div><div class="line"></div><div class="line">fixed <span class="keyword">for</span> IE9, see <span class="comment">#8346</span></div><div class="line"><span class="keyword">var</span> rupper = <span class="regexp">/([A-Z]|^ms)/g</span></div><div class="line"><span class="keyword">var</span> rnumpx = <span class="regexp">/^-?\d+(?:px)?$/i</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> rnum = <span class="regexp">/^-?\d/</span>,</div><div class="line"><span class="keyword">var</span> rrelNum = <span class="regexp">/^([\-+])=([\-+.\de]+)/</span>,</div></pre></td></tr></table></figure></p>
<p>编码后的空格<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> r20 = <span class="regexp">/%20/g</span>,</div><div class="line"><span class="keyword">var</span> rbracket = <span class="regexp">/\[\]$/</span>,</div></pre></td></tr></table></figure></p>
<p>表示 \r,\n 或 \r\n<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rCRLF = <span class="regexp">/\r?\n/g</span>,</div></pre></td></tr></table></figure></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rhash = /<span class="meta">#.*$/,</span></div></pre></td></tr></table></figure>
<p>IE leaves an \r character at EOL<br><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rheaders = /^(.*?):[ <span class="symbol">\t</span>]*([^<span class="symbol">\r</span><span class="symbol">\n</span>]*)<span class="symbol">\r</span>?$/mg,</div></pre></td></tr></table></figure></p>
<p>可输入的标签<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var rinput = /^(?:color|<span class="type">date</span>|<span class="type">datetime</span>|<span class="type">datetime</span>-local|<span class="type">email</span>|<span class="type">hidden</span>|<span class="type">month</span>|<span class="type">number</span>|<span class="type">password</span>|<span class="type">range</span>|<span class="type">search</span>|<span class="type">tel</span>|<span class="type">text</span>|<span class="type">time</span>|<span class="type">url</span>|<span class="type">week</span>)$/i</div></pre></td></tr></table></figure></p>
<p><code>#7653, #8125, #8152</code>: local protocol detection<br>访问本地资源时,浏览器地址栏可使用的schema<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var rlocalProtocol = /^(?:about|<span class="type">app</span>|<span class="type">app</span>\-storage|<span class="type">.+\-extension</span>|<span class="type">file</span>|<span class="type">res</span>|<span class="type">widget</span>):$/</div><div class="line"></div><div class="line">var rnoContent = /^(?:GET|<span class="type">HEAD</span>)$/</div></pre></td></tr></table></figure></p>
<p>匹配 // </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rprotocol = <span class="regexp">/^\/\//</span></div><div class="line"><span class="keyword">var</span> rquery = <span class="regexp">/\?/</span></div></pre></td></tr></table></figure>
<p>\b代表单词的开头或结尾,也就是单词的分界处<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rscript = <span class="regexp">/&lt;script\b[^&lt;]*(?:(?!&lt;\/script&gt;)&lt;[^&lt;]*)*&lt;\/script&gt;/gi</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> rselectTextarea = <span class="regexp">/^(?:select|textarea)/i</span></div><div class="line"><span class="keyword">var</span> rspacesAjax = <span class="regexp">/\s+/</span></div><div class="line"><span class="keyword">var</span> rts = <span class="regexp">/([?&amp;])_=[^&amp;]*/</span></div><div class="line"><span class="keyword">var</span> rurl = <span class="regexp">/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> rfxtypes = <span class="regexp">/^(?:toggle|show|hide)$/</span></div><div class="line"><span class="keyword">var</span> rfxnum = <span class="regexp">/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> rtable = <span class="regexp">/^t(?:able|d|h)$/i</span></div><div class="line"><span class="keyword">var</span> rroot = <span class="regexp">/^(?:body|html)$/i</span>;</div></pre></td></tr></table></figure></p>

	
	</div>
  <a type="button" href="/2013/11/30/2013-11-30-jQuery源码中的正则表达式学习笔记/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2013-11-07 </div>
			<div class="article-title"><a href="/2013/11/07/2013-11-07-waht -is-aria/" >What is ARIA</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<blockquote>
<p>WAI-ARIA (Web Accessibility Initiative’s Accessible Rich Internet App)</p>
</blockquote>
<p>无障碍网页倡议-无障碍的富互联网应用,一种技术规范.旨在提高 html 的语义性.</p>
<p>让页面具有无障碍访问功能,现有的 html 标记还不够.</p>
<ol>
<li><p>role=”banner”（横幅）</p>
<p> 面向全站的内容，通常包含网站标志、网站赞助者标志、 全站搜索工具等。横幅通常显示在页面的顶端，而且通 常横跨整个页面的宽度 将其添加到页面级的header 元素，每个页面只用一次</p>
</li>
<li><p>role=”navigation”（导航） </p>
<p> 文档内不同部分或相关文档的导航性元素（通常为链接） 的集合 与nav 元素是对应关系。应将其添加到每个nav 元素， 或其他包含导航性链接的容器。这个角色可在每个页面 上使用多次，但是同nav 一样，不要过度使用该属性</p>
</li>
<li><p>role=”main”（主体）</p>
<p> 文档的主要内容,与main 元素是对应关系。最好将其添加到main 元素， 也可以添加到其他表示主体内容的元素（可能是div）。 在每个页面仅使用一次</p>
</li>
<li><p>role=”complementary”（补充性内容） </p>
<p> 文档中作为主体内容补充的支撑部分。它对区分主体内 容是有意义的 与aside 元素是对应关系。应将其添加到aside 或div 元 素（前提 是该div 仅包含补充性内容）。可以在一个页 面里包含多个complementary 角色，但不要过度使用</p>
</li>
<li><p>role=”contentinfo”（内容信息）</p>
<p> 包含关于文档的信息的大块可感知区域这类信息的例子 包括版权声明和指向隐私权声明的链接等 将其添加至整个页面的页脚（通常为footer 元素）。每 个页面仅使用一次.</p>
<p> o</p>
</li>
</ol>

	
	</div>
  <a type="button" href="/2013/11/07/2013-11-07-waht -is-aria/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2013-08-12 </div>
			<div class="article-title"><a href="/2013/08/12/2014-11-01-探究浏览器的存储/" >探究浏览器的存储能力</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>##cookie</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">document.cookie</div></pre></td></tr></table></figure>
<p>返回所有作用在当前文档的所有 cookie ，多个 cookie 的集合的字符串形式。</p>
<p><code>RFC 2965</code>规定 cookie 不超过300个，为每个Web服务器保存的cookie数不能超过<code>20</code>个,数据不能超过 <code>4KB</code> 现代浏览器允许 cookie 超过300个 。<br>要给当前文档设置 cookie 值，非常简单，只须将cookie属性设置为一个字符串形式的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.cookie=<span class="string">'name_self=abc'</span>;</div><div class="line"><span class="built_in">document</span>.cookie=<span class="string">'name_self=abc;max-age=10'</span>; <span class="comment">// 10秒后过期</span></div><div class="line"><span class="built_in">document</span>.cookie=<span class="string">"name_self=abc;max-age=10;path='/path';domain='http://.domain.com';"</span>; <span class="comment">// 10秒后过期,由于设置了 domain 不限于 domain.com/path/xx  path 目录及其子目录的访问，其他子域名也可访问 cookie。</span></div></pre></td></tr></table></figure>
<p>##get/post</p>
<pre><code>Http    Get方法提交的数据大小长度并没有限制，HTTP协议规范没有对URL长度进行限制。这个限制是特定的浏览器及服务器对它的限制。
IE      限制为2083个字符，如果超过这个数字，提交按钮没有任何反应。
Firefox 对于Firefox浏览器URL的长度限制为65,536个字符。
Safari  URL最大长度限制为 80,000个字符。
Opera   URL最大长度限制为190,000个字符。
Google  URL最大长度限制为8182个字符。
Apache  能接受最大url长度为8,192个字符。
</code></pre><p>Post 长度限制</p>
<p>在Tomcat下取消POST大小的限制（Tomcat默认2M）；</p>
<pre><code>打开tomcat目录下的conf目录，打开server.xml 文件，修改maxPostSize
</code></pre><p>##localStorage<br>User agents should limit the total amount of space allowed for storage areas.</p>
<p>主观上推荐大多数的浏览器的存储限制设为 <code>5M字节/域</code>，根据使用效果的反馈，未来会有相对的变更。</p>

	
	</div>
  <a type="button" href="/2013/08/12/2014-11-01-探究浏览器的存储/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2013-06-30 </div>
			<div class="article-title"><a href="/2013/06/30/2013-06-30-javascript 权威指南笔记/" >javascript 权威指南笔记</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="第1章-概述"><a href="#第1章-概述" class="headerlink" title="第1章 概述"></a>第1章 概述</h2><h2 id="第2章-词法结构"><a href="#第2章-词法结构" class="headerlink" title="第2章 词法结构"></a>第2章 词法结构</h2><p>所谓直接量(literal) .就是程序中直接使用的数据值</p>
<h2 id="第3章-类型、值和变量"><a href="#第3章-类型、值和变量" class="headerlink" title="第3章 类型、值和变量"></a>第3章 类型、值和变量</h2><p>Javascript 是一种面向对象的语言。<br>这意味着不再需要定义全局的函数去操作不同类型的值——数据类型本身可以定义方法来使用值。</p>
<p>数字、布尔值、null和undefined属于不可变类型</p>
<p>JavaScript变量是无类型的(untyped)，变量可以被赋予任何类型的值</p>
<p>JavaScript采用词法作用域(lexical scoping)。<br>不在任何函数内声明的变量称做全局变量(global variable) ，它在JavaScript程序中的任何地方都是可见的.</p>
<p>JavaScript中的所有数字均用浮点数值表示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span> , <span class="number">53</span>) =&gt; <span class="number">90199254740992</span>: <span class="number">2</span> 的<span class="number">53</span>次</div><div class="line">   <span class="built_in">Math</span>.round(<span class="number">.6</span>) =&gt; 四舍五入 </div><div class="line"><span class="built_in">Math</span>.ceil(<span class="number">.6</span>) =&gt; 向上求整 </div><div class="line"><span class="built_in">Math</span>.f1oor(. <span class="number">6</span>) =&gt; 向下取整</div><div class="line"><span class="built_in">Math</span>.abs(<span class="number">-5</span>) =&gt; 求绝对值</div><div class="line"><span class="built_in">Math</span>.max(x,y,z,e,f) =&gt; 所有参数中的最大值</div><div class="line">   <span class="built_in">Math</span>.min(x,y,z) =&gt; 所有参数中的最小值</div><div class="line"><span class="built_in">Math</span>.random() =&gt; 生成一个大于等于<span class="number">0</span> 小于<span class="number">1.</span> <span class="number">0</span>的伪随机数</div><div class="line"><span class="built_in">Math</span>.PI</div><div class="line"><span class="built_in">Math</span>.E</div><div class="line"><span class="built_in">Math</span>.sqrt(<span class="number">3</span>)</div><div class="line"><span class="built_in">Math</span>.pow(<span class="number">3</span> ， <span class="number">1</span>/<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>JavaScript中的非数字(NaN)值有一点特殊:它和任何值都不相等，包括自身 NaN != NaN</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">//当前日期和时间</span></div><div class="line"><span class="keyword">var</span> elapsed = now - then; <span class="comment">//日期减法 计算时间间隔的毫秒数</span></div></pre></td></tr></table></figure>
<p>字符串(string) 是一组由16位值组成的不可变的有序序列，每个字符通常来自于 Unicode字符集,比如cant,Reillys 。因为撇号和单引号是同一个字符，所以必须使用反斜线来转义</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> s = <span class="string">"hello， world"</span></div><div class="line">s.charAt(o);</div><div class="line">s.charAt(s.length<span class="number">-1</span>)</div><div class="line">s.substring(startIndex,endIndex) </div><div class="line">s.substr(startIndex,length)</div><div class="line">s.slice(<span class="number">1</span>,<span class="number">4</span>)</div><div class="line">s.slice(<span class="number">-3</span>)</div><div class="line">s.indexOf(<span class="string">"l"</span>)</div><div class="line">s.lastlndexOf(<span class="string">"l"</span>)</div><div class="line">s.indexOf(<span class="string">"l"</span>, <span class="number">3</span>)</div><div class="line">s.split(<span class="string">", "</span>) 字符串分割成数组,相对于 <span class="built_in">Array</span>.join()</div><div class="line"></div><div class="line"><span class="comment">//下面这些值可以被转换成 false</span></div><div class="line"><span class="literal">undefined</span></div><div class="line"><span class="literal">null</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">-0</span></div><div class="line"><span class="literal">NaN</span></div><div class="line"><span class="string">""</span> <span class="comment">// 空字符串</span></div></pre></td></tr></table></figure>
<h2 id="第4章-表达式和运算符"><a href="#第4章-表达式和运算符" class="headerlink" title="第4章 表达式和运算符"></a>第4章 表达式和运算符</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a,b = <span class="number">0</span>;</div><div class="line">(a = b) == <span class="number">0</span>  <span class="comment">// =&gt; true</span></div><div class="line">先执行括号内的赋值语句, 后进行相等判断</div><div class="line"></div><div class="line">赋值操作的结合性是从右到左</div><div class="line">所以,可以</div><div class="line">i = j = k = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="string">`data[i++] = data[i++] *2 `</span></div></pre></td></tr></table></figure>
<p>由于所有 对象和数组 的typeof运算结果是”object” 而不是”function”，因此它对于<br>区分对象和其他原始值来说是很有帮助的, function 的 typeof 才是 “function”。</p>
<p>如果想区分对象的类，则需要使用其他的手段，如使用instanceof运算符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</div><div class="line"><span class="keyword">delete</span> a[<span class="number">3</span>];  =&gt;  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="literal">undefined</span> × <span class="number">1</span>]</div><div class="line">a.length =&gt; <span class="number">4</span>;</div><div class="line"><span class="comment">// 只是在原位置抹去了，但空位置还留着,长度不变</span></div></pre></td></tr></table></figure>
<p>通过 var 声明的变量是不能删除的，所以 没 var 生成的变量是可删除的。</p>
<h2 id="第5章-语句"><a href="#第5章-语句" class="headerlink" title="第5章 语句"></a>第5章 语句</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//适用空语句，初始化一个数组a</span></div><div class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; a.length; a[i++] = <span class="number">0</span>) ;</div></pre></td></tr></table></figure>
<p>变量声明语句会被 “提前”(hoisting) 至脚本或者函数的顶部。但是初始化的操作则还在原来var语句的位置执行，在声明语句之前变量的值是undefined 。</p>
<p>注意，多次声明同一个变量是无所谓的。<br>先声明且赋值后，再次声明时值不会被 undefined 定义。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> a;  <span class="comment">// =&gt; a == 1</span></div></pre></td></tr></table></figure>
<p>函数定义不能出现在if语句、while循环或其他任何语句中.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(initialize ; test ; increment)</div></pre></td></tr></table></figure>
<h2 id="第6章-对象"><a href="#第6章-对象" class="headerlink" title="第6章 对象"></a>第6章 对象</h2><p>对象直接量是一个表达式，这个表达式的每次运算都创建井初始化一个新的对象。<br>如果在一个重复调用的函数中的循环体内使用了对象直接量，它将创建很多新对象，井且每次创建的对象 的属性值也有可能不同。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o  = <span class="built_in">Object</span>.create(<span class="literal">null</span>);  <span class="comment">// =&gt; 会创建一个完全的空对象，没有从 Object 继承来的方法</span></div><div class="line"><span class="keyword">var</span> o1 = &#123;&#125;;	<span class="comment">// =&gt; 存在原型链，带有继承的方法</span></div><div class="line"></div><div class="line"><span class="comment">// 下面这两个效果一样</span></div><div class="line"><span class="keyword">var</span> o2 = <span class="built_in">Object</span>.create(&#123;&#125;);</div><div class="line"><span class="keyword">var</span> o3 = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype);</div></pre></td></tr></table></figure>
<h3 id="Object"><a href="#Object" class="headerlink" title="Object()"></a>Object()</h3><p>Object() 函数将各种值，转化为对应的对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>(<span class="number">1</span>)</div><div class="line"><span class="built_in">Number</span> &#123;[[PrimitiveValue]]: <span class="number">1</span>&#125;</div><div class="line"></div><div class="line"><span class="built_in">Object</span>(<span class="string">"a"</span>)</div><div class="line"><span class="built_in">String</span> &#123;<span class="number">0</span>: <span class="string">"a"</span>, <span class="attr">length</span>: <span class="number">1</span>, [[PrimitiveValue]]: <span class="string">"a"</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="Object-keys-Object-getOwnPropertyNames-区别"><a href="#Object-keys-Object-getOwnPropertyNames-区别" class="headerlink" title="Object.keys,Object.getOwnPropertyNames() 区别"></a>Object.keys,Object.getOwnPropertyNames() 区别</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">	<span class="keyword">var</span> o = &#123;</div><div class="line">		<span class="attr">p1</span>: <span class="number">12</span>,</div><div class="line">		<span class="attr">p5</span>: <span class="string">"ok"</span>,</div><div class="line">		<span class="attr">p6</span>: <span class="string">"ok"</span></div><div class="line">    &#125;		</div><div class="line">	<span class="built_in">Object</span>.keys(o)</div><div class="line">	<span class="comment">// ["p1","p5","p6"]</span></div><div class="line"></div><div class="line">	<span class="built_in">Object</span>.getOwnPropertyNames(o);</div><div class="line">	<span class="comment">// ["p1","p5","p6"]</span></div><div class="line"></div><div class="line"><span class="comment">// 对于一般对象来说，这两个方法返回的结果是一样的，只有涉及枚举，不可枚举的属性时才会有不同结果。</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">"hello"</span>,<span class="string">"world"</span>];</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.keys(a);</div><div class="line"></div><div class="line"><span class="comment">// ["0","1"]</span></div><div class="line"></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyNames(a)</div><div class="line"><span class="comment">// ["0","1","length"]</span></div><div class="line"></div><div class="line"><span class="comment">// lenght 是不可枚举属性，所以只出现在 getOwnPropertyNames 下.</span></div></pre></td></tr></table></figure>
<p>那么，问题来了，Object(对象呢？)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>(&#123;<span class="string">"a"</span>:<span class="number">1</span>&#125;)</div><div class="line"><span class="comment">// =&gt; 传对象反对象</span></div><div class="line"><span class="built_in">Object</span> &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;	</div><div class="line"></div><div class="line"><span class="comment">// 用处：</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">target</span>) </span>&#123;</div><div class="line">	<span class="comment">// 只有对象被返回原对象时还是自身</span></div><div class="line">	<span class="keyword">return</span> target === <span class="built_in">Object</span>(target);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第7章-数组"><a href="#第7章-数组" class="headerlink" title="第7章 数组"></a>第7章 数组</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line">a.length = <span class="number">0</span>;  <span class="comment">// 删除其余元素</span></div><div class="line">a =&gt; []</div></pre></td></tr></table></figure>
<p>如果想跳过”不存在”的元素而仍然要处理存在的 undefined（元素存在，只是没有赋值） 的元素，则</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, i &lt; a.length; i++ ) &#123;</div><div class="line">	<span class="keyword">if</span>(!(i <span class="keyword">in</span> a)) <span class="keyword">continue</span>; <span class="comment">// 跳过不存在的元素</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>即，判断属性存在不存在用‘’in’</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">a.join() <span class="comment">// 方法将数组中所有元素都转化为字符串井连接在一起，返回最后生成的字 符串。可以指定一个可选的字符串在生成的字符串中来分隔数组的各个元素</span></div><div class="line"></div><div class="line"><span class="built_in">Array</span>.reverse();  <span class="comment">// 逆向</span></div><div class="line"></div><div class="line"><span class="comment">// 假设第一个参数应该在前，则比较函数应该 return 一个小于0的数.</span></div><div class="line"><span class="built_in">Array</span>.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">true</span>/<span class="literal">false</span>;</div><div class="line">	&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Array</span>.concat <span class="comment">// 方法创建井返回一个新数组，它的元素包括调用concat() 的原始数组的 元素和concat() 的每个参数。</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line">a.concat(<span class="number">5</span>,<span class="number">6</span>); =&gt; [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"></div><div class="line"><span class="keyword">var</span> b = [<span class="number">2</span>,<span class="number">5</span>];</div><div class="line">b.concat[<span class="number">6</span>,[<span class="number">8</span>,[<span class="number">9</span>]]] =&gt; 创建并返回一个新数组 [<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,[<span class="number">9</span>]]; 元素组不变.</div><div class="line"></div><div class="line">Array.slice(startIndex,endIndex) <span class="comment">// 返回指定数组的一个片段或子数组。</span></div><div class="line">	</div><div class="line"><span class="built_in">Array</span>.splice 删除或插入数组</div><div class="line"></div><div class="line"><span class="comment">// 在尾部插入删除</span></div><div class="line"><span class="built_in">Array</span>.push(); <span class="comment">// 数组末尾添加，返回最新长度 return length</span></div><div class="line"><span class="built_in">Array</span>.pop(); <span class="comment">// 删掉并返回末尾值</span></div><div class="line"></div><div class="line"><span class="comment">// 在头部插入删除</span></div><div class="line"><span class="built_in">Array</span>.unshift(); <span class="comment">// 在头部插入，并返回新长度</span></div><div class="line"><span class="built_in">Array</span>.shift();  <span class="comment">// 在头部删除并返回头部值</span></div><div class="line"></div><div class="line">forEach</div><div class="line"></div><div class="line">map <span class="comment">// 老值对新值 即为 map</span></div><div class="line"></div><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];                              ==&gt; [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"></div><div class="line">b = a.map( <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x*x; &#125;); ==&gt; [<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>]</div><div class="line">==&gt; map</div><div class="line"></div><div class="line"></div><div class="line">fliter() 方法返回的数组元素是调用的数组的一个子集。</div><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line">a.filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> x &lt; <span class="number">3</span>;&#125;); =&gt;  [<span class="number">1</span>,<span class="number">2</span>]</div><div class="line"></div><div class="line">every() 和some()方法是数组的逻辑判定:它们对数组元素应用指定的函数进行判定，返</div><div class="line">回<span class="literal">true</span>或<span class="literal">false</span> 。</div><div class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">a.every(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x &lt; <span class="number">10</span>; &#125;) <span class="comment">// =&gt;true: 所有的值&lt;10</span></div><div class="line">a.every(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x % <span class="number">2</span> === <span class="number">0</span>; &#125;) <span class="comment">// =&gt; false: 不是所有的值都是偶数 一旦everyO 和someO 确认该返回什么值它们就会停止遍历数组元素</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 检测是否数组</span></div><div class="line"><span class="built_in">Array</span>.isArray([])</div></pre></td></tr></table></figure>
<p>使用instanceof的问题是在Web浏览器中有可能有多个窗口或窗体(frame) 存在。每个<br>窗口都有自己的JavaScript环境，有自己的全局对象。<br>因此一个窗体中的对象将不可能是另外窗体中的构造函数的实例.<br>跨窗体的问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.toString.call([]);  =&gt; <span class="string">"[object Array]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;);  =&gt; <span class="string">"[object Object]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">''</span>);  =&gt; <span class="string">"[object String]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Date</span>) =&gt; <span class="string">"[object Date]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>) =&gt;  <span class="string">"[object Null]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>) =&gt; <span class="string">"[object Undefined]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(alert) =&gt; <span class="string">"[object Function]"</span></div></pre></td></tr></table></figure>
<p>一种常常完全合理的看法把拥有一个数值length属性和对应非负整数属性的对象看<br>做一种类型的数组。</p>
<p>虽然不能在它们之上直接调用数组方能或者期望length属性有什么特殊的行为，但是仍然可以用针对真正数组遍历的代码来遍历它们。<br>既然类数组对象没有继承自Array.prototype ，那就不能在它们上面接调用数组方法。尽管如此，可以间接地使用Function.call方单调用:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">"abc"</span>;</div><div class="line">str.charAt(<span class="number">0</span>); =&gt; <span class="string">"a"</span></div><div class="line">str[<span class="number">0</span>];        =&gt; <span class="string">"a"</span></div></pre></td></tr></table></figure>
<p>字符串的行为类似于数组的事实使得通用的数组方撞可以应用到字符串上。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> s = <span class="string">"javascript"</span></div><div class="line"><span class="built_in">Array</span>.prototype.join.call(s,<span class="string">'-'</span>); =&gt; <span class="string">"j-a-v-a-s-c-r-i-p-t"</span> <span class="comment">//NB!</span></div></pre></td></tr></table></figure>
<p>// 字符串是不可变值,把它们当做数组看时,它们是只读的,更改无效</p>
<h2 id="第8章-函数"><a href="#第8章-函数" class="headerlink" title="第8章 函数"></a>第8章 函数</h2><h2 id="第9章-类和模块"><a href="#第9章-类和模块" class="headerlink" title="第9章 类和模块"></a>第9章 类和模块</h2><h2 id="第10章-正则"><a href="#第10章-正则" class="headerlink" title="第10章 正则"></a>第10章 正则</h2><h2 id="第11章"><a href="#第11章" class="headerlink" title="第11章"></a>第11章</h2><h2 id="第12章"><a href="#第12章" class="headerlink" title="第12章"></a>第12章</h2><h2 id="第13章"><a href="#第13章" class="headerlink" title="第13章"></a>第13章</h2><h2 id="第14章"><a href="#第14章" class="headerlink" title="第14章"></a>第14章</h2><p>一个Web浏览器窗口可能在桌面上包含多个标签页。每一个标签页都是独立的”浏览上下文” (browsing context) ，每一个上下文都有独立的Window对象，而且相互之间互不干扰。</p>
<p>一个窗口或标签页中的脚本可以打开新的窗口或标签页，当一个脚本这样做时，这样多个窗口或窗口与另一个窗口的文档之间就可 以互操作.</p>
<p><iframe>所创建的嵌套浏览上下文是用它自己的Window对象所表示的。</iframe></p>
<p>对于客户端 JavaScript来说，窗口、标签页、iframe和框架都是浏览上下文, 对于JavaScript来说，它<br>们都是Window对象。和相互独立的标签页不同，嵌套的浏览上下文之间井不是相互独 立的。在一个窗体中运行的JavaScript程序总是可以看到它的祖先和子孙窗体，尽管脚本 查看这些窗体中的文档受到同据策略的限制。</p>
<p>因为Window是客户端JavaScript的全局对象，每个窗口或窗体都包含独立的JavaScript执行上下文。</p>
<p>open() 的第一个参数是要在新窗口中显示的文档的URL。<br>open() 的第二个参数是新打开的窗口的名字。如果指定的是一个已经存在的窗口的名字<br>(井且脚本允许跳转到那个窗口) ，会直接使用已存在的窗口</p>
<p>在 iframe 中，可以使用保留的名字”_top” (顶级祖先窗口)和”_parent” (直接父级窗口)来获取彼此的浏览上下文。</p>
<p>窗口的名字是非常重要的，因为它允许openO 方法引用已存在的窗口，并同时可以<br>作为<a>和dorm&gt; 元素上HTML target属性的佳，用来表示引用的文档(或表羊提<br>交结果)应该显示在命名的窗口中。这个target属性的值可以设直为”_blank” 、<br>“_parent” 或”_top” ，从而使引用的文档显示在新的空白窗口、父窗口/窗体或<br>顶层窗口中。</a></p>
<p>open() 的第三个可选参数是一个以逗号分隔的列表，包含大小和各种属a性</p>
<p>Window对象的方法 open() 返回代表新创建的窗口的Window对象。而且<br>这个新窗口具有opener属性，该属性可以打开它的原始窗口</p>
<p>top属性是一个通用的快捷方式，无论一个窗体被嵌套了几层，它的top属性引用的都是指向包含它的顶级窗口</p>
<p>窗体是通过<iframe>元素创建的.</iframe></p>
<p><iframe>元素有contentWindow属性，引用该窗体的Window对象，所以此窗体的Window 对象就是:<br>var childFrame = document.getElementById(“fl”).contentWindow;</iframe></p>
<p>每个Window对象都有一个frames属性，它引用自身包含的窗口或窗体的子<br>窗体。frames属a性引用的是类数组对象，井可以通过数字或窗体名进行索引。</p>
<p>每个Window都有自己的原型对象，这意味着instanceof操作符不能跨窗口<br>工作。</p>
<p>我们称为”Window对象”的对象实际上不是全局对象，而<br>是全局对象的一个代理。</p>
<p>前段时间我还给人讲过一句话：<br>为了玩刀而上战场的人大都死于刀下，临死时怪自己的刀没有选好。<br>为了杀人而上战场的人大都成了将军，临死时放下屠刀立地成佛了。<br>所以，程序员要想成佛，不但要追求编程境界，还要学会在残酷的现实中拼杀，解决具体的问题才行。</p>
<h2 id="第15章"><a href="#第15章" class="headerlink" title="第15章"></a>第15章</h2><h2 id="第16章"><a href="#第16章" class="headerlink" title="第16章"></a>第16章</h2><h2 id="第17章"><a href="#第17章" class="headerlink" title="第17章"></a>第17章</h2><h2 id="第18章"><a href="#第18章" class="headerlink" title="第18章"></a>第18章</h2><h2 id="第19章"><a href="#第19章" class="headerlink" title="第19章"></a>第19章</h2><h2 id="第20章"><a href="#第20章" class="headerlink" title="第20章"></a>第20章</h2><h2 id="第21章"><a href="#第21章" class="headerlink" title="第21章"></a>第21章</h2><h2 id="第22章"><a href="#第22章" class="headerlink" title="第22章"></a>第22章</h2><p>既然类数组对象没有继承自Array.prototype ，那就不能在它们上面直</p>

	
	</div>
  <a type="button" href="/2013/06/30/2013-06-30-javascript 权威指南笔记/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2013-02-23 </div>
			<div class="article-title"><a href="/2013/02/23/2014-12-23-mustache模板引擎/" >mustache模板引擎</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<blockquote>
<p>What could be more logical awesome than no logic at all?</p>
</blockquote>
<p>mustache.js 是 mustache 模板引擎的 js 实现. mustache 支持多种语言,包括 java,php 等. </p>
<p>mustache 的特点是没有复杂的流程控制语句,模板整体看起来清爽自然, 使用数据模型对模板中的标签进行替换.</p>
<p>文件加载,mustache.js 依赖于 jQuery</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bower_components/jquery/dist/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bower_components/mustache/mustache.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>使用示例</p>
<ul>
<li>demo_1</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- demo_1 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"target_1"</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">"template_1"</span> <span class="attr">type</span>=<span class="string">"x-tmpl-mustache"</span>&gt;</span><span class="handlebars"><span class="xml"></span></span></div><div class="line">    Hello <span class="template-variable">&#123;&#123; name &#125;&#125;</span><span class="xml"></span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">loadUser</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> template = $(<span class="string">"#template_1"</span>).html();</div><div class="line">        Mustache.parse(template);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> rendered = Mustache.render(template, &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"xin"</span></div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        $(<span class="string">"#target_1"</span>).html(rendered);</div><div class="line">    &#125;</div><div class="line">    loadUser();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>demo_2 </li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">&lt;!-- demo_2 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"target_2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> view = &#123;</div><div class="line">        <span class="attr">title</span>: <span class="string">"Codinglion"</span>,</div><div class="line">        <span class="attr">languages</span>: &#123;</div><div class="line">            <span class="attr">JAVA</span>: <span class="string">'know it'</span>,</div><div class="line">            <span class="attr">JS</span>: <span class="string">'expert'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">score</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">90</span> + <span class="number">3</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> output = Mustache.render(<span class="string">"&#123;&#123; title &#125;&#125; learn: &#123;&#123;languages.JAVA&#125;&#125;, &#123;&#123;languages.JS&#125;&#125;. &#123;&#123;score&#125;&#125; score"</span>, view);</div><div class="line">    $(<span class="string">"#target_2"</span>).html(output);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>demo_3 </li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">   <span class="comment">&lt;!-- demo_3 --&gt;</span></div><div class="line"><span class="comment">&lt;!-- model 加入控制 --&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"target_3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">       <span class="keyword">var</span> tags = &#123;</div><div class="line">           <span class="string">"beatles"</span>: [&#123;</div><div class="line">               <span class="string">"firstName"</span>: <span class="string">"John"</span>,</div><div class="line">               <span class="string">"lastName"</span>: <span class="string">"Lennon"</span></div><div class="line">           &#125;, &#123;</div><div class="line">               <span class="string">"firstName"</span>: <span class="string">"Paul"</span>,</div><div class="line">               <span class="string">"lastName"</span>: <span class="string">"McCartney"</span></div><div class="line">           &#125;, &#123;</div><div class="line">               <span class="string">"firstName"</span>: <span class="string">"George"</span>,</div><div class="line">               <span class="string">"lastName"</span>: <span class="string">"Harrison"</span></div><div class="line">           &#125;, &#123;</div><div class="line">               <span class="string">"firstName"</span>: <span class="string">"Ringo"</span>,</div><div class="line">               <span class="string">"lastName"</span>: <span class="string">"Starr"</span></div><div class="line">           &#125;],</div><div class="line">           <span class="string">"name"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">               <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">" "</span> + <span class="keyword">this</span>.lastName;</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">var</span> output = Mustache.render(<span class="string">" &#123;&#123;#beatles&#125;&#125;	* &#123;&#123;name&#125;&#125;&lt;br&gt; &#123;&#123;/beatles&#125;&#125; "</span>, tags);</div><div class="line">       $(<span class="string">"#target_3"</span>).html(output);</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2013/02/23/2014-12-23-mustache模板引擎/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2012-12-30 </div>
			<div class="article-title"><a href="/2012/12/30/2012-12-30-html5待完善笔记/" >html5待完善笔记</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="H5的组成"><a href="#H5的组成" class="headerlink" title="H5的组成"></a>H5的组成</h2><ol>
<li>语义(semanic),新增 header、footer、nav、section 等含有语义的标签，以及一系列含有语义的标签属性。</li>
<li>离线&amp;存储(offline&amp;storage),主要包括 LocalStorage、IndexDB、FileAPI。</li>
<li>设备访问(Device Access)，定位信息已经应用，其他还有视频、音频流（语音流），移动设备的传感器(如方向出传感器)。</li>
<li>网络连接(Connectivity),增加 Web Socket，服务器数据推送。</li>
<li>多媒体(Multimedia), 增加 video、audio 标签，提供了原生的视频、音频访问。</li>
<li>图形接口，增加了 canvas，提供了2d，3d GDI，现已有第三方 WebGL 可以提供 3D 加速渲染。</li>
<li>性能整合(Performance &amp; Integration), WebWorkers 实现脚本后台运行，并提供前后台交互接口， XMLHttpRequest 2 提供更好的网路 IO；</li>
<li>CSS3。</li>
</ol>
<p>##语义元素</p>
<p>构造网页的新方式。要想要网页的结构更加清晰，需要适用 html5 中的新的语义元素（semantic element）。这些内容为它们标注的内容赋予了额外的含义。</p>
<p>最关键的是要理解<time>元素没有任何内置的样式。它包含的内容与普通文本没有区别。HTML5 新增的大部分元素都是语义元素。</time></p>
<p>既然它们不会改变网页的外观为什么适用呢？</p>
<ol>
<li>容易维护和修改。语义化标记可以传到结构信息。</li>
<li>无障碍性。</li>
<li>搜索引擎优化。</li>
</ol>
<p>HTML5 是指网页超文本技术工作小组（WHATWG）规定的标记语言和API 集合。HTML5 已经成为一套标准化技术和新兴技术的代名词。这个新兴技术极大地拓展了传统的Web 堆栈”（HTML，CSS 和JavaScript）。</p>
<p>触摸和移动东西，是人类做的最基本的事情之一。</p>
<p>这是人们所期望使用触摸界面的方法。</p>
<p>WHATWG 决定不定义HTML5 的正式版本。</p>
<p>我会想，用户界面只需让人感觉快，而无需真的快。只需及时响应—立即响应用户，让他知道有反应了。</p>
<p>用户在屏幕上用手势操作时，不能等到手势完毕再做反馈，因为根据用户的了解，它们甚至会认为手势没有生效！</p>
<p>但只用HTML5 就足以在触屏设备上做出优秀的用户界面。</p>
<p>这种设计理念仅仅是一个观念，即首先针对移动设备设计，然后通过调整使它适应桌面设备。<br>（Luke Wroblewski 的书《Mobile First》是一部伟大的开山之作.</p>
<p>Internet Explorer 8 不支持媒体查询. =&gt; response.js</p>
<p>浏览器解析 CSS 选择器是从右往左的。这意味着，如果它看到一个如“nav ul li a”的规则时，它首先必须获得所有匹配a 的元素列表，然后检查看它是不是li 的后代，再按相同规则继续检查。后代选择器虽然看起来方便，但它的性能开销是最大的。</p>
<h3 id="关于-session，cookie，jsessionid-的关系。"><a href="#关于-session，cookie，jsessionid-的关系。" class="headerlink" title="关于 session，cookie，jsessionid 的关系。"></a>关于 session，cookie，jsessionid 的关系。</h3><p>session 就是 httpsession，服务器端的，cookie 就是浏览器端的。</p>
<p>在 servlet 里使用了         </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">HttpSession session = request.getSession();</div><div class="line">String sessionid = session.getId();</div></pre></td></tr></table></figure>
<p>获取了 session ，即使没有在 session 里设置数据，那么在响应里也会去设置 cookie。<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">Server:</span>Apache-Coyote/<span class="number">1.1</span></div><div class="line">Set-<span class="string">Cookie:</span>JSESSIONID=<span class="number">3</span>B44FEAE6B662D94F4F23DD8EC2D2697; Path=<span class="regexp">/nodeA/</span>; HttpOnly</div></pre></td></tr></table></figure></p>
<p>并且有意思的是：如果在浏览器里把 cookie 删掉，那么下一次给服务器发请求，那么必然不会带着 cookie。所以服务器在没有 cookie 的请求中会在响应(因为没有把 cookie 中的 sessionid 带上，那么服务器认为这个客户端还没有对应的 session，于是发一个 session 给这个客户端，并且在返回响应的时候顺便设置在 cookie 上)的时候给带上 cookie（sessionid）。<br>如果客户端在请求的时候把 cookie(seessionid)带上了，那么服务器就不会在响应中设置 cookie 了。</p>
<p>如果浏览器把 cookie 禁用了，那么新的 cookie 是存不到浏览器的，响应的时候带着 cookie 也不管用，存不上。  但是禁用cookie 后，浏览器中存储的囤积的还是可以发送出去的。 </p>
<p>那么问题来了，浏览器把 cookie 禁用了怎么办？ 请求的时候把 sessionid 存放到,貌似没有什么好办法，因为禁用 cookie，服务器的 sessionid 传不进来。<br>在禁用 cookie 的情况下，taobao 登陆不上去，页面显示有问题。 amazon，jd 直接在登陆界面提示，不设置 cookie 登陆不进去。</p>
<p>Rails创始人DHH在Twitter上问：JavaScript 不能获得 HTTP header 有什么历史原因？然后被人转给了 JavaScript 的作者 Brendan。Brendan回答说没什么原因，当时我没时间写了。<br>可以确定的是，XHR（2）可以获得 header。</p>
<p>使用报头，缓存代理会被告知在保持状态和重新获取新内容之前，需要缓存保留该资源多长时间。最简单的处理方法是使用Expires 报头。<br>Expires: Thu, 15 Apr 2025 20:00:00 GMT它的意图是使浏览器（或一个可缓存的代理）将文件保存下来，直到超过缓存大小的上限。<br>浏览器可以发出一个包含If-Modified-Since 报头的请求。如果服务器上的文件没有发生改变服务器就会发送一个304 Not Modified 的响应，这样浏览器就会使用缓存中已存在的文件，而不是从服务器重新获取。</p>
<p>ETag 是一种唯一标识符，一般通过哈希算出。它只需要比较一段简短的字符，就能在没有日期信息的情况下验证缓存是否与服务器上的文件相同。</p>
<p>localStorage 大小限制：</p>
<blockquote>
<p>User agents should limit the total amount of space allowed for storage areas.</p>
</blockquote>
<p>o</p>

	
	</div>
  <a type="button" href="/2012/12/30/2012-12-30-html5待完善笔记/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2012-11-12 </div>
			<div class="article-title"><a href="/2012/11/12/2012-11-12-css的居中问题/" >css的居中问题</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h1 id="html-居中问题"><a href="#html-居中问题" class="headerlink" title="html 居中问题"></a>html 居中问题</h1><h2 id="文本居中"><a href="#文本居中" class="headerlink" title="文本居中"></a>文本居中</h2><p>设置文字内容元素的 height 与 ine-height 属性。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.text</span> &#123;</div><div class="line">	<span class="attribute">height</span>: <span class="number">25px</span>;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">25px</span>;</div><div class="line">	<span class="attribute">text-align</span>: center;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="已知宽高的居中"><a href="#已知宽高的居中" class="headerlink" title="已知宽高的居中"></a>已知宽高的居中</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-class">.popup</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">400px</span>; <span class="comment">/* 文本垂直居中 */</span></div><div class="line">	<span class="attribute">text-align</span>:center;  <span class="comment">/* 文本水平居中*/</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;	</div><div class="line">	<span class="comment">/*</span></div><div class="line">	   不管屏幕多大，先找到中心，然后上挪自己高度的一半</div><div class="line">	 */</div><div class="line">    <span class="attribute">top</span>: <span class="number">50%</span>; </div><div class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</div><div class="line">    <span class="attribute">margin-top</span>: -<span class="number">200px</span>;</div><div class="line">    <span class="attribute">margin-left</span>: -<span class="number">250px</span>;</div><div class="line">    <span class="attribute">border</span>:<span class="number">1px</span> solid red;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popup"</span>&gt;</span> 自古逢秋悲寂寥，我言秋日胜春朝 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2012/11/12/2012-11-12-css的居中问题/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2012-11-12 </div>
			<div class="article-title"><a href="/2012/11/12/2012-11-12-base64/" >base64编码</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="什么是-base64？"><a href="#什么是-base64？" class="headerlink" title="什么是 base64？"></a>什么是 base64？</h2><p>Base64是一种基于64个可打印字符来表示二进制数据的表示方法。<strong>由于2的6次方等于64，所以每6个比特为一个单元，对应某个可打印字符。三个字节有24个比特，对应于4个Base64单元，即3个字节需要用4个<code>可打印字符</code>来表示。</strong>它可用来作为电子邮件的传输编码。在Base64中的可打印字符包括字母A-Z、a-z、数字0-9，这样共有62个字符，此外两个可打印符号在不同的系统中而不同。一些如uuencode的其他编码方法，和之后binhex的版本使用不同的64字符集来代表6个二进制数字，但是它们不叫Base64。</p>
<p>Base64索引表：</p>
<pre><code>数 字符         
0    A    16    Q    32    g    48    w
1    B    17    R    33    h    49    x
2    C    18    S    34    i    50    y
3    D    19    T    35    j    51    z
4    E    20    U    36    k    52    0
5    F    21    V    37    l    53    1
6    G    22    W    38    m    54    2
7    H    23    X    39    n    55    3
8    I    24    Y    40    o    56    4
9    J    25    Z    41    p    57    5
10    K    26    a    42    q    58    6
11    L    27    b    43    r    59    7
12    M    28    c    44    s    60    8
13    N    29    d    45    t    61    9
14    O    30    e    46    u    62    +
15    P    31    f    47    v    63    /
</code></pre>
	
	</div>
  <a type="button" href="/2012/11/12/2012-11-12-base64/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2012-10-30 </div>
			<div class="article-title"><a href="/2012/10/30/2012-10-30-float-and-absolute/" >float and absoulte</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="float-amp-absolute-共性："><a href="#float-amp-absolute-共性：" class="headerlink" title="float &amp; absolute 共性："></a>float &amp; absolute 共性：</h2><ol>
<li><p>包裹性<br> 包裹性换种说法就是让元素inline-block化，例如一个div标签默认宽度是100% 显示的，但是一旦被absolute属性缠上，则100%默认宽度就会变成自适应内部元素的宽度。</p>
</li>
<li><p>兼容 IE 半透明<br>background:rgba(0,0,0,0.5);<br>filter: progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7F000000,endcolorstr=#7F000000);</p>
</li>
</ol>
<ol>
<li>位置<br>　　position:relative和position:absolute都可以改变元素在文档中的位置，都能激活元素的left、top、right、bottom和z-index属性。（默认这些属性未激活，设置了也无效）</li>
</ol>
<p>　　设置position:relative和position:absolute都会让元素浮起来，会改变正常情况下的文档流。</p>
<p>　　不同：</p>
<p>　　position : relative 会保留自己在z-index:0层的占位，left、top、right、bottom值是相对于自己在z-index层的位置。</p>
<p>　　position : absolute 会完全脱离文档流，不在z-index:0层保留占位符，其left、top、right、bottom值是相对于自己最近的一个设置了position:relative或position:absolute的祖先元素的，如果祖先元素全都没有设置，那么就相对于body元素。</p>
<p>　　float 也能改变文档流，不同的是，float不会让元素浮到另一个元素上面，它仍然让元素在z-index:0层排列，只能通过float:left和float:right来控制元素在同一层里”左浮”和”右浮”。float会改变正常的文档流排列，影响周围元素。</p>
<p>　　position : absolute 和 float 会隐式的改变 display 类型，不论之前什么类型的元素（display:none除外）,只要设置了position:absolute和float中任何一个，都会让元素以display:inline-block的方式显示：可以设置长宽，默认宽度并不占满父元素。<br>就算显示的设置display:inline或者display:block，也仍然无效（IE6双倍边距BUG利用display:inline解决）。</p>
<p>　  position:relative 却不会隐式改变display类型。</p>
<h3 id="浮动的详细内幕"><a href="#浮动的详细内幕" class="headerlink" title="浮动的详细内幕"></a>浮动的详细内幕</h3><p>理解浮动，要理解包含块(containing block), 浮动元素的包含块是其最近的块级祖先元素。</p>
<p>动元素会生成一个块级框，而不论这个元素本身是什么。如果让一个链接浮动，即使该链接元素本身是行内元素，通常会生成一个（===行内框===），但只要它是浮动的，就会生成一个块级框。</p>
<ol>
<li>浮动元素的左(右) 外边界不能超出其包含在包含块的左(或右)内边界。</li>
<li>如果一个元素已经浮动，而另一个元素已经在那个位置，则后放置的元素则挨着前一个浮动元素的右外边界放置。</li>
</ol>

	
	</div>
  <a type="button" href="/2012/10/30/2012-10-30-float-and-absolute/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2012-10-02 </div>
			<div class="article-title"><a href="/2012/10/02/2012-10-02-javascript读书笔记/" >javascript读书笔记</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>##typeof<br>typeof null =&gt; “object”</p>
<p>null 是一个特殊的对象值，含义是”非对象”。实际上，通常认为 null 是它自有类型的唯一一个成员。<br>undefined 用未定义标识更深层次的“空值”,它是变量的一种取值，标识变量没有初始化。<br>undefined 是预定义的全局变量， 它和 null 不一样，null是关键字。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> =》 <span class="literal">undefined</span> 标识这个值是这个类型的唯一成员。</div><div class="line"><span class="literal">undefined</span> == <span class="literal">null</span> =》 <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>或许认为undefined是表示系统级的、出乎意料的或类似错误的值的空缺，而null是表示程序级的、正常的或在意料之中的值的空缺</p>
<p>##全局对象是window</p>
<p>对象的比较并非值的比较，对象值都是引用，对象的比较均是引用的比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> s = <span class="built_in">String</span>(<span class="string">'abc'</span>);</div><div class="line">s.a = <span class="number">1</span>;  <span class="comment">// 临时对象,随机销毁</span></div><div class="line">s = &gt; <span class="string">"abc"</span> </div><div class="line"></div><div class="line"><span class="keyword">var</span> S = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abc'</span>);</div><div class="line">S.a = <span class="number">3</span>;</div><div class="line">S = &gt; &#123;<span class="attr">a</span>: <span class="number">3</span>&#125;</div></pre></td></tr></table></figure>
<p>表达式(expression) JavaScript 中的一个短语， JavaScript解释器会将其计算(evaluate) 出一个结果。程序中的常量是最简单的一类表达式。<br>变量名也是一种简单的表达式，它的值就是赋值给变量的值。</p>
<p>##数组初始化</p>
<p>会为空缺的位置赋值undefined</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var a = [<span class="number">1</span>,,<span class="number">3</span>];  <span class="comment">// a.lengh = 3;</span></div></pre></td></tr></table></figure>
<p>留下单个逗号，这时并不会创建一个新的值为undefined的元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,,<span class="number">3</span>,]; <span class="comment">// a.length = 3;</span></div><div class="line"></div><div class="line">a[<span class="number">100</span>] = <span class="number">1</span>; <span class="comment">// a.length = 101;</span></div></pre></td></tr></table></figure>
<p>函数定义表达式可以称为“函数直接量”，对象初始化表达式也可以称为“对象直接量”</p>
<p>在”.”和”[“之前的表达式总是会首先计算。如果计算结果是null或者undefined ，表达式会抛出一个类型错误异常。</p>
<p>当对调用表达式进行求值的时候，首先计算函数表达式，然后计算参数表达式，得到一组参数值。<br>如果函数表达式的值不是一个可调用的对象，则抛出一个类型错误异常。</p>
<p>传入函数的对象实参，在函数内部是可以修改的。<br>实参与形参 === true</p>
<p>对象创建表达式(object creation expression) 创建一个对象井调用一个函数(这个函数称做构造函数)初始化新对象的属性。</p>
<p>对象创建表达式和函数调用表达式非常类似，只是对象创建表达式之前多了一个关键字new:</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="type">Object</span>()</div><div class="line"><span class="keyword">new</span> <span class="type">Point</span>(<span class="number">2</span> ,<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>如果一个对象创建表达式不需要传入任何参数给构造函数的话，那么这对空圆括号是可以省略掉的:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Object</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Date</span></div></pre></td></tr></table></figure></p>
<p>lval是left-value的简写，意思是”左值”  在左边被赋给值的</p>
<p>逗号表达式<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var a  = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// =&gt; a = 3; 返回最后一个值</span></div></pre></td></tr></table></figure></p>
<h2 id="iframe-跨域自动调整高度"><a href="#iframe-跨域自动调整高度" class="headerlink" title="iframe 跨域自动调整高度"></a>iframe 跨域自动调整高度</h2><p>获得父页面的地址栏的绝对地址。然后，就是改变父页面的地址：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> hostUrl = <span class="built_in">window</span>.location.hash.slice(<span class="number">1</span>);</div><div class="line">hostUrl += <span class="string">"#height="</span> + <span class="number">1294</span>;</div><div class="line"><span class="built_in">window</span>.top.location = hostUrl;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> l= <span class="built_in">document</span>.body.scrollLeft &gt; <span class="number">0</span> ?</div><div class="line">	   <span class="built_in">document</span>.body.scrollLeft : </div><div class="line">	   <span class="built_in">document</span>.documentElement.scrollLeft;<span class="comment">//获取鼠标所在地的左偏移</span></div></pre></td></tr></table></figure>
<p>Request Headers:<br>Provisional(暂时的，临时的) headers are shown</p>
<p>出现在这个语句是因为去获取该资源的请求其实还没有真的发生，所以 Header 里显示的是临时的伪信息，直到服务器真的有响应返回，这里的 Header 信息才会被更新为真实的。</p>
<p>网络工具：<br>chrome://net-internals/</p>
<h2 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h2><p>抵消，补偿</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">offsetHeight = <span class="number">2</span>*border+content+scrollbar; </div><div class="line"></div><div class="line">offset 位置相对于文档，positon 相对于父元素。</div><div class="line"></div><div class="line">jQ:</div><div class="line">stringObject.replace(regexp/sbustr,replacement);</div><div class="line"></div><div class="line">contents()/contentDocument</div></pre></td></tr></table></figure>
<h2 id="关于距离"><a href="#关于距离" class="headerlink" title="关于距离"></a>关于距离</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x = e.pageX;</div><div class="line">y = e.pageY;</div><div class="line">$(<span class="string">"span"</span>).text(<span class="string">"pageX:"</span>+x+<span class="string">", pageY:"</span>+y+<span class="string">", clientX:"</span>+e.clientX+<span class="string">", clientY:"</span>+e.clientY+<span class="string">", screenX:"</span>+e.screenX+<span class="string">", screenY"</span>+e.screenY);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pageX/pageY:      相对于视口，出现了滚动条，滚上去的部分也计算。</div><div class="line">clientX/clientY： 可看到的部分的距离，滚上去的部分不算，只算到浏览器窗口的上檐。</div><div class="line">screenX/screenY:  相对于显示器屏幕的左上角计算</div></pre></td></tr></table></figure>
<h3 id="Element-clientHeight"><a href="#Element-clientHeight" class="headerlink" title="Element.clientHeight"></a>Element.clientHeight</h3><blockquote>
<p>The Element.clientHeight read-only property returns the inner height<br>of an element in pixels,包括padding，但是没有水平的滚动条，没有 border，没有 margin。</p>
</blockquote>
<p>element.innerHeight 兼容性考虑，ie9开始支持。</p>
<h2 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box-sizing"></a>box-sizing</h2><p>box-sizing: border-box;  添加border 不会往外涨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$( <span class="built_in">window</span> ).height();  <span class="comment">// returns height of browser viewport, 即使有滚动部分，也不算上</span></div><div class="line">$( <span class="built_in">document</span>).height(); <span class="comment">// returns height of HMTL document height,带滚动部分的高度</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;   <span class="comment">// 由于 js 执行环境的不确定，可能是 es3/es5, 可能支持标准特性的 js 引擎也可能不支持标准特性的 js 引擎。所以适用</span></div><div class="line"><span class="meta">"use strict"</span> 可以禁用一些容易受限或出问题的特性。</div></pre></td></tr></table></figure>
<p>事实上. JavaScript 中所有的数字都是双精度浮点数。64位的。</p>
<p>位算术运算符比较特殊，隐式地转换为32 位整数后进行运算。</p>
<p>(8).toString(8);  // =&gt; “10” 转8进制<br>(8).toString(2);  // =&gt; “1000” 转2进制</p>
<p>只有整数数字才能比相等。</p>
<p>在对象字面量和数组字面量的基础上，JSON格式的语法具有很强的表达能力，但对其中的值也有一定的限制。例如，JSON规定所有对象键以及所有字符串值，都必须包含在双引号中。而且，函数也不是有效的JSON值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 通过 xmlhttprequest 获得 header 响应。</span></div><div class="line"><span class="keyword">var</span> client = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">client.open(<span class="string">"GET"</span>,<span class="string">'xx.txt'</span>,<span class="literal">true</span>); <span class="comment">// (method, url [, async = true]) 默认采用异步</span></div><div class="line">client.send();</div><div class="line">client.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span>(<span class="keyword">this</span>.readyState == <span class="number">2</span>) &#123;</div><div class="line">		<span class="keyword">var</span> contentType = client.getResponseHeader(<span class="string">"Content-Type"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>事件处理中 return false 意味着同时调用event.preventDefault()和event.<br>stopPropagation()。因此要想停止事件冒泡，我们还得再调用后者。</p>
<p>位运算符要求它的操作数是整数，这些整数表示为32位整型而不是64位浮点型。必要<br>时，位运算符首先将操作数转换为数字，井将数字强制表示为32位整型。</p>
<p>当一个 Ajax 请示被发送，所有的请求都会附带主域的cookie 信息一起发送。，对于远程服务来讲，请求如果是来自于登录后的用户，若没有同源策略的限制，攻击者就有可能获取你的数据。</p>
<p>同源：域名，子域名，端口。</p>
<p>HttpRequest</p>
<p>Refer: 请求从哪哪来</p>
<p>CORS</p>
<p>在跨域中，Ajax 提出了 CORS( cross-origin resource sharing ), CORS 打破同源策略的限制，赋予了前端代码访问可信的远程服务的权限。加上这个可以跨域，但是发送请求时不会带上 cookie。</p>
<p>HTML5 本地存储的规范源自HTML5 Web Storage specification（<a href="http://www.w3.org/" target="_blank" rel="external">http://www.w3.org/</a><br>TR/webstorage），其中包含两类：local storage 和session storage。浏览器关闭后local<br>storage 数据也能够保持，而session storage 数据则不存在了。浏览器端所存储的数据是<br>以域名分隔开的，某个域中的脚本存储的数据只能被这个域读取。<br>如果你存储的数据超出了上限（通常是每个域名5MB）。</p>
<p>如果传入一个函数，则在document 上绑定一个ready 事件监听函数，当DOM 结构加载完成时执行。<br>ready 触发要早于load 事件。ready 事件是 DOMContentLoaded 事件、onreadystatechange 事件和函数doScrollCheck() 的统称.</p>
<p>如果传入一个 jQuery 对象，则创建一个 jQ 对象副本，副本与源对象引用相同的 dom 元素。</p>
<p>一旦单一的事件有着多重的后果，这种“一事一处理”的方式将迫使处理器规模急剧膨胀。</p>
<p>topic = id &amp;&amp; topics[ id ];</p>
<p>Deferred 就是Promise！更准确地说，Deferred 是Promise 的超集，它比Promise 多了一项关键特性：<br>可以直接触发。纯 Promise 实例只允许添加多个调用，而且必须由其他什么东西来触发这些调用。<br>它们的底层是 Callbacks.</p>
<p>Promise 对象会一直保持挂起状态，直到被执行或拒绝。</p>
<p>简单总结一下，Promise 对象接受 3 种回调形式：done、fail 和 progress。<br>执行(resolve) Promise 对象时，运行的是done 回调；拒绝(reject) Promise 对象时，运行的是fail 回调;<br>对处于挂起状态的Deferred 对象调用 notify 时，运行的是progress 回调.</p>
<p>获得jQuery 中的Promise 对象：或者生成一个$.Deferred 实例，或者进行一次可返回 Promise 对象的 API 调用。</p>
<p>“请针对这个 Promise(getPromise) 对象给我一个回调，我会归还一个 Promise (postPromise) 对象以表示回调运行的结果”</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> getPromise = $.get(<span class="string">'/query'</span>);</div><div class="line"><span class="keyword">var</span> postPromise = getPromise.pipe(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;	<span class="keyword">return</span> $.post(<span class="string">'/search'</span>, data);&#125;);</div></pre></td></tr></table></figure>
<p>// deep: 是否克隆子节点，true 克隆子节点，false 只克隆指定节点。<br>var dupNode = node.cloneNode(deep);</p>
<p>// Returns an object reference to the window object.<br>// 真的有这个属性<br>window.self</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XMLHttpRequest cannot <span class="keyword">load</span> <span class="keyword">http</span>://localhost:<span class="number">8080</span>/nodeA/Here. <span class="keyword">No</span> <span class="string">'Access-Control-Allow-Origin'</span> header <span class="keyword">is</span> <span class="keyword">present</span> <span class="keyword">on</span> the requested resource. Origin <span class="string">'null'</span> <span class="keyword">is</span> therefore <span class="keyword">not</span> allowed access.</div></pre></td></tr></table></figure>
<h2 id="viewport-width-device-width"><a href="#viewport-width-device-width" class="headerlink" title="viewport width=device-width;"></a>viewport width=device-width;</h2><p>android 360px;</p>
<p>所以，一个完全缩小的网站将会仍然以(iphone)320个CSS像素的形式进行展示，一个CSS像素等于多少个设备像素对于我们来说不重要。 起源于 iphone3gs，像素玻璃的宽认定为320px，然而浏览器冒称960px。所以针对 css 的像素，安卓就是360，ip 为320，对应多少个实际的设备像素就忽略了。</p>
<h2 id="虚拟像素"><a href="#虚拟像素" class="headerlink" title="虚拟像素"></a>虚拟像素</h2><p>在移动设备的屏幕上看到的像素与桌面设备上不同。这意味着，在iPhone 上，无法拿出显微镜来验证一个元素是否是300px 宽。<br>在一个没有viewport 元信息的页面上，视图会默认设定宽度为980px，则宽度为300px 的元素表示的宽度为300 虚拟像素宽.</p>
<p>如果声明 <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=600&quot;&gt;</code>那么一个在CSS 中被定义宽度为600px 的元素在页面加载初始化时将会横向充满屏.</p>
<p>在安卓上 width=device-width; 又因为 Android 的 device-width 设为了 360px； 所以窗口的虚拟像素的 360px 宽。</p>
<p>为了让Web 开发者的思维保持清晰，苹果公司决定继续在iPhone 4 上返回320 的设备宽度，尽管屏幕物理像素为640。</p>
<p>安卓上的Chrome 有一个不是很有用的target-density dpi 的viewport 属性来支持它</p>
<p>第一次加载速度是用“首字节的时间”测量的，即从用户请求该页面到第一个字节从服务器下载下来的这段时间.</p>
<p>第一次加载缓慢的真正原因。真正的原因通常在于前端。PageSpeed 、YSlow 和其他无数的工具和服务可以用来解决这些问题。</p>
<p>window.innerHeiht 就是页面部分，不包括收藏栏，标题栏，菜单栏(包括这些的叫window.outerHeight).</p>
<p>json2.js 补充JSON.parse JSON.stringify 两个json序列化反序列化方法.<br>respond.js可以让IE6-8支持 css的media query 响应式方案。</p>

	
	</div>
  <a type="button" href="/2012/10/02/2012-10-02-javascript读书笔记/#more" class="btn btn-default more">阅读此文</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/11/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
          <li class="next disabled"><a>下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			 

		
			
	<div class="widget">
		<h4>分类</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/Sports/Baseball/">Baseball<span>2</span></a></li>
		
			<li><a href="/categories/Sports/">Sports<span>2</span></a></li>
		
			<li><a href="/categories/bom/">bom<span>1</span></a></li>
		
			<li><a href="/categories/collection/">collection<span>1</span></a></li>
		
			<li><a href="/categories/css/">css<span>1</span></a></li>
		
			<li><a href="/categories/http/">http<span>1</span></a></li>
		
			<li><a href="/categories/javascript-template/">javascript template<span>1</span></a></li>
		
			<li><a href="/categories/javascript-test/">javascript test<span>1</span></a></li>
		
			<li><a href="/categories/jquery/">jquery<span>1</span></a></li>
		
			<li><a href="/categories/library/">library<span>2</span></a></li>
		
			<li><a href="/categories/note/">note<span>1</span></a></li>
		
			<li><a href="/categories/note-vim/">note vim<span>2</span></a></li>
		
			<li><a href="/categories/tool/">tool<span>3</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/default/">default<span>1</span></a></li>
		
			<li><a href="/tags/mac/">mac<span>1</span></a></li>
		
			<li><a href="/tags/demo/">demo<span>1</span></a></li>
		
			<li><a href="/tags/tools/">tools<span>2</span></a></li>
		
			<li><a href="/tags/html5/">html5<span>1</span></a></li>
		
			<li><a href="/tags/git/">git<span>4</span></a></li>
		
			<li><a href="/tags/vim/">vim<span>3</span></a></li>
		
			<li><a href="/tags/javascript/">javascript<span>9</span></a></li>
		
			<li><a href="/tags/jquery/">jquery<span>3</span></a></li>
		
			<li><a href="/tags/hg/">hg<span>1</span></a></li>
		
			<li><a href="/tags/build/">build<span>1</span></a></li>
		
			<li><a href="/tags/think/">think<span>1</span></a></li>
		
			<li><a href="/tags/database-linux/">database linux<span>1</span></a></li>
		
			<li><a href="/tags/framework/">framework<span>1</span></a></li>
		
			<li><a href="/tags/w3c/">w3c<span>1</span></a></li>
		
			<li><a href="/tags/webcomponent-framework/">webcomponent,framework<span>1</span></a></li>
		
			<li><a href="/tags/browser/">browser<span>3</span></a></li>
		
			<li><a href="/tags/javascript-regexp/">javascript regexp<span>1</span></a></li>
		
			<li><a href="/tags/document/">document<span>1</span></a></li>
		
			<li><a href="/tags/webponent/">webponent<span>1</span></a></li>
		
		
		   <li><a href="/tags">...<span>39</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2017/04/23/javascript/" ><i class="fa fa-file-o"></i></a>
      </li>
    
      <li>
        <a href="/2017/04/23/设计模式简介/" ><i class="fa fa-file-o"></i></a>
      </li>
    
      <li>
        <a href="/2017/04/23/消除函数的术语歧义/" ><i class="fa fa-file-o"></i></a>
      </li>
    
      <li>
        <a href="/2017/04/23/前端新人入门/" ><i class="fa fa-file-o"></i></a>
      </li>
    
      <li>
        <a href="/2017/04/23/代码质量的分类/" ><i class="fa fa-file-o"></i></a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/chenyakun" title="My Github repository." target="_blank"]);">My Github</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2017 yakun.cyk
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<!-- <script src="/js/search.js"></script>  -->

<!-- 
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>
 -->

<!-- 
   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>
 -->

<div class="cb-search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px;
        opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">

    <input type="text" class="cb-search-content" id="cb-search-content" style="position: fixed; top: 60px" placeholder="文章标题 日期 标签" />

    <div style="position: fixed; top: 16px; right: 16px;">
        <img src="/search/img/cb-close.png"  id="cb-close-btn"/>
    </div>
</div>

<!-- <div style="position: fixed; right: 16px; bottom: 20px;">
    <img src="/search/img/cb-search.png"  id="cb-search-btn"  title="双击ctrl试一下"/>
</div> -->

<link rel="stylesheet" href="/search/css/cb-search.css">
<script src="/search/js/bootstrap3-typeahead.min.js"></script>
<script src="/search/js/cb-search.js"></script>

</body>
   </html>
