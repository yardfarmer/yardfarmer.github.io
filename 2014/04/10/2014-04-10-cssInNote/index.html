<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>细枝末节css | output stream</title>
  <meta name="author" content="yakun.cyk">
  
  <meta name="description" content="主要内容可能关于 web 技术，感慨心得...">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="细枝末节css"/>
  <meta property="og:site_name" content="output stream"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	    <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
	  <a class="navbar-brand" href="/">output stream</a>
      <div class="collapse navbar-collapse nav-menu">
		    <ul class="nav navbar-nav">
    		  
    		  <li>
    			 <a href="/demos" title="Demos.">
            <i class="fa fa-flask"></i>Demos
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/archives" title="All the articles.">
            <i class="fa fa-archive"></i>归档
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/about" title="About me.">
            <i class="fa fa-user"></i>关于我
    			 </a>
    		  </li>
    		  
    		  <li>
    			 <a href="/#" title="Search Posts.">
            <i class="fa fa-search"></i>搜索
    			 </a>
    		  </li>
    		  
    		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> 细枝末节css</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h3 id="选择器解析"><a href="#选择器解析" class="headerlink" title="选择器解析"></a>选择器解析</h3><p>浏览器解析CSS 选择器是从右往左的。这意味着，如果它看到一个如“<code>nav ul li a</code> 的规则时，它首先必须获得所有匹配a 的元素列表，然后检查看 它是不是li 的后代，再按相同规则继续检查。后代选择器虽然看起来方便，但它的性能开销是最大的。</p>
<h2 id="元素的位置"><a href="#元素的位置" class="headerlink" title="元素的位置"></a>元素的位置</h2><p>元素的 x 和 y 坐标可以相对于文档的<code>左上角</code>或者相对于在其中<code>显示文档</code>的 <code>视口</code>的左上角。</p>
<blockquote>
<p>在顶级窗口和标签页中，视口只是实际显示文档内容的一部分； 它不包括浏览器的外壳，拖动浏览器的边框，大小会跟随改变。</p>
</blockquote>
<p>无论在何种情况下，当讨论元素的位置时，必须弄清楚所使用的坐标是文档坐标还是视口坐标。如果文档比视口要小，或者说它还未出现滚动，则文档的左上角就是视口的左上角,文档和视口坐标系统是同一个。</p>
<figure class="highlight fix"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">视口坐标+滚动的偏移量 </span>=<span class="string"> 文档的坐标</span></div></pre></td></tr></table></figure>
<p>文档坐标比视口坐标更加基础，并且在用户滚动时它们不会发生变化。</p>
<p>当为鼠标事件注册事件处理程序函数时，报告的鼠标指针的坐标是在<code>视口坐标系</code>中的。</p>
<h4 id="Window-innerHeight"><a href="#Window-innerHeight" class="headerlink" title="Window.innerHeight"></a>Window.innerHeight</h4><p>window.innerHeight 是为了兼容性的考虑，IE9才开始支持。 <strong>用于窗口元素的，不是用于普通元素的</strong></p>
<p>也就是浏览器窗口的视口（viewport）高度（以像素为单位），如果存在水平滚动条，则包括滚动条.  任何窗口对象，如 window、frame、frameset 或 secondary window 都支持 <code>innerHeight</code> 属性。</p>
<p>兼容性：</p>
<pre><code>Chrome       Firefox (Gecko)       Internet Explorer Opera  Safari
    1      1.0 (1.7 or earlier)           9            9       3
</code></pre><p>想获取窗口的外层高度（outer height），即整个浏览器窗口的高度，使用 <code>window.outerHeight</code>。</p>
<h4 id="document-height"><a href="#document-height" class="headerlink" title="document.height"></a>document.height</h4><p>已废弃 用什么替代该属性</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientHeight</span></div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span></div></pre></td></tr></table></figure>
<h4 id="element-clientHeight"><a href="#element-clientHeight" class="headerlink" title="element.clientHeight"></a>element.clientHeight</h4><p>返回元素内部的高度(单位像数), 包含 padding, 但<code>不包括水平滚动条,border 和 margin</code>.</p>
<p>clientHeight 是只读的.  不是属于W3C规格。 <strong>注意</strong></p>
<p><code>clientHeight</code> 是一个非标准属性, 它从 Internet Explorer 对象模型引入. 它是<code>HTML</code>的特有属性.</p>
<h4 id="Element-scrollHeight"><a href="#Element-scrollHeight" class="headerlink" title="Element.scrollHeight"></a>Element.scrollHeight</h4><p>Element.scrollHeight 是计量元素内容高度的只读属性，包括overflow样式属性导致的视图中不可见内容。<br>没有垂直滚动条的情况下，scrollHeight值与元素视图填充所有内容所需要的最小值clientHeight相同。 包括元素的padding，但不包括元素的margin.  </p>
<h4 id="判定元素是否滚动到底"><a href="#判定元素是否滚动到底" class="headerlink" title="判定元素是否滚动到底"></a>判定元素是否滚动到底</h4><p>如果元素滚动到底，下面等式返回true，没有则返回false.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">element.scrollHeight - element.scrollTop === element.clientHeight   <span class="comment">// element 已滚动到底</span></div></pre></td></tr></table></figure>
<p>浏览器兼容性</p>
<pre><code>Browser           Lowest version
Internet Explorer    8.0
</code></pre><h4 id="Element-getBoundingClientRect"><a href="#Element-getBoundingClientRect" class="headerlink" title="Element.getBoundingClientRect()"></a>Element.getBoundingClientRect()</h4><p>相对于 <code>视口</code>，而不是 <code>文档(dom)</code></p>
<blockquote>
<p>The returned value is a TextRectangle object, which contains read-only </p>
<ul>
<li>left, </li>
<li>top, </li>
<li>right and </li>
<li>bottom<br>properties describing the border-box in pixels. top and left are relative to the top-left of the viewport.</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rect = obj.getBoundingClientRect();</div></pre></td></tr></table></figure>
<p>Browser compatibility</p>
<pre><code>Desktop 
Feature           Chrome    Firefox (Gecko) Internet Explorer    Opera    Safari
Basic support    1.0        3.0 (1.9)             4.0 [1]        (Yes)     4.0
width/height    (Yes)    3.5 (1.9.1)          9                (Yes)    (Yes)
</code></pre><h4 id="HTMLElement-offsetLeft"><a href="#HTMLElement-offsetLeft" class="headerlink" title="HTMLElement.offsetLeft"></a>HTMLElement.offsetLeft</h4><p>The HTMLElement.offsetLeft read-only method returns the number of pixels that the upper left corner of the current element is offset to the left within the <code>HTMLElement.offsetParent</code> node.</p>
<p>For block-level elements, offsetTop, offsetLeft, offsetWidth, and offsetHeight describe the border box of an element relative to the offsetParent<code>(containing box)</code>.</p>
<p>没有 OffsetRight，offsetBottom</p>
<h4 id="HTMLElement-offsetHeight"><a href="#HTMLElement-offsetHeight" class="headerlink" title="HTMLElement.offsetHeight"></a>HTMLElement.offsetHeight</h4><p>The HTMLElement.offsetHeight read-only property is the height of the element including（包括） vertical padding and borders, in pixels, as an integer.  </p>
<p>Typically, an element’s offsetHeight is a measurement which includes the element borders, the element vertical padding,<br>the element horizontal scrollbar (if present, if rendered) and the element CSS height.  (如果有滚动条，包括滚动条)</p>
<p>许多文章已经介绍了clientHeight和offsetHeight的区别，就是<code>clientHeight</code>的值不包括 scrollbar 的高度，而 <code>offsetHeight</code> 的值包括了scrollbar的高度。</p>
<p>判定一个元素的尺寸和位置最简单的方法是调用它的 <code>getBoundingClientRect()</code> 方法。该方法是在 <code>IE5</code> 中引入的，而现在当前的所有浏览器都实现了。 </p>
<p>在很多浏览器(和W3C标准)中， getBoundingClientRect() 返回的对象还包含width 和 height属性，但是在原始的IE中未实现。为了简便起见，可以这样计算元素的 width 和 height:</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> <span class="built_in">box</span> = e.getBoundingClientRect();</div><div class="line"><span class="built_in">var</span> w = <span class="built_in">box</span>.<span class="built_in">width</span> || (<span class="built_in">box</span>.right - <span class="built_in">box</span>.left);</div><div class="line"><span class="built_in">var</span> h = <span class="built_in">box</span>.<span class="built_in">height</span> || (<span class="built_in">box</span>.bottom - <span class="built_in">box</span>.top);</div></pre></td></tr></table></figure>
<p>除了这些名字以 <code>offset</code> 开头的属性以外，所有的文档元素定义了同时其他两组属性，其名称一组以 <code>client</code> 开头，另一组以 <code>scroll</code> 开头。即，每个HTML元素都有以下这些属性:</p>
<pre><code>offsetWidth offsetHeight offsetLeft offsetTop offsetParent    // = css.height + border*2 + padding，不受滚动条影响 

clientWidth clientHeight clientLeft clientTop \                
                                                 —— &gt; 不滚动时(但可包括滚动条)数值一样; 滚动时，scroll 包括 全部高度，而 client 只含可见高度
scrollWidth scrollHeight scrollLeft scrollTop /
</code></pre><blockquote>
<p>为了理解这些 client 和 scroll 属性，你需要知道HTML元素的实际内容有可能比分配用来容纳内容的盒子更大，因此单个元素可能有海动条.</p>
</blockquote>
<p>内容区域是视口，就像浏览器的窗口，当实际内容比视口更大时，需要把元素的滚动条位置考虑进去。</p>
<p>clientWidth 和 clientHeight 类似 offsetWidth 和 offsetHeight. 不同的是它们不包含<code>边框</code>大小，只包含内容和它的内边距。同时，如果浏览器在内边距和边框之间添加了滚动条. clientWidth 和 clientHeight 在其返回值中也不包含滚动条。</p>
<p><strong> <code>code</code>和<code>span</code>这些内联元素. clientWidth 和 clientHeight 总是返回0。</strong><br>font-size: px<br>字体用像素设定</p>
<p>其他元素与浮动元素相邻，这些元素的外边距不会与浮动元素的外边距合并。即3+2 = 5，而不是3 + 2 = 3。</p>
<p><img src="codesnip_20150110204724.jpg" alt="格式计算图"></p>
<h4 id="图片定位的百分数用法："><a href="#图片定位的百分数用法：" class="headerlink" title="图片定位的百分数用法："></a>图片定位的百分数用法：</h4><p>图片的(99.9%,99%) 这个点与.container(所在容器)的(99.9%，99%)这个点对齐。<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">background</span>-<span class="built_in">position</span>: <span class="number">99.9</span>% <span class="number">99</span>%;</div></pre></td></tr></table></figure></p>
<p>这样在使图片紧紧靠右，紧紧靠下就很简单。就使图片的（100%，100%）对准容器的（100%，100%）就可以了。</p>
<h4 id="选择器规则"><a href="#选择器规则" class="headerlink" title="选择器规则"></a>选择器规则</h4><p>浏览器解析 CSS 选择器是从右往左的。这意味着，如果它看到一个如“<code>nav ul li a</code> 的规则时，它首先必须获得所有匹配 a 的元素列表，然后检查看它是不是li 的后代，再按相同规则继续检查。后代选择器虽然看起来方便，但它的性能开销是最大的。</p>
<h2 id="盒"><a href="#盒" class="headerlink" title="盒"></a>盒</h2><p>这里的盒是个多元的概念,其中相关的有：</p>
<ul>
<li>block level boxes </li>
<li>containing block</li>
<li>block formatting context(BFC)</li>
</ul>
<p>想想浏览器怎么把一个元素”画”出来，至少要知道定位和尺寸。<strong>定位有三种 normal flow, floats 和 absolute</strong>，无论属于哪种首先要找所在的containing block(翻译为包含块)，相当于一个大箱子里摆很多小盒子，小盒子怎么摆取决于大箱子。</p>
<p>怎么确定一个元素的containing block，由position属性确定：</p>
<ol>
<li>static(默认的)/relative：简单说就是它的父元素的内容框（即去掉padding的部分）</li>
<li>absolute: 向上找最近的定位为absolute/relative的元素</li>
<li>fixed: 它的containing block一律为根元素(html/body)，根元素也是initial containing block</li>
</ol>
<p><code>block formatting context(块级格式化上下文)</code>是一种<strong>布局特性</strong>，还是往箱子里放东西，bfc可以理解为打了<strong>隔板</strong>把一组小盒子分离开。</p>
<p><code>block-level box</code>一定会产生’block formatting context’是错误的，block-level box须通过设置如overflow不为visible(IE6/7无效，可以设zoom)、float不为none等等来创建block formatting context。</p>
<p>触发了bfc的block level box，没有<strong>margin callapse</strong>的问题，并且边缘不会和<code>float</code>的box的边缘重叠，利用它可以清浮动。</p>
<blockquote>
<p>页面上任何一个元素都可以看成 box ,可分为 </p>
<ul>
<li>block-level(块级)，如  ‘block’, ‘list-item’, and ‘table’.</li>
<li>inline-level(行内)<br>和匿名的。</li>
</ul>
</blockquote>
<h3 id="关于行内框和行框的概念"><a href="#关于行内框和行框的概念" class="headerlink" title="关于行内框和行框的概念"></a>关于行内框和行框的概念</h3><p>文本行中的每个元素都会生成一个内容区。这个内容区则会生成一个行内框（inline box），当一行中的所有内容均已生成了行内框，那么接下来在行框的构造中就会考虑这些行内框，行框要包含住最高行内框的顶端和最低行内框的底端。</p>
<h2 id="元素居中"><a href="#元素居中" class="headerlink" title="元素居中"></a>元素居中</h2><p>元素居中分为固定宽度和非固定宽度</p>
<p>对于固定宽度:<br>    设定居中元素 margin: xxpx auto; // 同理适用于垂直居中</p>
<p>对于非固定宽度元素:<br>    在父元素上设定 text-align: center;<br>    在目标元素上设定  display: inline-block;</p>
<h2 id="脱离文档流"><a href="#脱离文档流" class="headerlink" title="脱离文档流"></a>脱离文档流</h2><p>也就是将元素从普通的布局排版中拿走，其他盒子在定位的时候，会当做脱离文档流的元素不存在而进行定位。需要注意的是，使用float脱离文档流时，其他盒子会无视这个元素，但其他盒子内的文本依然会为这个元素让出位置，环绕在周围。而对于使用absolute positioning脱离文档流的元素，其他盒子与其他盒子内的文本都会无视它。</p>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2014/04/21/2014-04-11-grunt/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
  		

        <li><a href="/demos"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2014/04/02/2014-04-02-如何在Array.forEach的循环里break/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>

  
</section>

	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2014-04-10 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/css/">css<span>2</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/css/">css<span>8</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2017 yakun.cyk
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<!-- <script src="/js/search.js"></script>  -->

<!-- 
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>
 -->

<!-- 
   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>
 -->

<div class="cb-search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px;
        opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">

    <input type="text" class="cb-search-content" id="cb-search-content" style="position: fixed; top: 60px" placeholder="文章标题 日期 标签" />

    <div style="position: fixed; top: 16px; right: 16px;">
        <img src="/search/img/cb-close.png"  id="cb-close-btn"/>
    </div>
</div>

<!-- <div style="position: fixed; right: 16px; bottom: 20px;">
    <img src="/search/img/cb-search.png"  id="cb-search-btn"  title="双击ctrl试一下"/>
</div> -->

<link rel="stylesheet" href="/search/css/cb-search.css">
<script src="/search/js/bootstrap3-typeahead.min.js"></script>
<script src="/search/js/cb-search.js"></script>

</body>
   </html>
